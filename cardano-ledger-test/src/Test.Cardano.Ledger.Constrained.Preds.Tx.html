<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-comment">-- ==============================================</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.Tx</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-crypto-wrapper-1.5.1.3/doc/html/cardano-crypto-wrapper/src"><span class="hs-identifier">Cardano.Crypto.Signing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-crypto-wrapper-1.5.1.3/doc/html/cardano-crypto-wrapper/src"><span class="hs-identifier">SigningKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Address</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">BootstrapAddress</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">Cardano.Ledger.Alonzo.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">AlonzoScript</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ExUnits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">plutusScriptLanguage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">toAsIx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">Cardano.Ledger.Alonzo.Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">IsValid</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">Cardano.Ledger.Alonzo.TxWits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">TxDats</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">Cardano.Ledger.Alonzo.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier">getInputDataHashesTxBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-api-1.9.4.0/doc/html/cardano-ledger-api/src"><span class="hs-identifier">Cardano.Ledger.Api</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">setMinFeeTxUtxo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-babbage-1.10.0.0/doc/html/cardano-ledger-babbage/src"><span class="hs-identifier">Cardano.Ledger.Babbage.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-babbage-1.10.0.0/doc/html/cardano-ledger-babbage/src"><span class="hs-identifier">getReferenceScripts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Network</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ProtVer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-02824dbe7a6e325f56f5594c869dfb54025c80a476fc3671ac01b6da9422d55e/share/doc/html/src"><span class="hs-identifier">strictMaybeToMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Cardano.Ledger.Binary.Decoding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">mkSized</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">sizedSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Cardano.Ledger.Binary.Encoding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">EncCBOR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.CertState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">CertState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">certDStateL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">dsGenDelegsL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">rationalToCoinViaCeiling</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-conway-1.17.0.0/doc/html/cardano-ledger-conway/src"><span class="hs-identifier">Cardano.Ledger.Conway.Core</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">GenDelegs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">KeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">WitVKey</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">asWitness</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">coerceKeyRole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Keys.Bootstrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">BootstrapWitness</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier">Cardano.Ledger.Mary.Value</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier">AssetName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier">MaryValue</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier">MultiAsset</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier">PolicyID</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Plutus.Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Data</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Plutus.Language</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Language</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.SafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">SafeHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">extractHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">hashAnnotated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.AdaPots</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">consumedTxBody</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">producedTxBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">LedgerState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">NewEpochState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">LedgerEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.TxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">isInstantaneousRewards</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">EraUTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ScriptsProvided</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Val</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">inject</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">when</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">Control.State.Transition.Extended</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier">Data.Default.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier">def</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">foldl'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">toList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Ratio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(%)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">pack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Stack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier">Lens.Micro</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Ast</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Classes</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Env</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Lenses.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Lenses</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Lenses.html#fstL"><span class="hs-identifier">fstL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Lenses.html#sndL"><span class="hs-identifier">sndL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Monad</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#Typed"><span class="hs-identifier">Typed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#errorTyped"><span class="hs-identifier">errorTyped</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#failT"><span class="hs-identifier">failT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#generateWithSeed"><span class="hs-identifier">generateWithSeed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier">monadTyped</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.CertState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#dstateStage"><span class="hs-identifier">dstateStage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#pstateStage"><span class="hs-identifier">pstateStage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#vstateStage"><span class="hs-identifier">vstateStage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.Certs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html#certsStage"><span class="hs-identifier">certsStage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html#ledgerStateStage"><span class="hs-identifier">ledgerStateStage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.NewEpochState.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.NewEpochState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.NewEpochState.html#epochStateStage"><span class="hs-identifier">epochStateStage</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.NewEpochState.html#newEpochStateStage"><span class="hs-identifier">newEpochStateStage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.PParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html#pParamsStage"><span class="hs-identifier">pParamsStage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.Repl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#ReplMode"><span class="hs-identifier">ReplMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#goRepl"><span class="hs-identifier">goRepl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#modeRepl"><span class="hs-identifier">modeRepl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.TxOut.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.TxOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.TxOut.html#txOutPreds"><span class="hs-identifier">txOutPreds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.UTxO.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.UTxO.html#utxoStage"><span class="hs-identifier">utxoStage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.Universes</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#demo"><span class="hs-identifier">demo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#demoTest"><span class="hs-identifier">demoTest</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#main"><span class="hs-identifier">main</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Rewrite.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Rewrite</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Scripts.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Scripts.html#sufficientScript"><span class="hs-identifier">sufficientScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Size.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Size</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Size.html#Size"><span class="hs-identifier">Size</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Solver.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Solver</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Solver.html#toolChainSub"><span class="hs-identifier">toolChainSub</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.TypeRep.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.TypeRep</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Vars.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Vars</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Vars.html#totalAda"><span class="hs-identifier">totalAda</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Test.Cardano.Ledger.Core.KeyPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">KeyPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">mkWitnessVKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html"><span class="hs-identifier">Test.Cardano.Ledger.Generic.Fields</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#TxBodyField"><span class="hs-identifier">TxBodyField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#TxField"><span class="hs-identifier">TxField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#abstractTx"><span class="hs-identifier">abstractTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#abstractTxBody"><span class="hs-identifier">abstractTxBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Functions.html"><span class="hs-identifier">Test.Cardano.Ledger.Generic.Functions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Functions.html#TotalAda"><span class="hs-identifier">TotalAda</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Functions.html#totalAda"><span class="hs-identifier">totalAda</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Functions.html#protocolVersion"><span class="hs-identifier">protocolVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.GenState.html"><span class="hs-identifier">Test.Cardano.Ledger.Generic.GenState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Generic.GenState.html#mkRedeemers"><span class="hs-identifier">mkRedeemers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html"><span class="hs-identifier">Test.Cardano.Ledger.Generic.PrettyCore</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-103"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PDoc"><span class="hs-identifier">PDoc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PrettyA"><span class="hs-identifier">PrettyA</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcGenDelegPair"><span class="hs-identifier">pcGenDelegPair</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcKeyHash"><span class="hs-identifier">pcKeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcLedgerState"><span class="hs-identifier">pcLedgerState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcScript"><span class="hs-identifier">pcScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcScriptHash"><span class="hs-identifier">pcScriptHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTx"><span class="hs-identifier">pcTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxBody"><span class="hs-identifier">pcTxBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxBodyField"><span class="hs-identifier">pcTxBodyField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxField"><span class="hs-identifier">pcTxField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxIn"><span class="hs-identifier">pcTxIn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxOut"><span class="hs-identifier">pcTxOut</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppMap"><span class="hs-identifier">ppMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppRecord"><span class="hs-identifier">ppRecord</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppSafeHash"><span class="hs-identifier">ppSafeHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppString"><span class="hs-identifier">ppString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#psNewEpochState"><span class="hs-identifier">psNewEpochState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#putDoc"><span class="hs-identifier">putDoc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html"><span class="hs-identifier">Test.Cardano.Ledger.Generic.Proof</span></a></span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.TxGen.html"><span class="hs-identifier">Test.Cardano.Ledger.Generic.TxGen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Generic.TxGen.html#applySTSByProof"><span class="hs-identifier">applySTSByProof</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Updaters.html"><span class="hs-identifier">Test.Cardano.Ledger.Generic.Updaters</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Updaters.html#newScriptIntegrityHash"><span class="hs-identifier">newScriptIntegrityHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier">Test.QuickCheck</span></a></span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier">Test.Tasty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier">TestTree</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier">defaultMain</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier">testGroup</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-quickcheck-0.11-f7b5b54ac4f7fedfbc5b4a059efd8763465a4d360842aa9a33a96c0eb490a2bb/share/doc/html/src"><span class="hs-identifier">Test.Tasty.QuickCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-quickcheck-0.11-f7b5b54ac4f7fedfbc5b4a059efd8763465a4d360842aa9a33a96c0eb490a2bb/share/doc/html/src"><span class="hs-identifier">testProperty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">drepDepositL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.EpochBoundary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">SnapShot</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Stake</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">calculatePoolDistr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UMap</span></span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/vector-map-1.1.0.0/doc/html/vector-map/src"><span class="hs-identifier">Data.VMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VMap</span></span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.CertState</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CertState</span></span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.Certs</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Certs</span></span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.LedgerState</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LedgerState</span></span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.PParams</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PParams</span></span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.TxOut.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.TxOut</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TxOut</span></span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Preds.Universes</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Universes</span></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Utils.html"><span class="hs-identifier">Test.Cardano.Ledger.Constrained.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Utils.html#checkForSoundness"><span class="hs-identifier">checkForSoundness</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Utils.html#testIO"><span class="hs-identifier">testIO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#predsTests"><span class="hs-identifier hs-type">predsTests</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier hs-type">TestTree</span></a></span><span>
</span><span id="line-143"></span><span id="predsTests"><span class="annot"><span class="annottext">predsTests :: TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#predsTests"><span class="hs-identifier hs-var hs-var">predsTests</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-144"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Testing all Stages in the Preds directory&quot;</span></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html#demoTest"><span class="hs-identifier hs-var">PParams.demoTest</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#demoTest"><span class="hs-identifier hs-var">Universes.demoTest</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.TxOut.html#demoTest"><span class="hs-identifier hs-var">TxOut.demoTest</span></a></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#demoTest"><span class="hs-identifier hs-var">CertState.demoTest</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html#demoTest"><span class="hs-identifier hs-var">Certs.demoTest</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html#demoTest"><span class="hs-identifier hs-var">LedgerState.demoTest</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodySize"><span class="hs-identifier hs-type">txBodySize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137997"><span class="annot"><a href="#local-6989586621685137997"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137997"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137997"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-157"></span><span id="txBodySize"><span class="annot"><span class="annottext">txBodySize :: forall era. Reflect era =&gt; TxBody era -&gt; Int
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodySize"><span class="hs-identifier hs-var hs-var">txBodySize</span></a></span></span><span> </span><span id="local-6989586621685136763"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136763"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Sized a -&gt; Int64
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">sizedSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; Version -&gt; a -&gt; Sized a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">mkSized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer -&gt; Version
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">pvMajor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Proof era -&gt; ProtVer
</span><a href="Test.Cardano.Ledger.Generic.Functions.html#protocolVersion"><span class="hs-identifier hs-var">protocolVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137997"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136763"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#byteSize"><span class="hs-identifier hs-type">byteSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137980"><span class="annot"><a href="#local-6989586621685137980"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621685137981"><span class="annot"><a href="#local-6989586621685137981"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137981"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137980"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137980"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137981"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-160"></span><span id="byteSize"><span class="annot"><span class="annottext">byteSize :: forall era a. (EncCBOR a, Reflect era) =&gt; Proof era -&gt; a -&gt; Int
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#byteSize"><span class="hs-identifier hs-var hs-var">byteSize</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136753"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685136753"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Sized a -&gt; Int64
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">sizedSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. EncCBOR a =&gt; Version -&gt; a -&gt; Sized a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">mkSized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtVer -&gt; Version
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">pvMajor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Proof era -&gt; ProtVer
</span><a href="Test.Cardano.Ledger.Generic.Functions.html#protocolVersion"><span class="hs-identifier hs-var">protocolVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137980"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685136753"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#byteSizeT"><span class="hs-identifier hs-type">byteSizeT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137976"><span class="annot"><a href="#local-6989586621685137976"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621685137977"><span class="annot"><a href="#local-6989586621685137977"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.4.0.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137977"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137976"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137976"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137977"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137976"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-163"></span><span id="byteSizeT"><span class="annot"><span class="annottext">byteSizeT :: forall era a.
(EncCBOR a, Reflect era) =&gt;
Term era a -&gt; Target era Int
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#byteSizeT"><span class="hs-identifier hs-var hs-var">byteSizeT</span></a></span></span><span> </span><span id="local-6989586621685136746"><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685136746"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;byteSize&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era a. (EncCBOR a, Reflect era) =&gt; Proof era -&gt; a -&gt; Int
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#byteSize"><span class="hs-identifier hs-var">byteSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137976"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685136746"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- ===============================================</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- Helpful Lenses</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span id="local-6989586621685137963"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txFL"><span class="hs-identifier hs-type">txFL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137963"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137963"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-169"></span><span id="txFL"><span class="annot"><span class="annottext">txFL :: forall era. Lens' (TxF era) (Tx era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txFL"><span class="hs-identifier hs-var hs-var">txFL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136738"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685136738"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685136738"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span id="local-6989586621685136737"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136737"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136736"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685136736"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Tx era -&gt; TxF era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-var">TxF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136737"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685136736"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">-- ================================================</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- Auxiliary functions and Targets</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span id="local-6989586621685137952"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#computeFinalFee"><span class="hs-identifier hs-type">computeFinalFee</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-180"></span><span id="computeFinalFee"><span class="annot"><span class="annottext">computeFinalFee :: forall era.
EraUTxO era =&gt;
PParamsF era
-&gt; TxF era -&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; Coin
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#computeFinalFee"><span class="hs-identifier hs-var hs-var">computeFinalFee</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136723"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685136723"><span class="hs-identifier hs-var">ppV</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136722"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685136722"><span class="hs-identifier hs-var">txV</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136721"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136721"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685136720"><span class="hs-identifier hs-var">newtx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxBody era =&gt; Lens' (TxBody era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">feeTxBodyL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-182"></span><span>    </span><span id="local-6989586621685136720"><span class="annot"><span class="annottext">newtx :: Tx era
</span><a href="#local-6989586621685136720"><span class="hs-identifier hs-var hs-var">newtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
PParams era -&gt; Tx era -&gt; UTxO era -&gt; Tx era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">setMinFeeTxUtxo</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685136723"><span class="hs-identifier hs-var">ppV</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685136722"><span class="hs-identifier hs-var">txV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136721"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span id="local-6989586621685137934"><span id="local-6989586621685137935"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#integrityHash"><span class="hs-identifier hs-type">integrityHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-187"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137934"><span class="hs-identifier hs-type">era2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137934"><span class="hs-identifier hs-type">era2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Language</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137934"><span class="hs-identifier hs-type">era2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPointerF"><span class="hs-identifier hs-type">PlutusPointerF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Data</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ExUnits</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137934"><span class="hs-identifier hs-type">era2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DataHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Data</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137934"><span class="hs-identifier hs-type">era2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">ScriptIntegrityHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137935"><span class="hs-identifier hs-type">era1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-192"></span><span id="integrityHash"><span class="annot"><span class="annottext">integrityHash :: forall era1 era2.
Era era1 =&gt;
Proof era1
-&gt; Term era2 (PParamsF era1)
-&gt; Term era2 (Set Language)
-&gt; Term era2 (Map (PlutusPointerF era1) (Data era1, ExUnits))
-&gt; Term era2 (Map (DataHash (EraCrypto era1)) (Data era1))
-&gt; Target era2 (Maybe (ScriptIntegrityHash (EraCrypto era1)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#integrityHash"><span class="hs-identifier hs-var hs-var">integrityHash</span></a></span></span><span> </span><span id="local-6989586621685136711"><span class="annot"><span class="annottext">Proof era1
</span><a href="#local-6989586621685136711"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621685136710"><span class="annot"><span class="annottext">Term era2 (PParamsF era1)
</span><a href="#local-6989586621685136710"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span id="local-6989586621685136709"><span class="annot"><span class="annottext">Term era2 (Set Language)
</span><a href="#local-6989586621685136709"><span class="hs-identifier hs-var">langs</span></a></span></span><span> </span><span id="local-6989586621685136708"><span class="annot"><span class="annottext">Term era2 (Map (PlutusPointerF era1) (Data era1, ExUnits))
</span><a href="#local-6989586621685136708"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span id="local-6989586621685136707"><span class="annot"><span class="annottext">Term era2 (Map (DataHash (EraCrypto era1)) (Data era1))
</span><a href="#local-6989586621685136707"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;integrityHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">PParamsF era1
-&gt; Set Language
-&gt; Map (PlutusPointerF era1) (Data era1, ExUnits)
-&gt; Map (DataHash (EraCrypto era1)) (Data era1)
-&gt; Maybe (ScriptIntegrityHash (EraCrypto era1))
</span><a href="#local-6989586621685136706"><span class="hs-identifier hs-var">hashfun</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era2 (PParamsF era1)
</span><a href="#local-6989586621685136710"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era2 (Set Language)
</span><a href="#local-6989586621685136709"><span class="hs-identifier hs-var">langs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era2 (Map (PlutusPointerF era1) (Data era1, ExUnits))
</span><a href="#local-6989586621685136708"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era2 (Map (DataHash (EraCrypto era1)) (Data era1))
</span><a href="#local-6989586621685136707"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-193"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-194"></span><span>    </span><span id="local-6989586621685136706"><span class="annot"><span class="annottext">hashfun :: PParamsF era1
-&gt; Set Language
-&gt; Map (PlutusPointerF era1) (Data era1, ExUnits)
-&gt; Map (DataHash (EraCrypto era1)) (Data era1)
-&gt; Maybe (ScriptIntegrityHash (EraCrypto era1))
</span><a href="#local-6989586621685136706"><span class="hs-identifier hs-var hs-var">hashfun</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era1
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136705"><span class="annot"><span class="annottext">PParams era1
</span><a href="#local-6989586621685136705"><span class="hs-identifier hs-var">ppp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136704"><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136704"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span id="local-6989586621685136703"><span class="annot"><span class="annottext">Map (PlutusPointerF era1) (Data era1, ExUnits)
</span><a href="#local-6989586621685136703"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621685136702"><span class="annot"><span class="annottext">Map (DataHash (EraCrypto era1)) (Data era1)
</span><a href="#local-6989586621685136702"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685136701"><span class="annot"><span class="annottext">r' :: [(PlutusPurpose AsIx era1, (Data era1, ExUnits))]
</span><a href="#local-6989586621685136701"><span class="hs-identifier hs-var hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlutusPurpose AsIx era1
</span><a href="#local-6989586621685136700"><span class="hs-identifier hs-var">ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Data era1, ExUnits)
</span><a href="#local-6989586621685136699"><span class="hs-identifier hs-var">de</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPointerF"><span class="hs-identifier hs-type">PlutusPointerF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era1
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136700"><span class="annot"><span class="annottext">PlutusPurpose AsIx era1
</span><a href="#local-6989586621685136700"><span class="hs-identifier hs-var">ptr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685136699"><span class="annot"><span class="annottext">(Data era1, ExUnits)
</span><a href="#local-6989586621685136699"><span class="hs-identifier hs-var">de</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map (PlutusPointerF era1) (Data era1, ExUnits)
</span><a href="#local-6989586621685136703"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-196"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a. StrictMaybe a -&gt; Maybe a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-02824dbe7a6e325f56f5594c869dfb54025c80a476fc3671ac01b6da9422d55e/share/doc/html/src"><span class="hs-identifier hs-var">strictMaybeToMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-197"></span><span>            </span><span class="annot"><span class="annottext">forall era.
Proof era
-&gt; PParams era
-&gt; [Language]
-&gt; Redeemers era
-&gt; TxDats era
-&gt; StrictMaybe (ScriptIntegrityHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Generic.Updaters.html#newScriptIntegrityHash"><span class="hs-identifier hs-var">newScriptIntegrityHash</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era1
</span><a href="#local-6989586621685136711"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era1
</span><a href="#local-6989586621685136705"><span class="hs-identifier hs-var">ppp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136704"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Proof era
-&gt; [(PlutusPurpose AsIx era, (Data era, ExUnits))] -&gt; Redeemers era
</span><a href="Test.Cardano.Ledger.Generic.GenState.html#mkRedeemers"><span class="hs-identifier hs-var">mkRedeemers</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era1
</span><a href="#local-6989586621685136711"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[(PlutusPurpose AsIx era1, (Data era1, ExUnits))]
</span><a href="#local-6989586621685136701"><span class="hs-identifier hs-var">r'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Map (DataHash (EraCrypto era)) (Data era) -&gt; TxDats era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">TxDats</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DataHash (EraCrypto era1)) (Data era1)
</span><a href="#local-6989586621685136702"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">-- | &quot;Construct the Scripts Needed to compute the Script Witnesses from the UTxO and the partial TxBody</span><span>
</span><span id="line-200"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#needT"><span class="hs-identifier hs-type">needT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137912"><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-204"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-208"></span><span>      </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptsNeededF"><span class="hs-identifier hs-type">ScriptsNeededF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span id="needT"><span class="annot"><span class="annottext">needT :: forall era.
EraUTxO era =&gt;
Proof era
-&gt; Target
     era
     (TxBodyF era
      -&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; ScriptsNeededF era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#needT"><span class="hs-identifier hs-var hs-var">needT</span></a></span></span><span> </span><span id="local-6989586621685136691"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136691"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;neededScripts&quot;</span></span><span> </span><span class="annot"><span class="annottext">TxBodyF era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; ScriptsNeededF era
</span><a href="#local-6989586621685136690"><span class="hs-identifier hs-var">needed</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><a href="#local-6989586621685136690"><span class="hs-identifier hs-type">needed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptsNeededF"><span class="hs-identifier hs-type">ScriptsNeededF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137912"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span id="local-6989586621685136690"><span class="annot"><span class="annottext">needed :: TxBodyF era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; ScriptsNeededF era
</span><a href="#local-6989586621685136690"><span class="hs-identifier hs-var hs-var">needed</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136688"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136688"><span class="hs-identifier hs-var">txbodyV</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136687"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136687"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; ScriptsNeeded era -&gt; ScriptsNeededF era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptsNeededF"><span class="hs-identifier hs-var">ScriptsNeededF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136691"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
UTxO era -&gt; TxBody era -&gt; ScriptsNeeded era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getScriptsNeeded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136687"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136688"><span class="hs-identifier hs-var">txbodyV</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span id="local-6989586621685137903"><span id="local-6989586621685137906"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#rdmrPtrsT"><span class="hs-identifier hs-type">rdmrPtrsT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">AlonzoEraScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137906"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="#local-6989586621685137906"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPurposeF"><span class="hs-identifier hs-type">PlutusPurposeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137906"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137906"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-220"></span><span>      </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137906"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621685137903"><span class="hs-identifier hs-type">any</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-221"></span><span>      </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPointerF"><span class="hs-identifier hs-type">PlutusPointerF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137906"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-special">)</span></span></span><span>
</span><span id="line-223"></span><span id="rdmrPtrsT"><span class="annot"><span class="annottext">rdmrPtrsT :: forall era any.
AlonzoEraScript era =&gt;
Target
  era
  ([(PlutusPurposeF era, ScriptHash (EraCrypto era))]
   -&gt; Map (ScriptHash (EraCrypto era)) any
   -&gt; Set (PlutusPointerF era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#rdmrPtrsT"><span class="hs-identifier hs-var hs-var">rdmrPtrsT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;getRdmrPtrs&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era any.
AlonzoEraScript era =&gt;
[(PlutusPurposeF era, ScriptHash (EraCrypto era))]
-&gt; Map (ScriptHash (EraCrypto era)) any -&gt; Set (PlutusPointerF era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getRdmrPtrs"><span class="hs-identifier hs-var">getRdmrPtrs</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span id="local-6989586621685137900"><span id="local-6989586621685137901"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getRdmrPtrs"><span class="hs-identifier hs-type">getRdmrPtrs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">AlonzoEraScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137901"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPurposeF"><span class="hs-identifier hs-type">PlutusPurposeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137901"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137901"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137901"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621685137900"><span class="hs-identifier hs-type">any</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPointerF"><span class="hs-identifier hs-type">PlutusPointerF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137901"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-230"></span><span id="getRdmrPtrs"><span class="annot"><span class="annottext">getRdmrPtrs :: forall era any.
AlonzoEraScript era =&gt;
[(PlutusPurposeF era, ScriptHash (EraCrypto era))]
-&gt; Map (ScriptHash (EraCrypto era)) any -&gt; Set (PlutusPointerF era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getRdmrPtrs"><span class="hs-identifier hs-var hs-var">getRdmrPtrs</span></a></span></span><span> </span><span id="local-6989586621685136673"><span class="annot"><span class="annottext">[(PlutusPurposeF era, ScriptHash (EraCrypto era))]
</span><a href="#local-6989586621685136673"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621685136672"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) any
</span><a href="#local-6989586621685136672"><span class="hs-identifier hs-var">allplutus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Set (PlutusPointerF era)
-&gt; (PlutusPurposeF era, ScriptHash (EraCrypto era))
-&gt; Set (PlutusPointerF era)
</span><a href="#local-6989586621685136671"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">[(PlutusPurposeF era, ScriptHash (EraCrypto era))]
</span><a href="#local-6989586621685136673"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621685136671"><span class="annot"><span class="annottext">accum :: Set (PlutusPointerF era)
-&gt; (PlutusPurposeF era, ScriptHash (EraCrypto era))
-&gt; Set (PlutusPointerF era)
</span><a href="#local-6989586621685136671"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136669"><span class="annot"><span class="annottext">Set (PlutusPointerF era)
</span><a href="#local-6989586621685136669"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPurposeF"><span class="hs-identifier hs-type">PlutusPurposeF</span></a></span><span> </span><span id="local-6989586621685136667"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136667"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621685136666"><span class="annot"><span class="annottext">PlutusPurpose AsIxItem era
</span><a href="#local-6989586621685136666"><span class="hs-identifier hs-var">sp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685136665"><span class="annot"><span class="annottext">ScriptHash (EraCrypto era)
</span><a href="#local-6989586621685136665"><span class="hs-identifier hs-var">hash</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash (EraCrypto era)
</span><a href="#local-6989586621685136665"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) any
</span><a href="#local-6989586621685136672"><span class="hs-identifier hs-var">allplutus</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-234"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685136663"><span class="annot"><span class="annottext">ptr :: PlutusPurpose AsIx era
</span><a href="#local-6989586621685136663"><span class="hs-identifier hs-var hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era (g :: * -&gt; * -&gt; *) (f :: * -&gt; * -&gt; *).
AlonzoEraScript era =&gt;
(forall ix it. g ix it -&gt; f ix it)
-&gt; PlutusPurpose g era -&gt; PlutusPurpose f era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">hoistPlutusPurpose</span></a></span><span> </span><span class="annot"><span class="annottext">forall ix it. AsIxItem ix it -&gt; AsIx ix it
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">toAsIx</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusPurpose AsIxItem era
</span><a href="#local-6989586621685136666"><span class="hs-identifier hs-var">sp</span></a></span><span>
</span><span id="line-235"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Proof era -&gt; PlutusPurpose AsIx era -&gt; PlutusPointerF era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPointerF"><span class="hs-identifier hs-var">PlutusPointerF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136667"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusPurpose AsIx era
</span><a href="#local-6989586621685136663"><span class="hs-identifier hs-var">ptr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (PlutusPointerF era)
</span><a href="#local-6989586621685136669"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-236"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (PlutusPointerF era)
</span><a href="#local-6989586621685136669"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span id="local-6989586621685137879"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getPlutusDataHashes"><span class="hs-identifier hs-type">getPlutusDataHashes</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">AlonzoEraTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraTxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">AlonzoEraScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-240"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-242"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DataHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137879"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-244"></span><span id="getPlutusDataHashes"><span class="annot"><span class="annottext">getPlutusDataHashes :: forall era.
(AlonzoEraTxOut era, EraTxBody era, AlonzoEraScript era) =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyF era
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; Set (DataHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getPlutusDataHashes"><span class="hs-identifier hs-var hs-var">getPlutusDataHashes</span></a></span></span><span> </span><span id="local-6989586621685136653"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136653"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136652"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136652"><span class="hs-identifier hs-var">txbodyV</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136651"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136651"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(EraTxBody era, AlonzoEraTxOut era, AlonzoEraScript era) =&gt;
UTxO era
-&gt; TxBody era
-&gt; ScriptsProvided era
-&gt; (Set (DataHash (EraCrypto era)), Set (TxIn (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">getInputDataHashesTxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136653"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136652"><span class="hs-identifier hs-var">txbodyV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Map (ScriptHash (EraCrypto era)) (Script era)
-&gt; ScriptsProvided era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ScriptsProvided</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.map</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ScriptF era -&gt; Script era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#unScriptF"><span class="hs-identifier hs-var">unScriptF</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136651"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bootWitsT"><span class="hs-identifier hs-type">bootWitsT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137866"><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Payment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-crypto-wrapper-1.5.1.3/doc/html/cardano-crypto-wrapper/src"><span class="hs-identifier hs-type">SigningKey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-254"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">BootstrapWitness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span id="bootWitsT"><span class="annot"><span class="annottext">bootWitsT :: forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyF era
-&gt; Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey)
-&gt; Set (BootstrapWitness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bootWitsT"><span class="hs-identifier hs-var hs-var">bootWitsT</span></a></span></span><span> </span><span id="local-6989586621685136628"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136628"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685136627"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136627"><span class="hs-identifier hs-var">spend</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136626"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136626"><span class="hs-identifier hs-var">txb</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136625"><span class="annot"><span class="annottext">Map
  (KeyHash 'Payment (EraCrypto era))
  (Addr (EraCrypto era), SigningKey)
</span><a href="#local-6989586621685136625"><span class="hs-identifier hs-var">byronUniv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c.
(Crypto c, DSIGN c ~ Ed25519DSIGN) =&gt;
Hash c EraIndependentTxBody
-&gt; [BootstrapAddress c]
-&gt; Map (KeyHash 'Payment c) (Addr c, SigningKey)
-&gt; Set (BootstrapWitness c)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#bootWitness"><span class="hs-identifier hs-var">bootWitness</span></a></span><span> </span><span class="annot"><span class="annottext">Hash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621685136623"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">[BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621685136622"><span class="hs-identifier hs-var">boots</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Payment (EraCrypto era))
  (Addr (EraCrypto era), SigningKey)
</span><a href="#local-6989586621685136625"><span class="hs-identifier hs-var">byronUniv</span></a></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><a href="#local-6989586621685136622"><span class="hs-identifier hs-type">boots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137866"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Not every Addr has a BootStrapAddress</span><span>
</span><span id="line-258"></span><span>    </span><span id="local-6989586621685136622"><span class="annot"><span class="annottext">boots :: [BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621685136622"><span class="hs-identifier hs-var hs-var">boots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b k. (a -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {era}.
EraTxOut era =&gt;
[BootstrapAddress (EraCrypto era)]
-&gt; TxOutF era -&gt; [BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621685136620"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136627"><span class="hs-identifier hs-var">spend</span></a></span><span> </span><span class="hs-comment">-- Compute a list of them.</span><span>
</span><span id="line-259"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-260"></span><span>        </span><span id="local-6989586621685136620"><span class="annot"><span class="annottext">accum :: [BootstrapAddress (EraCrypto era)]
-&gt; TxOutF era -&gt; [BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621685136620"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136616"><span class="annot"><span class="annottext">[BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621685136616"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136614"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136614"><span class="hs-identifier hs-var">out</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136614"><span class="hs-identifier hs-var">out</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxOut era =&gt;
Lens' (TxOut era) (Addr (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">addrTxOutL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-261"></span><span>          </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">AddrBootstrap</span></a></span><span> </span><span id="local-6989586621685136611"><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621685136611"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621685136611"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621685136616"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-262"></span><span>          </span><span class="annot"><span class="annottext">Addr (EraCrypto era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621685136616"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span id="local-6989586621685136623"><span class="annot"><span class="annottext">h :: Hash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621685136623"><span class="hs-identifier hs-var hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
Proof era
-&gt; TxBody era -&gt; Hash (EraCrypto era) EraIndependentTxBody
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-var">hashBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136628"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136626"><span class="hs-identifier hs-var">txb</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-type">hashBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137845"><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraIndependentTxBody</span></a></span><span>
</span><span id="line-266"></span><span id="hashBody"><span class="annot"><span class="annottext">hashBody :: forall era.
Proof era
-&gt; TxBody era -&gt; Hash (EraCrypto era) EraIndependentTxBody
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-var hs-var">hashBody</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Shelley"><span class="hs-identifier hs-var">Shelley</span></a></span><span> </span><span id="local-6989586621685136600"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136600"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c i. SafeHash c i -&gt; Hash (HASH c) i
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">extractHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136600"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-var">hashBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Allegra"><span class="hs-identifier hs-var">Allegra</span></a></span><span> </span><span id="local-6989586621685136589"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136589"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c i. SafeHash c i -&gt; Hash (HASH c) i
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">extractHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136589"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-var">hashBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Mary"><span class="hs-identifier hs-var">Mary</span></a></span><span> </span><span id="local-6989586621685136578"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136578"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c i. SafeHash c i -&gt; Hash (HASH c) i
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">extractHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136578"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-var">hashBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Alonzo"><span class="hs-identifier hs-var">Alonzo</span></a></span><span> </span><span id="local-6989586621685136569"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136569"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c i. SafeHash c i -&gt; Hash (HASH c) i
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">extractHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136569"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-var">hashBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span> </span><span id="local-6989586621685136560"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136560"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c i. SafeHash c i -&gt; Hash (HASH c) i
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">extractHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136560"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#hashBody"><span class="hs-identifier hs-var">hashBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Conway"><span class="hs-identifier hs-var">Conway</span></a></span><span> </span><span id="local-6989586621685136551"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136551"><span class="hs-identifier hs-var">txb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c i. SafeHash c i -&gt; Hash (HASH c) i
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">extractHash</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137845"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136551"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">-- =======================================</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-comment">-- | Get enough GenDeleg KeyHashes to satisfy the quorum constraint.</span><span>
</span><span id="line-276"></span><span id="local-6989586621685137809"><span id="local-6989586621685137810"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientGenDelegs"><span class="hs-identifier hs-type">sufficientGenDelegs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137810"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137809"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137809"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-277"></span><span id="sufficientGenDelegs"><span class="annot"><span class="annottext">sufficientGenDelegs :: forall k c. Map k (GenDelegPair c) -&gt; Set (KeyHash 'Witness c)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientGenDelegs"><span class="hs-identifier hs-var hs-var">sufficientGenDelegs</span></a></span></span><span> </span><span id="local-6989586621685136540"><span class="annot"><span class="annottext">Map k (GenDelegPair c)
</span><a href="#local-6989586621685136540"><span class="hs-identifier hs-var">gendel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-278"></span><span>  </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#quorumConstant"><span class="hs-identifier hs-var">quorumConstant</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) c.
HasKeyRole a =&gt;
a r c -&gt; a 'Witness c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">asWitness</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. GenDelegPair c -&gt; KeyHash 'GenesisDelegate c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">genDelegKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.elems</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (GenDelegPair c)
</span><a href="#local-6989586621685136540"><span class="hs-identifier hs-var">gendel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientTxCert"><span class="hs-identifier hs-type">sufficientTxCert</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137789"><span class="annot"><a href="#local-6989586621685137789"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-282"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137789"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxCertF"><span class="hs-identifier hs-type">TxCertF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137789"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-284"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Genesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137789"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137789"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137789"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span id="sufficientTxCert"><span class="annot"><span class="annottext">sufficientTxCert :: forall era.
Reflect era =&gt;
[TxCertF era]
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientTxCert"><span class="hs-identifier hs-var hs-var">sufficientTxCert</span></a></span></span><span> </span><span id="local-6989586621685136526"><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685136526"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621685136525"><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136525"><span class="hs-identifier hs-var">gendel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; TxCertWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#whichTxCert"><span class="hs-identifier hs-var">whichTxCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137789"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-287"></span><span>  </span><span class="annot"><span class="annottext">TxCertWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#TxCertShelleyToBabbage"><span class="hs-identifier hs-var">TxCertShelleyToBabbage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness StandardCrypto)
-&gt; TxCertF era -&gt; Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136512"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685136526"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>      </span><span id="local-6989586621685136512"><span class="annot"><span class="annottext">accum :: Set (KeyHash 'Witness StandardCrypto)
-&gt; TxCertF era -&gt; Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136512"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136511"><span class="annot"><span class="annottext">Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136511"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxCertF"><span class="hs-identifier hs-type">TxCertF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136509"><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621685136509"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraTxCert era, ProtVerAtMost era 8) =&gt;
TxCert era -&gt; Bool
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">isInstantaneousRewards</span></a></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><a href="#local-6989586621685136509"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-291"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136511"><span class="hs-identifier hs-var">ans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k c. Map k (GenDelegPair c) -&gt; Set (KeyHash 'Witness c)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientGenDelegs"><span class="hs-identifier hs-var">sufficientGenDelegs</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136525"><span class="hs-identifier hs-var">gendel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136511"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-293"></span><span>  </span><span class="annot"><span class="annottext">TxCertWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#TxCertConwayToConway"><span class="hs-identifier hs-var">TxCertConwayToConway</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness StandardCrypto)
-&gt; TxCertF era -&gt; Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136501"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685136526"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-295"></span><span>      </span><span id="local-6989586621685136501"><span class="annot"><span class="annottext">accum :: Set (KeyHash 'Witness StandardCrypto)
-&gt; TxCertF era -&gt; Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136501"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136500"><span class="annot"><span class="annottext">Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136500"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxCertF"><span class="hs-identifier hs-type">TxCertF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxCert era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness StandardCrypto)
</span><a href="#local-6989586621685136500"><span class="hs-identifier hs-var">ans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k c. Map k (GenDelegPair c) -&gt; Set (KeyHash 'Witness c)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientGenDelegs"><span class="hs-identifier hs-var">sufficientGenDelegs</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136525"><span class="hs-identifier hs-var">gendel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-comment">-- IS THIS RIGHT, DO WE need the  isInstantaneousRewards  TEST?</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- | Compute sufficient set of keys to make the scripts succeed.</span><span>
</span><span id="line-300"></span><span class="hs-comment">--   The script map is the map of all 'needed' scripts. Some of those</span><span>
</span><span id="line-301"></span><span class="hs-comment">--   scripts may NOT be in the 'scriptWits' (those which are reference scripts)</span><span>
</span><span id="line-302"></span><span class="hs-comment">--   but all needed scripts will need to have their KeyHashes added.</span><span>
</span><span id="line-303"></span><span id="local-6989586621685137773"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientScriptKeys"><span class="hs-identifier hs-type">sufficientScriptKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-304"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137773"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137773"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137773"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137773"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-307"></span><span id="sufficientScriptKeys"><span class="annot"><span class="annottext">sufficientScriptKeys :: forall era.
Proof era
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientScriptKeys"><span class="hs-identifier hs-var hs-var">sufficientScriptKeys</span></a></span></span><span> </span><span id="local-6989586621685136497"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136497"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685136496"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136496"><span class="hs-identifier hs-var">scriptmap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b k. (a -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
-&gt; ScriptF era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136495"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136496"><span class="hs-identifier hs-var">scriptmap</span></a></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-309"></span><span>    </span><span id="local-6989586621685136495"><span class="annot"><span class="annottext">accum :: Set (KeyHash 'Witness (EraCrypto era))
-&gt; ScriptF era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136495"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136494"><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136494"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136492"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621685136492"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136494"><span class="hs-identifier hs-var">ans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Proof era -&gt; Script era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Scripts.html#sufficientScript"><span class="hs-identifier hs-var">sufficientScript</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136497"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621685136492"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span id="local-6989586621685137770"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientKeyHashes"><span class="hs-identifier hs-type">sufficientKeyHashes</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-312"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-314"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxCertF"><span class="hs-identifier hs-type">TxCertF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-316"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Genesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-317"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137770"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-318"></span><span id="sufficientKeyHashes"><span class="annot"><span class="annottext">sufficientKeyHashes :: forall era.
Reflect era =&gt;
Proof era
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; [TxCertF era]
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientKeyHashes"><span class="hs-identifier hs-var hs-var">sufficientKeyHashes</span></a></span></span><span> </span><span id="local-6989586621685136485"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136485"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621685136484"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136484"><span class="hs-identifier hs-var">scriptmap</span></a></span></span><span> </span><span id="local-6989586621685136483"><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685136483"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621685136482"><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136482"><span class="hs-identifier hs-var">gendel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Proof era
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientScriptKeys"><span class="hs-identifier hs-var">sufficientScriptKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136485"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136484"><span class="hs-identifier hs-var">scriptmap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
[TxCertF era]
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientTxCert"><span class="hs-identifier hs-var">sufficientTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685136483"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136482"><span class="hs-identifier hs-var">gendel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-comment">-- =======================================</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span id="local-6989586621685137768"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxo"><span class="hs-identifier hs-type">pcUtxo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137768"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137768"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137768"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">String</span></a></span></span><span>
</span><span id="line-326"></span><span id="pcUtxo"><span class="annot"><span class="annottext">pcUtxo :: forall era.
Reflect era =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; TestName
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxo"><span class="hs-identifier hs-var hs-var">pcUtxo</span></a></span></span><span> </span><span id="local-6989586621685136477"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136477"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxoDoc"><span class="hs-identifier hs-var">pcUtxoDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136477"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span id="local-6989586621685137765"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxoDoc"><span class="hs-identifier hs-type">pcUtxoDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137765"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137765"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137765"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PDoc"><span class="hs-identifier hs-type">PDoc</span></a></span></span><span>
</span><span id="line-329"></span><span id="pcUtxoDoc"><span class="annot"><span class="annottext">pcUtxoDoc :: forall era.
Reflect era =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxoDoc"><span class="hs-identifier hs-var hs-var">pcUtxoDoc</span></a></span></span><span> </span><span id="local-6989586621685136470"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136470"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k v. (k -&gt; PDoc) -&gt; (v -&gt; PDoc) -&gt; Map k v -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppMap"><span class="hs-identifier hs-var">ppMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. TxIn c -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxIn"><span class="hs-identifier hs-var">pcTxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span id="local-6989586621685136469"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136469"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621685136468"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136468"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era -&gt; TxOut era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxOut"><span class="hs-identifier hs-var">pcTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136469"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136468"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136470"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#necessaryKeyHashTarget"><span class="hs-identifier hs-type">necessaryKeyHashTarget</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-332"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137759"><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-333"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-334"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-335"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-comment">-- Target era (Set (WitVKey 'Witness (EraCrypto era)))</span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137759"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span id="necessaryKeyHashTarget"><span class="annot"><span class="annottext">necessaryKeyHashTarget :: forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Target era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#necessaryKeyHashTarget"><span class="hs-identifier hs-var hs-var">necessaryKeyHashTarget</span></a></span></span><span> </span><span id="local-6989586621685136457"><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685136457"><span class="hs-identifier hs-var">txbodyparam</span></a></span></span><span> </span><span id="local-6989586621685136456"><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="#local-6989586621685136456"><span class="hs-identifier hs-var">reqSignersparam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;keywits&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
TxBodyF era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#necessaryKeyHashes"><span class="hs-identifier hs-var">necessaryKeyHashes</span></a></span><span>
</span><span id="line-340"></span><span>      </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685136457"><span class="hs-identifier hs-var">txbodyparam</span></a></span><span>
</span><span id="line-341"></span><span>      </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>      </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#genDelegs"><span class="hs-identifier hs-var">genDelegs</span></a></span><span>
</span><span id="line-343"></span><span>      </span><span class="hs-comment">--  ^$ keymapUniv</span><span>
</span><span id="line-344"></span><span>      </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="#local-6989586621685136456"><span class="hs-identifier hs-var">reqSignersparam</span></a></span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span class="hs-comment">-- | Compute the needed key witnesses from a transaction body.</span><span>
</span><span id="line-348"></span><span class="hs-comment">--   First find all the key hashes from every use of keys in the transaction</span><span>
</span><span id="line-349"></span><span class="hs-comment">--   Then find the KeyPair's associated with those hashes, then</span><span>
</span><span id="line-350"></span><span class="hs-comment">--   using the hash of the TxBody, turn the KeyPair into a witness.</span><span>
</span><span id="line-351"></span><span class="hs-comment">--   In Eras Shelley to Mary, 'reqsigners' should be empty. In Eras Alonzo to Conway</span><span>
</span><span id="line-352"></span><span class="hs-comment">--   we will need to add the witnesses for the required signer hashes, so they are</span><span>
</span><span id="line-353"></span><span class="hs-comment">--   passed in. To compute the witnsses we need the hash of the TxBody. We will call this function</span><span>
</span><span id="line-354"></span><span class="hs-comment">--   twice. Once when we have constructed the 'tempTxBody' used to estimate the fee, and a second time</span><span>
</span><span id="line-355"></span><span class="hs-comment">--   with 'txBodyTerm' where the fee is correct.</span><span>
</span><span id="line-356"></span><span class="hs-comment">--   The underlying function 'shelleyWitsVKeyNeeded' computes the necesary (but not sufficient)</span><span>
</span><span id="line-357"></span><span class="hs-comment">--   key witnesses. The missing ones have to do with MultiSig (and Timelock) scripts and Mir</span><span>
</span><span id="line-358"></span><span class="hs-comment">--   certificates (ones where 'isInstantaneousRewards' predicate is True). So we have to add these as well.</span><span>
</span><span id="line-359"></span><span class="hs-comment">--   A MultiSig (Timelock) scripts needs witnesses for enough Signature scripts to make it True.</span><span>
</span><span id="line-360"></span><span class="hs-comment">--   MIRCert needs enough witnesses from genDelegs to make the quorum constraint true.</span><span>
</span><span id="line-361"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#necessaryKeyHashes"><span class="hs-identifier hs-type">necessaryKeyHashes</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137757"><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-363"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-364"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-365"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-366"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Genesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Only in Eras Alonzo To Conway,</span><span>
</span><span id="line-368"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span id="necessaryKeyHashes"><span class="annot"><span class="annottext">necessaryKeyHashes :: forall era.
Reflect era =&gt;
TxBodyF era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#necessaryKeyHashes"><span class="hs-identifier hs-var hs-var">necessaryKeyHashes</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136441"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136441"><span class="hs-identifier hs-var">txb</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136440"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136440"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621685136439"><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136439"><span class="hs-identifier hs-var">gd</span></a></span></span><span> </span><span id="local-6989586621685136438"><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136438"><span class="hs-identifier hs-var">reqsigners</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-371"></span><span>    </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Shelley"><span class="hs-identifier hs-var">Shelley</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
CertState era
-&gt; UTxO era -&gt; TxBody era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getWitsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621685136432"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136440"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136441"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136438"><span class="hs-identifier hs-var">reqsigners</span></a></span><span>
</span><span id="line-372"></span><span>    </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Allegra"><span class="hs-identifier hs-var">Allegra</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
CertState era
-&gt; UTxO era -&gt; TxBody era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getWitsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621685136432"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136440"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136441"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136438"><span class="hs-identifier hs-var">reqsigners</span></a></span><span>
</span><span id="line-373"></span><span>    </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Mary"><span class="hs-identifier hs-var">Mary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
CertState era
-&gt; UTxO era -&gt; TxBody era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getWitsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621685136432"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136440"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136441"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136438"><span class="hs-identifier hs-var">reqsigners</span></a></span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Alonzo"><span class="hs-identifier hs-var">Alonzo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
CertState era
-&gt; UTxO era -&gt; TxBody era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getWitsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621685136432"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136440"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136441"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136438"><span class="hs-identifier hs-var">reqsigners</span></a></span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
CertState era
-&gt; UTxO era -&gt; TxBody era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getWitsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621685136432"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136440"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136441"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136438"><span class="hs-identifier hs-var">reqsigners</span></a></span><span>
</span><span id="line-376"></span><span>    </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Conway"><span class="hs-identifier hs-var">Conway</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
CertState era
-&gt; UTxO era -&gt; TxBody era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getWitsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136440"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136441"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136438"><span class="hs-identifier hs-var">reqsigners</span></a></span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><a href="#local-6989586621685136432"><span class="hs-identifier hs-type">certState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CertState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137757"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621685136432"><span class="annot"><span class="annottext">certState :: CertState era
</span><a href="#local-6989586621685136432"><span class="hs-identifier hs-var hs-var">certState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (CertState era) (DState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">certDStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (DState era) (GenDelegs (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">dsGenDelegsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. Map (KeyHash 'Genesis c) (GenDelegPair c) -&gt; GenDelegs c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">GenDelegs</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136439"><span class="hs-identifier hs-var">gd</span></a></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-comment">-- ========================================================</span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span id="local-6989586621685137738"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitnessTarget"><span class="hs-identifier hs-type">makeKeyWitnessTarget</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-384"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-385"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-386"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-387"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-388"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-389"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Payment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-crypto-wrapper-1.5.1.3/doc/html/cardano-crypto-wrapper/src"><span class="hs-identifier hs-type">SigningKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-390"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">WitVKey</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137738"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-391"></span><span id="makeKeyWitnessTarget"><span class="annot"><span class="annottext">makeKeyWitnessTarget :: forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
-&gt; Term
     era
     (Map
        (KeyHash 'Payment (EraCrypto era))
        (Addr (EraCrypto era), SigningKey))
-&gt; Target era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitnessTarget"><span class="hs-identifier hs-var hs-var">makeKeyWitnessTarget</span></a></span></span><span> </span><span id="local-6989586621685136397"><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685136397"><span class="hs-identifier hs-var">txbparam</span></a></span></span><span> </span><span id="local-6989586621685136396"><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="#local-6989586621685136396"><span class="hs-identifier hs-var">necessary</span></a></span></span><span> </span><span id="local-6989586621685136395"><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="#local-6989586621685136395"><span class="hs-identifier hs-var">sufficient</span></a></span></span><span> </span><span id="local-6989586621685136394"><span class="annot"><span class="annottext">Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="#local-6989586621685136394"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621685136393"><span class="annot"><span class="annottext">Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="#local-6989586621685136393"><span class="hs-identifier hs-var">byAdUniv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-392"></span><span>  </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;makeKeyWitness&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
TxBodyF era
-&gt; Set (KeyHash 'Witness (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
-&gt; Map
     (KeyHash 'Witness (EraCrypto era))
     (KeyPair 'Witness (EraCrypto era))
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey)
-&gt; Set (WitVKey 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitness"><span class="hs-identifier hs-var">makeKeyWitness</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685136397"><span class="hs-identifier hs-var">txbparam</span></a></span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="#local-6989586621685136396"><span class="hs-identifier hs-var">necessary</span></a></span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="#local-6989586621685136395"><span class="hs-identifier hs-var">sufficient</span></a></span><span>
</span><span id="line-396"></span><span>    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Witness (EraCrypto era))
     (KeyPair 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#keymapUniv"><span class="hs-identifier hs-var">keymapUniv</span></a></span><span>
</span><span id="line-397"></span><span>    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="#local-6989586621685136394"><span class="hs-identifier hs-var">scripts</span></a></span><span>
</span><span id="line-398"></span><span>    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#genDelegs"><span class="hs-identifier hs-var">genDelegs</span></a></span><span>
</span><span id="line-399"></span><span>    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="#local-6989586621685136393"><span class="hs-identifier hs-var">byAdUniv</span></a></span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitness"><span class="hs-identifier hs-type">makeKeyWitness</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137734"><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-403"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-404"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-405"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-406"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-407"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-408"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-409"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Genesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">GenDelegPair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Payment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-crypto-wrapper-1.5.1.3/doc/html/cardano-crypto-wrapper/src"><span class="hs-identifier hs-type">SigningKey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">WitVKey</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span id="makeKeyWitness"><span class="annot"><span class="annottext">makeKeyWitness :: forall era.
Reflect era =&gt;
TxBodyF era
-&gt; Set (KeyHash 'Witness (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
-&gt; Map
     (KeyHash 'Witness (EraCrypto era))
     (KeyPair 'Witness (EraCrypto era))
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey)
-&gt; Set (WitVKey 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitness"><span class="hs-identifier hs-var hs-var">makeKeyWitness</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span id="local-6989586621685136346"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136346"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685136345"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136345"><span class="hs-identifier hs-var">txb</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136344"><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136344"><span class="hs-identifier hs-var">necessary</span></a></span></span><span> </span><span id="local-6989586621685136343"><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136343"><span class="hs-identifier hs-var">sufficient</span></a></span></span><span> </span><span id="local-6989586621685136342"><span class="annot"><span class="annottext">Map
  (KeyHash 'Witness (EraCrypto era))
  (KeyPair 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136342"><span class="hs-identifier hs-var">keyUniv</span></a></span></span><span> </span><span id="local-6989586621685136341"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136341"><span class="hs-identifier hs-var">scripts</span></a></span></span><span> </span><span id="local-6989586621685136340"><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136340"><span class="hs-identifier hs-var">gendel</span></a></span></span><span> </span><span id="local-6989586621685136339"><span class="annot"><span class="annottext">Map
  (KeyHash 'Payment (EraCrypto era))
  (Addr (EraCrypto era), SigningKey)
</span><a href="#local-6989586621685136339"><span class="hs-identifier hs-var">byronAdUniv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness StandardCrypto)
</span><a href="#local-6989586621685136338"><span class="hs-identifier hs-var">keywits</span></a></span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-414"></span><span>    </span><span class="annot"><a href="#local-6989586621685136337"><span class="hs-identifier hs-type">bodyhash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraIndependentTxBody</span></a></span><span>
</span><span id="line-415"></span><span>    </span><span id="local-6989586621685136337"><span class="annot"><span class="annottext">bodyhash :: SafeHash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621685136337"><span class="hs-identifier hs-var hs-var">bodyhash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136345"><span class="hs-identifier hs-var">txb</span></a></span><span>
</span><span id="line-416"></span><span>    </span><span id="local-6989586621685136338"><span class="annot"><span class="annottext">keywits :: Set (WitVKey 'Witness StandardCrypto)
</span><a href="#local-6989586621685136338"><span class="hs-identifier hs-var hs-var">keywits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b -&gt; a) -&gt; a -&gt; Set b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness StandardCrypto)
-&gt; KeyHash 'Witness StandardCrypto
-&gt; Set (WitVKey 'Witness StandardCrypto)
</span><a href="#local-6989586621685136335"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136344"><span class="hs-identifier hs-var">necessary</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136343"><span class="hs-identifier hs-var">sufficient</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-418"></span><span>        </span><span id="local-6989586621685136335"><span class="annot"><span class="annottext">accum :: Set (WitVKey 'Witness StandardCrypto)
-&gt; KeyHash 'Witness StandardCrypto
-&gt; Set (WitVKey 'Witness StandardCrypto)
</span><a href="#local-6989586621685136335"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136334"><span class="annot"><span class="annottext">Set (WitVKey 'Witness StandardCrypto)
</span><a href="#local-6989586621685136334"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span id="local-6989586621685136333"><span class="annot"><span class="annottext">KeyHash 'Witness StandardCrypto
</span><a href="#local-6989586621685136333"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness StandardCrypto
</span><a href="#local-6989586621685136333"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Witness (EraCrypto era))
  (KeyPair 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136342"><span class="hs-identifier hs-var">keyUniv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-419"></span><span>          </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621685136331"><span class="annot"><span class="annottext">KeyPair 'Witness StandardCrypto
</span><a href="#local-6989586621685136331"><span class="hs-identifier hs-var">keypair</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c (kr :: KeyRole).
(Crypto c, DSignable c (Hash (HASH c) EraIndependentTxBody)) =&gt;
SafeHash c EraIndependentTxBody
-&gt; KeyPair kr c -&gt; WitVKey 'Witness c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkWitnessVKey</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621685136337"><span class="hs-identifier hs-var">bodyhash</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair 'Witness StandardCrypto
</span><a href="#local-6989586621685136331"><span class="hs-identifier hs-var">keypair</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness StandardCrypto)
</span><a href="#local-6989586621685136334"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-420"></span><span>          </span><span class="annot"><span class="annottext">Maybe (KeyPair 'Witness StandardCrypto)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) c (r' :: KeyRole).
HasKeyRole a =&gt;
a r c -&gt; a r' c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coerceKeyRole</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness StandardCrypto
</span><a href="#local-6989586621685136333"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Payment (EraCrypto era))
  (Addr (EraCrypto era), SigningKey)
</span><a href="#local-6989586621685136339"><span class="hs-identifier hs-var">byronAdUniv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-421"></span><span>            </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">AddrBootstrap</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress StandardCrypto
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SigningKey
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness StandardCrypto)
</span><a href="#local-6989586621685136334"><span class="hs-identifier hs-var">ans</span></a></span><span> </span><span class="hs-comment">-- Bootstrap witnesses are handled in bootWitsT, so we can ignore them here.</span><span>
</span><span id="line-422"></span><span>            </span><span class="annot"><span class="annottext">Maybe (Addr StandardCrypto, SigningKey)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-423"></span><span>              </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span>
</span><span id="line-424"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;hash not in keymapUniv or byronAddrUniv&quot;</span></span><span>
</span><span id="line-425"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness StandardCrypto
</span><a href="#local-6989586621685136333"><span class="hs-identifier hs-var">hash</span></a></span><span>
</span><span id="line-426"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\n member necessary = &quot;</span></span><span>
</span><span id="line-427"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.member</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness StandardCrypto
</span><a href="#local-6989586621685136333"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136344"><span class="hs-identifier hs-var">necessary</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\n member sufficient = &quot;</span></span><span>
</span><span id="line-429"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.member</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness StandardCrypto
</span><a href="#local-6989586621685136333"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621685136343"><span class="hs-identifier hs-var">sufficient</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\n scripts = &quot;</span></span><span>
</span><span id="line-431"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k v. (k -&gt; PDoc) -&gt; (v -&gt; PDoc) -&gt; Map k v -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppMap"><span class="hs-identifier hs-var">ppMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ScriptHash era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcScriptHash"><span class="hs-identifier hs-var">pcScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span id="local-6989586621685136328"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136328"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621685136327"><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621685136327"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era -&gt; Script era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcScript"><span class="hs-identifier hs-var">pcScript</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136328"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621685136327"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (ScriptF era)
</span><a href="#local-6989586621685136341"><span class="hs-identifier hs-var">scripts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\n genDelegs = &quot;</span></span><span>
</span><span id="line-433"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k v. (k -&gt; PDoc) -&gt; (v -&gt; PDoc) -&gt; Map k v -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppMap"><span class="hs-identifier hs-var">ppMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (discriminator :: KeyRole) c.
KeyHash discriminator c -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcKeyHash"><span class="hs-identifier hs-var">pcKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. GenDelegPair c -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcGenDelegPair"><span class="hs-identifier hs-var">pcGenDelegPair</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
</span><a href="#local-6989586621685136340"><span class="hs-identifier hs-var">gendel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\nbyronAddrUniv\n&quot;</span></span><span>
</span><span id="line-435"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; t -&gt; TestName
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#format"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137734"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Rep era t -&gt; Rep era b -&gt; Rep era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#MapR"><span class="hs-identifier hs-var">MapR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (KeyHash 'Payment (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#PayHashR"><span class="hs-identifier hs-var">PayHashR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t b. Rep era t -&gt; Rep era b -&gt; Rep era (t, b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#PairR"><span class="hs-identifier hs-var">PairR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (Addr (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#AddrR"><span class="hs-identifier hs-var">AddrR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era SigningKey
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SigningKeyR"><span class="hs-identifier hs-var">SigningKeyR</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Payment (EraCrypto era))
  (Addr (EraCrypto era), SigningKey)
</span><a href="#local-6989586621685136339"><span class="hs-identifier hs-var">byronAdUniv</span></a></span><span>
</span><span id="line-436"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\nTxBody =\n&quot;</span></span><span>
</span><span id="line-437"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Proof era -&gt; TxBody era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxBody"><span class="hs-identifier hs-var">pcTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136346"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685136345"><span class="hs-identifier hs-var">txb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="hs-comment">-- ===============================================</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#allValid"><span class="hs-identifier hs-type">allValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">IsValid</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">IsValid</span></a></span><span>
</span><span id="line-443"></span><span id="allValid"><span class="annot"><span class="annottext">allValid :: [IsValid] -&gt; IsValid
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#allValid"><span class="hs-identifier hs-var hs-var">allValid</span></a></span></span><span> </span><span id="local-6989586621685136319"><span class="annot"><span class="annottext">[IsValid]
</span><a href="#local-6989586621685136319"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IsValid
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">IsValid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">IsValid -&gt; Bool
</span><a href="#local-6989586621685136316"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">[IsValid]
</span><a href="#local-6989586621685136319"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-445"></span><span>    </span><span id="local-6989586621685136316"><span class="annot"><span class="annottext">valid :: IsValid -&gt; Bool
</span><a href="#local-6989586621685136316"><span class="hs-identifier hs-var hs-var">valid</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">IsValid</span></a></span><span> </span><span id="local-6989586621685136315"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621685136315"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621685136315"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span id="local-6989586621685137690"><span id="local-6989586621685137691"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#scriptWitsLangs"><span class="hs-identifier hs-type">scriptWitsLangs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137691"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137690"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Language</span></a></span></span></span><span>
</span><span id="line-448"></span><span id="scriptWitsLangs"><span class="annot"><span class="annottext">scriptWitsLangs :: forall k era. Map k (ScriptF era) -&gt; Set Language
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#scriptWitsLangs"><span class="hs-identifier hs-var hs-var">scriptWitsLangs</span></a></span></span><span> </span><span id="local-6989586621685136313"><span class="annot"><span class="annottext">Map k (ScriptF era)
</span><a href="#local-6989586621685136313"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b k. (a -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Set Language -&gt; ScriptF era -&gt; Set Language
</span><a href="#local-6989586621685136312"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (ScriptF era)
</span><a href="#local-6989586621685136313"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-449"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-450"></span><span>    </span><span id="local-6989586621685137687"><span class="annot"><a href="#local-6989586621685136312"><span class="hs-identifier hs-type">accum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Language</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137687"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Language</span></a></span></span><span>
</span><span id="line-451"></span><span>    </span><span id="local-6989586621685136312"><span class="annot"><span class="annottext">accum :: forall era. Set Language -&gt; ScriptF era -&gt; Set Language
</span><a href="#local-6989586621685136312"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136311"><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136311"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Alonzo"><span class="hs-identifier hs-var">Alonzo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">PlutusScript</span></a></span><span> </span><span id="local-6989586621685136304"><span class="annot"><span class="annottext">PlutusScript (AlonzoEra StandardCrypto)
</span><a href="#local-6989586621685136304"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraScript era =&gt; PlutusScript era -&gt; Language
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">plutusScriptLanguage</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript (AlonzoEra StandardCrypto)
</span><a href="#local-6989586621685136304"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136311"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-452"></span><span>    </span><span class="annot"><a href="#local-6989586621685136312"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span id="local-6989586621685136303"><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136303"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">PlutusScript</span></a></span><span> </span><span id="local-6989586621685136299"><span class="annot"><span class="annottext">PlutusScript (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685136299"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraScript era =&gt; PlutusScript era -&gt; Language
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">plutusScriptLanguage</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685136299"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136303"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-453"></span><span>    </span><span class="annot"><a href="#local-6989586621685136312"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span id="local-6989586621685136298"><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136298"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#ScriptF"><span class="hs-identifier hs-type">ScriptF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Conway"><span class="hs-identifier hs-var">Conway</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-type">PlutusScript</span></a></span><span> </span><span id="local-6989586621685136293"><span class="annot"><span class="annottext">PlutusScript (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685136293"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraScript era =&gt; PlutusScript era -&gt; Language
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-alonzo-1.11.0.0/doc/html/cardano-ledger-alonzo/src"><span class="hs-identifier hs-var">plutusScriptLanguage</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685136293"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136298"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><a href="#local-6989586621685136312"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span id="local-6989586621685136292"><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136292"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="annot"><span class="annottext">ScriptF era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621685136292"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-455"></span><span>
</span><span id="line-456"></span><span class="hs-comment">-- | Starting in the Babbage era, we can adjust the script witnesses by not supplying</span><span>
</span><span id="line-457"></span><span class="hs-comment">--   those that appear as a reference script in the UTxO resolved 'spending' inputs.</span><span>
</span><span id="line-458"></span><span class="hs-comment">--   {- neededHashes &#8722; dom(refScripts tx utxo) = dom(txwitscripts txw) -}</span><span>
</span><span id="line-459"></span><span class="hs-comment">--   This function computes the exact set of hashes that must appear in the witnesses.</span><span>
</span><span id="line-460"></span><span id="local-6989586621685137681"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustNeededByRefScripts"><span class="hs-identifier hs-type">adjustNeededByRefScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-461"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137681"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-462"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137681"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-467"></span><span id="adjustNeededByRefScripts"><span class="annot"><span class="annottext">adjustNeededByRefScripts :: forall era.
Proof era
-&gt; Set (TxIn (EraCrypto era))
-&gt; Set (TxIn (EraCrypto era))
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; Set (ScriptHash (EraCrypto era))
-&gt; Set (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustNeededByRefScripts"><span class="hs-identifier hs-var hs-var">adjustNeededByRefScripts</span></a></span></span><span> </span><span id="local-6989586621685136290"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136290"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685136289"><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685136289"><span class="hs-identifier hs-var">inps</span></a></span></span><span> </span><span id="local-6989586621685136288"><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685136288"><span class="hs-identifier hs-var">refinps</span></a></span></span><span> </span><span id="local-6989586621685136287"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136287"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span id="local-6989586621685136286"><span class="annot"><span class="annottext">Set (ScriptHash (EraCrypto era))
</span><a href="#local-6989586621685136286"><span class="hs-identifier hs-var">neededhashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; TxOutWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#whichTxOut"><span class="hs-identifier hs-var">whichTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136290"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-468"></span><span>  </span><span class="annot"><span class="annottext">TxOutWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#TxOutShelleyToMary"><span class="hs-identifier hs-var">TxOutShelleyToMary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set (ScriptHash (EraCrypto era))
</span><a href="#local-6989586621685136286"><span class="hs-identifier hs-var">neededhashes</span></a></span><span>
</span><span id="line-469"></span><span>  </span><span class="annot"><span class="annottext">TxOutWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#TxOutAlonzoToAlonzo"><span class="hs-identifier hs-var">TxOutAlonzoToAlonzo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set (ScriptHash (EraCrypto era))
</span><a href="#local-6989586621685136286"><span class="hs-identifier hs-var">neededhashes</span></a></span><span>
</span><span id="line-470"></span><span>  </span><span class="annot"><span class="annottext">TxOutWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#TxOutBabbageToConway"><span class="hs-identifier hs-var">TxOutBabbageToConway</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685136269"><span class="annot"><span class="annottext">spendUtxo :: UTxO era
</span><a href="#local-6989586621685136269"><span class="hs-identifier hs-var hs-var">spendUtxo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685136287"><span class="hs-identifier hs-var">ut</span></a></span><span>
</span><span id="line-472"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.difference</span></a></span><span>
</span><span id="line-473"></span><span>          </span><span class="annot"><span class="annottext">Set (ScriptHash (EraCrypto era))
</span><a href="#local-6989586621685136286"><span class="hs-identifier hs-var">neededhashes</span></a></span><span>
</span><span id="line-474"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.union</span></a></span><span>
</span><span id="line-475"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; Set k
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.keysSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
BabbageEraTxOut era =&gt;
UTxO era
-&gt; Set (TxIn (EraCrypto era))
-&gt; Map (ScriptHash (EraCrypto era)) (Script era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-babbage-1.10.0.0/doc/html/cardano-ledger-babbage/src"><span class="hs-identifier hs-var">getReferenceScripts</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621685136269"><span class="hs-identifier hs-var">spendUtxo</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685136289"><span class="hs-identifier hs-var">inps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; Set k
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.keysSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
BabbageEraTxOut era =&gt;
UTxO era
-&gt; Set (TxIn (EraCrypto era))
-&gt; Map (ScriptHash (EraCrypto era)) (Script era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-babbage-1.10.0.0/doc/html/cardano-ledger-babbage/src"><span class="hs-identifier hs-var">getReferenceScripts</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621685136269"><span class="hs-identifier hs-var">spendUtxo</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685136288"><span class="hs-identifier hs-var">refinps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span class="hs-comment">-- ==============================================================</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span id="local-6989586621685137672"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getUtxoCoinT"><span class="hs-identifier hs-type">getUtxoCoinT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-482"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137672"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-483"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137672"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137672"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-484"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137672"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137672"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137672"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-485"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137672"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-486"></span><span id="getUtxoCoinT"><span class="annot"><span class="annottext">getUtxoCoinT :: forall era.
Reflect era =&gt;
Term era (TxIn (EraCrypto era))
-&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
-&gt; Target era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getUtxoCoinT"><span class="hs-identifier hs-var hs-var">getUtxoCoinT</span></a></span></span><span> </span><span id="local-6989586621685136256"><span class="annot"><span class="annottext">Term era (TxIn (EraCrypto era))
</span><a href="#local-6989586621685136256"><span class="hs-identifier hs-var">feeinput</span></a></span></span><span> </span><span id="local-6989586621685136255"><span class="annot"><span class="annottext">Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685136255"><span class="hs-identifier hs-var">spending</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;getUtxoCoin&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall {era} {k}.
(EraTxOut era, Ord k) =&gt;
k -&gt; Map k (TxOutF era) -&gt; Coin
</span><a href="#local-6989586621685136254"><span class="hs-identifier hs-var">getUtxoCoin</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxIn (EraCrypto era))
</span><a href="#local-6989586621685136256"><span class="hs-identifier hs-var">feeinput</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685136255"><span class="hs-identifier hs-var">spending</span></a></span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-488"></span><span>    </span><span id="local-6989586621685136254"><span class="annot"><span class="annottext">getUtxoCoin :: k -&gt; Map k (TxOutF era) -&gt; Coin
</span><a href="#local-6989586621685136254"><span class="hs-identifier hs-var hs-var">getUtxoCoin</span></a></span></span><span> </span><span id="local-6989586621685136244"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685136244"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span id="local-6989586621685136243"><span class="annot"><span class="annottext">Map k (TxOutF era)
</span><a href="#local-6989586621685136243"><span class="hs-identifier hs-var">mp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685136244"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (TxOutF era)
</span><a href="#local-6989586621685136243"><span class="hs-identifier hs-var">mp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-489"></span><span>      </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136242"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136242"><span class="hs-identifier hs-var">txout</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136242"><span class="hs-identifier hs-var">txout</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, EraTxOut era) =&gt; Lens' (TxOut era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coinTxOutL</span></a></span><span>
</span><span id="line-490"></span><span>      </span><span class="annot"><span class="annottext">Maybe (TxOutF era)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;feeinput not in spending&quot;</span></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span id="local-6989586621685137666"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getNTxOut"><span class="hs-identifier hs-type">getNTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137666"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Size.html#Size"><span class="hs-identifier hs-type">Size</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137666"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137666"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137666"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-493"></span><span id="getNTxOut"><span class="annot"><span class="annottext">getNTxOut :: forall era.
(HasCallStack, Reflect era) =&gt;
Size -&gt; TxOutF era -&gt; [TxOutF era] -&gt; [TxOutF era]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getNTxOut"><span class="hs-identifier hs-var hs-var">getNTxOut</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Size.html#SzExact"><span class="hs-identifier hs-type">SzExact</span></a></span><span> </span><span id="local-6989586621685136226"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685136226"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685136225"><span class="annot"><span class="annottext">TxOutF era
</span><a href="#local-6989586621685136225"><span class="hs-identifier hs-var">feeoutput</span></a></span></span><span> </span><span id="local-6989586621685136224"><span class="annot"><span class="annottext">[TxOutF era]
</span><a href="#local-6989586621685136224"><span class="hs-identifier hs-var">outputuniv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-494"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutF era
</span><a href="#local-6989586621685136225"><span class="hs-identifier hs-var">feeoutput</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, Reflect era) =&gt; Lens' (TxOutF era) Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#outputCoinL"><span class="hs-identifier hs-var">outputCoinL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000000</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685136226"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxOutF era]
</span><a href="#local-6989586621685136224"><span class="hs-identifier hs-var">outputuniv</span></a></span><span>
</span><span id="line-495"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getNTxOut"><span class="hs-identifier hs-var">getNTxOut</span></a></span><span> </span><span id="local-6989586621685136221"><span class="annot"><span class="annottext">Size
</span><a href="#local-6989586621685136221"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxOutF era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOutF era]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-496"></span><span>  </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Non (SzExact n): &quot;</span></span><span>
</span><span id="line-498"></span><span>        </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Size
</span><a href="#local-6989586621685136221"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-499"></span><span>        </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot; in getNTxOut. Use (MetaSize size x) to get a random (SzExact n).&quot;</span></span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span class="hs-comment">-- | Compute the sum of all the Values in a List(Set,Map, ...) of TxOut</span><span>
</span><span id="line-503"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txoutSum"><span class="hs-identifier hs-type">txoutSum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137660"><span class="annot"><a href="#local-6989586621685137660"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621685137661"><span class="annot"><a href="#local-6989586621685137661"><span class="hs-identifier hs-type">t</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Foldable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137661"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137660"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137661"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137660"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137660"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-504"></span><span id="txoutSum"><span class="annot"><span class="annottext">txoutSum :: forall era (t :: * -&gt; *).
(Foldable t, Reflect era) =&gt;
t (TxOutF era) -&gt; Value era
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txoutSum"><span class="hs-identifier hs-var hs-var">txoutSum</span></a></span></span><span> </span><span id="local-6989586621685136203"><span class="annot"><span class="annottext">t (TxOutF era)
</span><a href="#local-6989586621685136203"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">F.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {era}. EraTxOut era =&gt; Value era -&gt; TxOutF era -&gt; Value era
</span><a href="#local-6989586621685136202"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">t (TxOutF era)
</span><a href="#local-6989586621685136203"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-506"></span><span>    </span><span id="local-6989586621685136202"><span class="annot"><span class="annottext">accum :: Value era -&gt; TxOutF era -&gt; Value era
</span><a href="#local-6989586621685136202"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685136196"><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621685136196"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685136195"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136195"><span class="hs-identifier hs-var">txout</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621685136195"><span class="hs-identifier hs-var">txout</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxOut era =&gt; Lens' (TxOut era) (Value era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">valueTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621685136196"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#minusMultiValue"><span class="hs-identifier hs-type">minusMultiValue</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-509"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137650"><span class="annot"><a href="#local-6989586621685137650"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-510"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137650"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-511"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137650"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-512"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137650"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-513"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137650"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-514"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137650"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier hs-type">AssetName</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span id="minusMultiValue"><span class="annot"><span class="annottext">minusMultiValue :: forall era.
Reflect era =&gt;
Proof era
-&gt; Value era
-&gt; Value era
-&gt; Map (ScriptHash (EraCrypto era)) (Map AssetName Integer)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#minusMultiValue"><span class="hs-identifier hs-var hs-var">minusMultiValue</span></a></span></span><span> </span><span id="local-6989586621685136184"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136184"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621685136183"><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621685136183"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span id="local-6989586621685136182"><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621685136182"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; ValueWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#whichValue"><span class="hs-identifier hs-var">whichValue</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685136184"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-516"></span><span>  </span><span class="annot"><span class="annottext">ValueWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#ValueMaryToConway"><span class="hs-identifier hs-var">ValueMaryToConway</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621685136183"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621685136182"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier hs-type">MaryValue</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier hs-type">MultiAsset</span></a></span><span> </span><span id="local-6989586621685136170"><span class="annot"><span class="annottext">Map (PolicyID StandardCrypto) (Map AssetName Integer)
</span><a href="#local-6989586621685136170"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall k2 k1 a. Ord k2 =&gt; (k1 -&gt; k2) -&gt; Map k1 a -&gt; Map k2 a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.mapKeys</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-mary-1.7.0.1/doc/html/cardano-ledger-mary/src"><span class="hs-identifier hs-type">PolicyID</span></a></span><span> </span><span id="local-6989586621685136167"><span class="annot"><span class="annottext">ScriptHash StandardCrypto
</span><a href="#local-6989586621685136167"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScriptHash StandardCrypto
</span><a href="#local-6989586621685136167"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (PolicyID StandardCrypto) (Map AssetName Integer)
</span><a href="#local-6989586621685136170"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="annot"><span class="annottext">ValueWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#ValueShelleyToAllegra"><span class="hs-identifier hs-var">ValueShelleyToAllegra</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-518"></span><span>
</span><span id="line-519"></span><span class="hs-comment">-- ==============================================================</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- Using constraints to generate a TxBody</span><span>
</span><span id="line-521"></span><span class="hs-comment">-- ==============================================================</span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyPreds"><span class="hs-identifier hs-type">txBodyPreds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137638"><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#UnivSize"><span class="hs-identifier hs-type">UnivSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Pred"><span class="hs-identifier hs-type">Pred</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-524"></span><span id="txBodyPreds"><span class="annot"><span class="annottext">txBodyPreds :: forall era.
(HasCallStack, Reflect era) =&gt;
UnivSize -&gt; Proof era -&gt; [Pred era]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyPreds"><span class="hs-identifier hs-var hs-var">txBodyPreds</span></a></span></span><span> </span><span id="local-6989586621685135953"><span class="annot"><span class="annottext">sizes :: UnivSize
</span><a href="#local-6989586621685135953"><span class="hs-identifier hs-var">sizes</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#UnivSize"><span class="hs-identifier hs-type">UnivSize</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621685135922"><span id="local-6989586621685135923"><span id="local-6989586621685135924"><span id="local-6989586621685135925"><span id="local-6989586621685135926"><span id="local-6989586621685135927"><span id="local-6989586621685135928"><span id="local-6989586621685135929"><span id="local-6989586621685135930"><span id="local-6989586621685135931"><span id="local-6989586621685135932"><span id="local-6989586621685135933"><span id="local-6989586621685135934"><span id="local-6989586621685135935"><span id="local-6989586621685135936"><span id="local-6989586621685135937"><span id="local-6989586621685135938"><span id="local-6989586621685135939"><span id="local-6989586621685135940"><span id="local-6989586621685135941"><span id="local-6989586621685135942"><span id="local-6989586621685135943"><span id="local-6989586621685135944"><span id="local-6989586621685135945"><span id="local-6989586621685135946"><span id="local-6989586621685135947"><span id="local-6989586621685135948"><span id="local-6989586621685135949"><span id="local-6989586621685135950"><span id="local-6989586621685135951"><span class="annot"><span class="annottext">Bool
Int
usCredScriptFreq :: UnivSize -&gt; Int
usSpendScriptFreq :: UnivSize -&gt; Int
usAllowReRegisterPool :: UnivSize -&gt; Bool
usUnRegKeyFreq :: UnivSize -&gt; Int
usRegKeyFreq :: UnivSize -&gt; Int
usMaxCollaterals :: UnivSize -&gt; Int
usMinCollaterals :: UnivSize -&gt; Int
usMaxInputs :: UnivSize -&gt; Int
usMinInputs :: UnivSize -&gt; Int
usGenerateWithdrawals :: UnivSize -&gt; Bool
usDatumFreq :: UnivSize -&gt; Int
usMaxCerts :: UnivSize -&gt; Int
usMinCerts :: UnivSize -&gt; Int
usNumDReps :: UnivSize -&gt; Int
usNumColUtxo :: UnivSize -&gt; Int
usNumPreUtxo :: UnivSize -&gt; Int
usNumTxIn :: UnivSize -&gt; Int
usNumDatums :: UnivSize -&gt; Int
usNumCredentials :: UnivSize -&gt; Int
usNumVoteKeys :: UnivSize -&gt; Int
usNumGenesisKeys :: UnivSize -&gt; Int
usNumStakeKeys :: UnivSize -&gt; Int
usNumPools :: UnivSize -&gt; Int
usNumKeys :: UnivSize -&gt; Int
usNumAddr :: UnivSize -&gt; Int
usNumPtr :: UnivSize -&gt; Int
usNumMultiAsset :: UnivSize -&gt; Int
usMaxPolicyID :: UnivSize -&gt; Int
usMaxAssets :: UnivSize -&gt; Int
usNumTxOuts :: UnivSize -&gt; Int
usCredScriptFreq :: Int
usSpendScriptFreq :: Int
usAllowReRegisterPool :: Bool
usUnRegKeyFreq :: Int
usRegKeyFreq :: Int
usMaxCollaterals :: Int
usMinCollaterals :: Int
usMaxInputs :: Int
usMinInputs :: Int
usGenerateWithdrawals :: Bool
usDatumFreq :: Int
usMaxCerts :: Int
usMinCerts :: Int
usNumDReps :: Int
usNumColUtxo :: Int
usNumPreUtxo :: Int
usNumTxIn :: Int
usNumDatums :: Int
usNumCredentials :: Int
usNumVoteKeys :: Int
usNumGenesisKeys :: Int
usNumStakeKeys :: Int
usNumPools :: Int
usNumKeys :: Int
usNumAddr :: Int
usNumPtr :: Int
usNumMultiAsset :: Int
usMaxPolicyID :: Int
usMaxAssets :: Int
usNumTxOuts :: Int
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#usCredScriptFreq"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621685135891"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-525"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize
-&gt; Proof era
-&gt; Term era Coin
-&gt; Term era [TxOutF era]
-&gt; [Pred era]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.TxOut.html#txOutPreds"><span class="hs-identifier hs-var">txOutPreds</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135953"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135890"><span class="hs-identifier hs-var">balanceCoin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Term era [TxOutF era]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#outputs"><span class="hs-identifier hs-var">outputs</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-526"></span><span>    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (Map AssetName Integer))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#mint"><span class="hs-identifier hs-var">mint</span></a></span><span>
</span><span id="line-527"></span><span>          </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;sumAssets&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135886"><span class="annot"><span class="annottext">[TxOutF era]
</span><a href="#local-6989586621685135886"><span class="hs-identifier hs-var">out</span></a></span></span><span> </span><span id="local-6989586621685135885"><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135885"><span class="hs-identifier hs-var">spend</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Value era
-&gt; Value era
-&gt; Map (ScriptHash (EraCrypto era)) (Map AssetName Integer)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#minusMultiValue"><span class="hs-identifier hs-var">minusMultiValue</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era (t :: * -&gt; *).
(Foldable t, Reflect era) =&gt;
t (TxOutF era) -&gt; Value era
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txoutSum"><span class="hs-identifier hs-var">txoutSum</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOutF era]
</span><a href="#local-6989586621685135886"><span class="hs-identifier hs-var">out</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era (t :: * -&gt; *).
(Foldable t, Reflect era) =&gt;
t (TxOutF era) -&gt; Value era
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txoutSum"><span class="hs-identifier hs-var">txoutSum</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135885"><span class="hs-identifier hs-var">spend</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>                  </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Term era [TxOutF era]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#outputs"><span class="hs-identifier hs-var">outputs</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>                  </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var">spending</span></a></span><span>
</span><span id="line-530"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Maybe Network)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#networkID"><span class="hs-identifier hs-var">networkID</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Target era (Maybe t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#justTarget"><span class="hs-identifier hs-var">justTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Network
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#network"><span class="hs-identifier hs-var">network</span></a></span><span>
</span><span id="line-532"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- inputs</span><span>
</span><span id="line-533"></span><span>         </span><span class="annot"><span class="annottext">forall t era. Sizeable t =&gt; Term era Size -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Sized"><span class="hs-identifier hs-var">Sized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Int -&gt; Int -&gt; Term era Size
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Range"><span class="hs-identifier hs-var">Range</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135930"><span class="hs-identifier hs-var">usMinInputs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135929"><span class="hs-identifier hs-var">usMaxInputs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-534"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Direct (Term era t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Member"><span class="hs-identifier hs-var">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#feeTxIn"><span class="hs-identifier hs-var">feeTxIn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-535"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Subset"><span class="hs-identifier hs-var">Subset</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b. Ord t =&gt; Term era (Map t b) -&gt; Term era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Dom"><span class="hs-identifier hs-var">Dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- collateral</span><span>
</span><span id="line-537"></span><span>         </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Disjoint"><span class="hs-identifier hs-var">Disjoint</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateral"><span class="hs-identifier hs-var">collateral</span></a></span><span>
</span><span id="line-538"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era. Sizeable t =&gt; Term era Size -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Sized"><span class="hs-identifier hs-var">Sized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Int -&gt; Int -&gt; Term era Size
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Range"><span class="hs-identifier hs-var">Range</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135928"><span class="hs-identifier hs-var">usMinCollaterals</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135927"><span class="hs-identifier hs-var">usMaxCollaterals</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateral"><span class="hs-identifier hs-var">collateral</span></a></span><span>
</span><span id="line-539"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Subset"><span class="hs-identifier hs-var">Subset</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateral"><span class="hs-identifier hs-var">collateral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b. Ord t =&gt; Term era (Map t b) -&gt; Term era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Dom"><span class="hs-identifier hs-var">Dom</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135871"><span class="hs-identifier hs-var">colUtxo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">--       , Member (Left colInput) collateral</span><span>
</span><span id="line-541"></span><span>         </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135870"><span class="hs-identifier hs-var">colRestriction</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateral"><span class="hs-identifier hs-var">collateral</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135871"><span class="hs-identifier hs-var">colUtxo</span></a></span><span>
</span><span id="line-542"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t.
(Era era, Adds t) =&gt;
Direct t -&gt; Term era t -&gt; OrdCond -&gt; [Sum era t] -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#SumsTo"><span class="hs-identifier hs-var">SumsTo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#sumCol"><span class="hs-identifier hs-var">sumCol</span></a></span><span> </span><span class="annot"><span class="annottext">OrdCond
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#EQL"><span class="hs-identifier hs-var">EQL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall t c b era.
Adds c =&gt;
Rep era c -&gt; Lens' t c -&gt; Term era (Map b t) -&gt; Sum era c
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ProjMap"><span class="hs-identifier hs-var">ProjMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, Reflect era) =&gt; Lens' (TxOutF era) Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#outputCoinL"><span class="hs-identifier hs-var">outputCoinL</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135870"><span class="hs-identifier hs-var">colRestriction</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-543"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135857"><span class="hs-identifier hs-var">tempTotalCol</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#sumCol"><span class="hs-identifier hs-var">sumCol</span></a></span><span>
</span><span id="line-544"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- withdrawals</span><span>
</span><span id="line-545"></span><span>         </span><span class="annot"><span class="annottext">forall t era. Sizeable t =&gt; Term era Size -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Sized"><span class="hs-identifier hs-var">Sized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Int -&gt; Int -&gt; Term era Size
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Range"><span class="hs-identifier hs-var">Range</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term era (Set (Credential 'Staking StandardCrypto))
</span><a href="#local-6989586621685135856"><span class="hs-identifier hs-var">prewithdrawal</span></a></span><span>
</span><span id="line-546"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Subset"><span class="hs-identifier hs-var">Subset</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (Credential 'Staking StandardCrypto))
</span><a href="#local-6989586621685135856"><span class="hs-identifier hs-var">prewithdrawal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b. Ord t =&gt; Term era (Map t b) -&gt; Term era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Dom"><span class="hs-identifier hs-var">Dom</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (Credential 'Staking (EraCrypto era)) Coin)
</span><a href="#local-6989586621685135855"><span class="hs-identifier hs-var">nonZeroRewards</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621685135931"><span class="hs-identifier hs-var">usGenerateWithdrawals</span></a></span><span>
</span><span id="line-548"></span><span>          </span><span class="hs-keyword">then</span><span>
</span><span id="line-549"></span><span>            </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (RewardAccount (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#withdrawals"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-550"></span><span>              </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span>
</span><span id="line-551"></span><span>                      </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;mkRwrdAcnt&quot;</span></span><span>
</span><span id="line-552"></span><span>                      </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621685135853"><span class="annot"><span class="annottext">Set (Credential 'Staking StandardCrypto)
</span><a href="#local-6989586621685135853"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621685135852"><span class="annot"><span class="annottext">Map (Credential 'Staking StandardCrypto) Coin
</span><a href="#local-6989586621685135852"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-553"></span><span>                          </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span>
</span><span id="line-554"></span><span>                            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span>
</span><span id="line-555"></span><span>                                </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135850"><span class="annot"><span class="annottext">Credential 'Staking StandardCrypto
</span><a href="#local-6989586621685135850"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. Network -&gt; Credential 'Staking c -&gt; RewardAccount c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">RewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Testnet</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking StandardCrypto
</span><a href="#local-6989586621685135850"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking StandardCrypto) Coin
</span><a href="#local-6989586621685135852"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">Map.!</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking StandardCrypto
</span><a href="#local-6989586621685135850"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Credential 'Staking StandardCrypto)
</span><a href="#local-6989586621685135853"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>                            </span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>                      </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (Credential 'Staking StandardCrypto))
</span><a href="#local-6989586621685135856"><span class="hs-identifier hs-var">prewithdrawal</span></a></span><span>
</span><span id="line-560"></span><span>                      </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (Credential 'Staking (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#rewards"><span class="hs-identifier hs-var">rewards</span></a></span><span>
</span><span id="line-561"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall t era. Sizeable t =&gt; Term era Size -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Sized"><span class="hs-identifier hs-var">Sized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Int -&gt; Term era Size
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ExactSize"><span class="hs-identifier hs-var">ExactSize</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (RewardAccount (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#withdrawals"><span class="hs-identifier hs-var">withdrawals</span></a></span><span>
</span><span id="line-563"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Map (Credential 'Staking (EraCrypto era)) Coin)
</span><a href="#local-6989586621685135855"><span class="hs-identifier hs-var">nonZeroRewards</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;filter (/=0)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (Credential 'Staking (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#rewards"><span class="hs-identifier hs-var">rewards</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- refInputs</span><span>
</span><span id="line-565"></span><span>         </span><span class="annot"><span class="annottext">forall t era. Sizeable t =&gt; Term era Size -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Sized"><span class="hs-identifier hs-var">Sized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Int -&gt; Int -&gt; Term era Size
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Range"><span class="hs-identifier hs-var">Range</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#refInputs"><span class="hs-identifier hs-var">refInputs</span></a></span><span>
</span><span id="line-566"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Subset"><span class="hs-identifier hs-var">Subset</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#refInputs"><span class="hs-identifier hs-var">refInputs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b. Ord t =&gt; Term era (Map t b) -&gt; Term era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Dom"><span class="hs-identifier hs-var">Dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Term era t -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#NotMember"><span class="hs-identifier hs-var">NotMember</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#feeTxIn"><span class="hs-identifier hs-var">feeTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#refInputs"><span class="hs-identifier hs-var">refInputs</span></a></span><span>
</span><span id="line-568"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Disjoint"><span class="hs-identifier hs-var">Disjoint</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#refInputs"><span class="hs-identifier hs-var">refInputs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="hs-comment">-- New constraint in Conway, added PR #4024</span><span>
</span><span id="line-569"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era. Sizeable t =&gt; Term era Size -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Sized"><span class="hs-identifier hs-var">Sized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Int -&gt; Int -&gt; Term era Size
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Range"><span class="hs-identifier hs-var">Range</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#reqSignerHashes"><span class="hs-identifier hs-var">reqSignerHashes</span></a></span><span>
</span><span id="line-570"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Subset"><span class="hs-identifier hs-var">Subset</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#reqSignerHashes"><span class="hs-identifier hs-var">reqSignerHashes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b. Ord t =&gt; Term era (Map t b) -&gt; Term era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Dom"><span class="hs-identifier hs-var">Dom</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Witness (EraCrypto era))
     (KeyPair 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#keymapUniv"><span class="hs-identifier hs-var">keymapUniv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era SlotNo
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#ttl"><span class="hs-identifier hs-var">ttl</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;(+5)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135838"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621685135838"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621685135838"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">5</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era SlotNo
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#currentSlot"><span class="hs-identifier hs-var">currentSlot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var">spending</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t.
(Era era, Adds t) =&gt;
Direct t -&gt; Term era t -&gt; OrdCond -&gt; [Sum era t] -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#SumsTo"><span class="hs-identifier hs-var">SumsTo</span></a></span><span>
</span><span id="line-574"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>          </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135890"><span class="hs-identifier hs-var">balanceCoin</span></a></span><span>
</span><span id="line-576"></span><span>          </span><span class="annot"><span class="annottext">OrdCond
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#EQL"><span class="hs-identifier hs-var">EQL</span></a></span><span>
</span><span id="line-577"></span><span>          </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall t c b era.
Adds c =&gt;
Rep era c -&gt; Lens' t c -&gt; Term era (Map b t) -&gt; Sum era c
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ProjMap"><span class="hs-identifier hs-var">ProjMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, Reflect era) =&gt; Lens' (TxOutF era) Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#outputCoinL"><span class="hs-identifier hs-var">outputCoinL</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var">spending</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall c era t. Adds c =&gt; Term era (Map t c) -&gt; Sum era c
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#SumMap"><span class="hs-identifier hs-var">SumMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (RewardAccount (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#withdrawals"><span class="hs-identifier hs-var">withdrawals</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era c. Term era c -&gt; Sum era c
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#One"><span class="hs-identifier hs-var">One</span></a></span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135828"><span class="hs-identifier hs-var">txrefunds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era c. Term era c -&gt; Sum era c
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#One"><span class="hs-identifier hs-var">One</span></a></span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135827"><span class="hs-identifier hs-var">txdeposits</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-578"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135828"><span class="hs-identifier hs-var">txrefunds</span></a></span><span>
</span><span id="line-579"></span><span>          </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;certsRefunds&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall {era}.
EraTxCert era =&gt;
PParamsF era
-&gt; Map (Credential 'Staking (EraCrypto era)) Coin
-&gt; Map (Credential 'DRepRole (EraCrypto era)) Coin
-&gt; [TxCertF era]
-&gt; Coin
</span><a href="#local-6989586621685135826"><span class="hs-identifier hs-var">certsRefunds</span></a></span><span>
</span><span id="line-580"></span><span>                  </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Proof era -&gt; Term era (PParamsF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#pparams"><span class="hs-identifier hs-var">pparams</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-581"></span><span>                  </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (Credential 'Staking (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#stakeDeposits"><span class="hs-identifier hs-var">stakeDeposits</span></a></span><span>
</span><span id="line-582"></span><span>                  </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (Credential 'DRepRole (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#drepDepositsView"><span class="hs-identifier hs-var">drepDepositsView</span></a></span><span>
</span><span id="line-583"></span><span>                  </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era [TxCertF era]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#certs"><span class="hs-identifier hs-var">certs</span></a></span><span>
</span><span id="line-584"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135827"><span class="hs-identifier hs-var">txdeposits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;certsDeposits&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall {era} {a}.
EraTxCert era =&gt;
PParamsF era
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) a
-&gt; [TxCertF era]
-&gt; Coin
</span><a href="#local-6989586621685135821"><span class="hs-identifier hs-var">certsDeposits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Proof era -&gt; Term era (PParamsF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#pparams"><span class="hs-identifier hs-var">pparams</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#regPools"><span class="hs-identifier hs-var">regPools</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era [TxCertF era]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#certs"><span class="hs-identifier hs-var">certs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (ScriptsNeededF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptsNeeded"><span class="hs-identifier hs-var">scriptsNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
Proof era
-&gt; Target
     era
     (TxBodyF era
      -&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; ScriptsNeededF era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#needT"><span class="hs-identifier hs-var">needT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era IsValid
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txisvalid"><span class="hs-identifier hs-var">txisvalid</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;allValid&quot;</span></span><span> </span><span class="annot"><span class="annottext">[IsValid] -&gt; IsValid
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#allValid"><span class="hs-identifier hs-var">allValid</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era [IsValid]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#valids"><span class="hs-identifier hs-var">valids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era b.
(Era era, Typeable t) =&gt;
Term era (Maybe b) -&gt; RootTarget era t b -&gt; [Pred era] -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Maybe"><span class="hs-identifier hs-var">Maybe</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (Maybe (TxAuxDataF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txauxdata"><span class="hs-identifier hs-var">txauxdata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; RootTarget era Void t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Simple"><span class="hs-identifier hs-var">Simple</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxAuxDataF era)
</span><a href="#local-6989586621685135812"><span class="hs-identifier hs-var">oneAuxdata</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxAuxDataF era)
</span><a href="#local-6989586621685135812"><span class="hs-identifier hs-var">oneAuxdata</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-589"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Maybe (AuxiliaryDataHash (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#adHash"><span class="hs-identifier hs-var">adHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;hashMaybe&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
TxAuxDataF era -&gt; AuxiliaryDataHash (EraCrypto era)
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#hashTxAuxDataF"><span class="hs-identifier hs-var">hashTxAuxDataF</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (Maybe (TxAuxDataF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txauxdata"><span class="hs-identifier hs-var">txauxdata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Construct a temporary 'Tx' with a size close to the size of the Tx we want.</span><span>
</span><span id="line-591"></span><span>         </span><span class="hs-comment">-- We will use this to compute the 'txfee' using a fix-point approach.</span><span>
</span><span id="line-592"></span><span>         </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (SafeHash StandardCrypto EraIndependentScriptIntegrity)
</span><a href="#local-6989586621685135808"><span class="hs-identifier hs-var">randomWppHash</span></a></span><span>
</span><span id="line-593"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
  era (Maybe (SafeHash StandardCrypto EraIndependentScriptIntegrity))
</span><a href="#local-6989586621685135807"><span class="hs-identifier hs-var">tempWppHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Target era (Maybe t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#justTarget"><span class="hs-identifier hs-var">justTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (SafeHash StandardCrypto EraIndependentScriptIntegrity)
</span><a href="#local-6989586621685135808"><span class="hs-identifier hs-var">randomWppHash</span></a></span><span>
</span><span id="line-594"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135806"><span class="hs-identifier hs-var">tempTxFee</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. t -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#constTarget"><span class="hs-identifier hs-var">constTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bounded a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span>
</span><span id="line-596"></span><span>          </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era Coin
-&gt; Term era (Maybe (ScriptIntegrityHash (EraCrypto era)))
-&gt; Term era Coin
-&gt; Target era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyTarget"><span class="hs-identifier hs-var">txbodyTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Term era Coin
</span><a href="#local-6989586621685135806"><span class="hs-identifier hs-var">tempTxFee</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  era (Maybe (SafeHash StandardCrypto EraIndependentScriptIntegrity))
</span><a href="#local-6989586621685135807"><span class="hs-identifier hs-var">tempWppHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Bounded a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (TxF era)
</span><a href="#local-6989586621685135801"><span class="hs-identifier hs-var">tempTx</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (BootstrapWitness (EraCrypto era)))
-&gt; Term era (Set (WitVKey 'Witness (EraCrypto era)))
-&gt; Target era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txTarget"><span class="hs-identifier hs-var">txTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (BootstrapWitness StandardCrypto))
</span><a href="#local-6989586621685135799"><span class="hs-identifier hs-var">tempBootWits</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (WitVKey 'Witness StandardCrypto))
</span><a href="#local-6989586621685135798"><span class="hs-identifier hs-var">tempKeyWits</span></a></span><span>
</span><span id="line-598"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Compute the real fee, and then recompute the TxBody and the Tx</span><span>
</span><span id="line-599"></span><span>         </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txfee"><span class="hs-identifier hs-var">txfee</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;finalFee&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
PParamsF era
-&gt; TxF era -&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; Coin
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#computeFinalFee"><span class="hs-identifier hs-var">computeFinalFee</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Proof era -&gt; Term era (PParamsF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#pparams"><span class="hs-identifier hs-var">pparams</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxF era)
</span><a href="#local-6989586621685135801"><span class="hs-identifier hs-var">tempTx</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-comment">--  , txbodyterm :&lt;-: txbodyTarget txfee wppHash totalCol</span><span>
</span><span id="line-601"></span><span>         </span><span class="hs-comment">--  , txterm :&lt;-: txTarget txbodyterm bootWits keyWits</span><span>
</span><span id="line-602"></span><span>         </span><span class="annot"><span class="annottext">forall t b t era.
Ord t =&gt;
Lens' b t -&gt; Rep era t -&gt; Term era (Map t b) -&gt; Term era (Map t t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ProjM"><span class="hs-identifier hs-var">ProjM</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. Lens' (DRepState c) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">drepDepositL</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#currentDRepState"><span class="hs-identifier hs-var">currentDRepState</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (Credential 'DRepRole (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#drepDepositsView"><span class="hs-identifier hs-var">drepDepositsView</span></a></span><span>
</span><span id="line-603"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-604"></span><span>    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; UTxOWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#whichUTxO"><span class="hs-identifier hs-var">whichUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-605"></span><span>      </span><span class="annot"><span class="annottext">UTxOWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#UTxOShelleyToMary"><span class="hs-identifier hs-var">UTxOShelleyToMary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-606"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- The following have no effect in ShelleyToMary, but they need to be defined. So we make them random</span><span>
</span><span id="line-607"></span><span>          </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (PlutusPointerF era) (Data era, ExUnits))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#redeemers"><span class="hs-identifier hs-var">redeemers</span></a></span><span>
</span><span id="line-608"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (DataHash (EraCrypto era)) (Data era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#dataWits"><span class="hs-identifier hs-var">dataWits</span></a></span><span>
</span><span id="line-609"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Term era (TxOutF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateralReturn"><span class="hs-identifier hs-var">collateralReturn</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#extraCol"><span class="hs-identifier hs-var">extraCol</span></a></span><span>
</span><span id="line-611"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#totalCol"><span class="hs-identifier hs-var">totalCol</span></a></span><span>
</span><span id="line-612"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Random"><span class="hs-identifier hs-var">Random</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Maybe (SafeHash (EraCrypto era) EraIndependentScriptIntegrity))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#wppHash"><span class="hs-identifier hs-var">wppHash</span></a></span><span>
</span><span id="line-613"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t t era. Lens' t t -&gt; Rep era t -&gt; Term era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(ScriptsNeeded era ~ ShelleyScriptsNeeded era) =&gt;
Lens' (ScriptsNeededF era) (Set (ScriptHash (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#smNeededL"><span class="hs-identifier hs-var">smNeededL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptHashR"><span class="hs-identifier hs-var">ScriptHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (ScriptsNeededF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptsNeeded"><span class="hs-identifier hs-var">scriptsNeeded</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#allScriptUniv"><span class="hs-identifier hs-var">allScriptUniv</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span>
</span><span id="line-614"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t b era. (Ord t, Eq b) =&gt; Term era (Map t b) -&gt; Term era [b]
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Elems"><span class="hs-identifier hs-var">Elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b t era.
Ord t =&gt;
Lens' b t -&gt; Rep era t -&gt; Term era (Map t b) -&gt; Term era (Map t t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ProjM"><span class="hs-identifier hs-var">ProjM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. Lens' (a, b) a
</span><a href="Test.Cardano.Ledger.Constrained.Lenses.html#fstL"><span class="hs-identifier hs-var">fstL</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era IsValid
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#IsValidR"><span class="hs-identifier hs-var">IsValidR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b. Ord t =&gt; Term era (Map t b) -&gt; Term era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Dom"><span class="hs-identifier hs-var">Dom</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (IsValid, ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#plutusUniv"><span class="hs-identifier hs-var">plutusUniv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era [IsValid]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#valids"><span class="hs-identifier hs-var">valids</span></a></span><span>
</span><span id="line-615"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (BootstrapWitness StandardCrypto))
</span><a href="#local-6989586621685135799"><span class="hs-identifier hs-var">tempBootWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;boots&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyF era
-&gt; Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey)
-&gt; Set (BootstrapWitness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bootWitsT"><span class="hs-identifier hs-var">bootWitsT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var">spending</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-616"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135707"><span class="hs-identifier hs-var">necessaryHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Target era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#necessaryKeyHashTarget"><span class="hs-identifier hs-var">necessaryKeyHashTarget</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#WitHashR"><span class="hs-identifier hs-var">WitHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135705"><span class="hs-identifier hs-var">sufficientHashes</span></a></span><span>
</span><span id="line-618"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;sufficient&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; [TxCertF era]
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientKeyHashes"><span class="hs-identifier hs-var">sufficientKeyHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era [TxCertF era]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#certs"><span class="hs-identifier hs-var">certs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#genDelegs"><span class="hs-identifier hs-var">genDelegs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (WitVKey 'Witness StandardCrypto))
</span><a href="#local-6989586621685135798"><span class="hs-identifier hs-var">tempKeyWits</span></a></span><span>
</span><span id="line-620"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
-&gt; Term
     era
     (Map
        (KeyHash 'Payment (EraCrypto era))
        (Addr (EraCrypto era), SigningKey))
-&gt; Target era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitnessTarget"><span class="hs-identifier hs-var">makeKeyWitnessTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135707"><span class="hs-identifier hs-var">necessaryHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135705"><span class="hs-identifier hs-var">sufficientHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span>
</span><span id="line-621"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (BootstrapWitness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#bootWits"><span class="hs-identifier hs-var">bootWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;boots&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyF era
-&gt; Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey)
-&gt; Set (BootstrapWitness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bootWitsT"><span class="hs-identifier hs-var">bootWitsT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var">spending</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-622"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#keyWits"><span class="hs-identifier hs-var">keyWits</span></a></span><span>
</span><span id="line-623"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
-&gt; Term
     era
     (Map
        (KeyHash 'Payment (EraCrypto era))
        (Addr (EraCrypto era), SigningKey))
-&gt; Target era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitnessTarget"><span class="hs-identifier hs-var">makeKeyWitnessTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135707"><span class="hs-identifier hs-var">necessaryHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135705"><span class="hs-identifier hs-var">sufficientHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span>
</span><span id="line-624"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era Coin
-&gt; Term era (Maybe (ScriptIntegrityHash (EraCrypto era)))
-&gt; Term era Coin
-&gt; Target era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyTarget"><span class="hs-identifier hs-var">txbodyTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txfee"><span class="hs-identifier hs-var">txfee</span></a></span><span> </span><span class="annot"><span class="annottext">Term
  era (Maybe (SafeHash StandardCrypto EraIndependentScriptIntegrity))
</span><a href="#local-6989586621685135807"><span class="hs-identifier hs-var">tempWppHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- The WppHash and totalCol play no role in ShelleyToMary</span><span>
</span><span id="line-625"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txterm"><span class="hs-identifier hs-var">txterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (BootstrapWitness (EraCrypto era)))
-&gt; Term era (Set (WitVKey 'Witness (EraCrypto era)))
-&gt; Target era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txTarget"><span class="hs-identifier hs-var">txTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (BootstrapWitness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#bootWits"><span class="hs-identifier hs-var">bootWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#keyWits"><span class="hs-identifier hs-var">keyWits</span></a></span><span>
</span><span id="line-626"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-627"></span><span>      </span><span class="annot"><span class="annottext">UTxOWit era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#UTxOAlonzoToConway"><span class="hs-identifier hs-var">UTxOAlonzoToConway</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-628"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall t era. Sizeable t =&gt; Term era Size -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Sized"><span class="hs-identifier hs-var">Sized</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Int -&gt; Term era Size
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ExactSize"><span class="hs-identifier hs-var">ExactSize</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txDonation"><span class="hs-identifier hs-var">txDonation</span></a></span><span>
</span><span id="line-629"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t t era. Lens' t t -&gt; Rep era t -&gt; Term era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(ScriptsNeeded era ~ AlonzoScriptsNeeded era) =&gt;
Lens'
  (ScriptsNeededF era)
  [(PlutusPurposeF era, ScriptHash (EraCrypto era))]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#acNeededL"><span class="hs-identifier hs-var">acNeededL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; Rep era [t]
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ListR"><span class="hs-identifier hs-var">ListR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t b. Rep era t -&gt; Rep era b -&gt; Rep era (t, b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#PairR"><span class="hs-identifier hs-var">PairR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (PlutusPurposeF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptPurposeR"><span class="hs-identifier hs-var">ScriptPurposeR</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptHashR"><span class="hs-identifier hs-var">ScriptHashR</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (ScriptsNeededF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptsNeeded"><span class="hs-identifier hs-var">scriptsNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">Term era [(PlutusPurposeF era, ScriptHash (EraCrypto era))]
</span><a href="#local-6989586621685135545"><span class="hs-identifier hs-var">acNeeded</span></a></span><span>
</span><span id="line-630"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Hashes of scripts that will be run. Not all of these will be in the 'scriptWits'</span><span>
</span><span id="line-631"></span><span>          </span><span class="annot"><span class="annottext">Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135544"><span class="hs-identifier hs-var">neededHashSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;toSet&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135543"><span class="annot"><span class="annottext">[(PlutusPurposeF era, ScriptHash StandardCrypto)]
</span><a href="#local-6989586621685135543"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">[(PlutusPurposeF era, ScriptHash StandardCrypto)]
</span><a href="#local-6989586621685135543"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era [(PlutusPurposeF era, ScriptHash (EraCrypto era))]
</span><a href="#local-6989586621685135545"><span class="hs-identifier hs-var">acNeeded</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- Only the refAdjusted scripts need to be in the 'scriptWits' but if the refscripts that are</span><span>
</span><span id="line-633"></span><span>          </span><span class="hs-comment">-- excluded from 'scriptWits' are Timelock scripts, a sufficient set keys must be added to</span><span>
</span><span id="line-634"></span><span>          </span><span class="hs-comment">-- the sufficient key hashes.</span><span>
</span><span id="line-635"></span><span>          </span><span class="annot"><span class="annottext">Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135542"><span class="hs-identifier hs-var">refAdjusted</span></a></span><span>
</span><span id="line-636"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;adjust&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Proof era
-&gt; Set (TxIn (EraCrypto era))
-&gt; Set (TxIn (EraCrypto era))
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; Set (ScriptHash (EraCrypto era))
-&gt; Set (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustNeededByRefScripts"><span class="hs-identifier hs-var">adjustNeededByRefScripts</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#inputs"><span class="hs-identifier hs-var">inputs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#refInputs"><span class="hs-identifier hs-var">refInputs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135544"><span class="hs-identifier hs-var">neededHashSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- , scriptWits :=: Restrict refAdjusted (allScriptUniv p)</span><span>
</span><span id="line-638"></span><span>          </span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135542"><span class="hs-identifier hs-var">refAdjusted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#allScriptUniv"><span class="hs-identifier hs-var">allScriptUniv</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span>
</span><span id="line-639"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t b era. (Ord t, Eq b) =&gt; Term era (Map t b) -&gt; Term era [b]
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Elems"><span class="hs-identifier hs-var">Elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b t era.
Ord t =&gt;
Lens' b t -&gt; Rep era t -&gt; Term era (Map t b) -&gt; Term era (Map t t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ProjM"><span class="hs-identifier hs-var">ProjM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. Lens' (a, b) a
</span><a href="Test.Cardano.Ledger.Constrained.Lenses.html#fstL"><span class="hs-identifier hs-var">fstL</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era IsValid
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#IsValidR"><span class="hs-identifier hs-var">IsValidR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135544"><span class="hs-identifier hs-var">neededHashSet</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (IsValid, ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#plutusUniv"><span class="hs-identifier hs-var">plutusUniv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era [IsValid]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#valids"><span class="hs-identifier hs-var">valids</span></a></span><span>
</span><span id="line-640"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (PlutusPointerF era))
</span><a href="#local-6989586621685135539"><span class="hs-identifier hs-var">rdmrPtrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era any.
AlonzoEraScript era =&gt;
Target
  era
  ([(PlutusPurposeF era, ScriptHash (EraCrypto era))]
   -&gt; Map (ScriptHash (EraCrypto era)) any
   -&gt; Set (PlutusPointerF era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#rdmrPtrsT"><span class="hs-identifier hs-var">rdmrPtrsT</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era [(PlutusPurposeF era, ScriptHash (EraCrypto era))]
</span><a href="#local-6989586621685135545"><span class="hs-identifier hs-var">acNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (IsValid, ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#plutusUniv"><span class="hs-identifier hs-var">plutusUniv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-641"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (PlutusPointerF era))
</span><a href="#local-6989586621685135539"><span class="hs-identifier hs-var">rdmrPtrs</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era b. Ord t =&gt; Term era (Map t b) -&gt; Term era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Dom"><span class="hs-identifier hs-var">Dom</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (PlutusPointerF era) (Data era, ExUnits))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#redeemers"><span class="hs-identifier hs-var">redeemers</span></a></span><span>
</span><span id="line-642"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era t.
RootTarget era t Bool -&gt; Pred era -&gt; Pred era -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#If"><span class="hs-identifier hs-var">If</span></a></span><span>
</span><span id="line-643"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;null&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.null</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (PlutusPointerF era))
</span><a href="#local-6989586621685135539"><span class="hs-identifier hs-var">rdmrPtrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; Term era b -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Before"><span class="hs-identifier hs-var">Before</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraPParams era =&gt; Proof era -&gt; Term era ExUnits
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#maxTxExUnits"><span class="hs-identifier hs-var">maxTxExUnits</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (PlutusPointerF era) (Data era, ExUnits))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#redeemers"><span class="hs-identifier hs-var">redeemers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t.
(Era era, Adds t) =&gt;
Direct t -&gt; Term era t -&gt; OrdCond -&gt; [Sum era t] -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#SumsTo"><span class="hs-identifier hs-var">SumsTo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; ExUnits
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ExUnits</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraPParams era =&gt; Proof era -&gt; Term era ExUnits
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#maxTxExUnits"><span class="hs-identifier hs-var">maxTxExUnits</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OrdCond
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#GTE"><span class="hs-identifier hs-var">GTE</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall t c b era.
Adds c =&gt;
Rep era c -&gt; Lens' t c -&gt; Term era (Map b t) -&gt; Sum era c
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#ProjMap"><span class="hs-identifier hs-var">ProjMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era ExUnits
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ExUnitsR"><span class="hs-identifier hs-var">ExUnitsR</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. Lens' (a, b) b
</span><a href="Test.Cardano.Ledger.Constrained.Lenses.html#sndL"><span class="hs-identifier hs-var">sndL</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (PlutusPointerF era) (Data era, ExUnits))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#redeemers"><span class="hs-identifier hs-var">redeemers</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-646"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (DataHash StandardCrypto))
</span><a href="#local-6989586621685135529"><span class="hs-identifier hs-var">plutusDataHashes</span></a></span><span>
</span><span id="line-647"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;plutusDataHashes&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era.
(AlonzoEraTxOut era, EraTxBody era, AlonzoEraScript era) =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyF era
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; Set (DataHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#getPlutusDataHashes"><span class="hs-identifier hs-var">getPlutusDataHashes</span></a></span><span>
</span><span id="line-648"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-649"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span>
</span><span id="line-650"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#allScriptUniv"><span class="hs-identifier hs-var">allScriptUniv</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-651"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (DataHash StandardCrypto))
</span><a href="#local-6989586621685135529"><span class="hs-identifier hs-var">plutusDataHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (DataHash (EraCrypto era)) (Data era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#dataUniv"><span class="hs-identifier hs-var">dataUniv</span></a></span><span> </span><span class="annot"><span class="annottext">forall t era. Eq t =&gt; Term era t -&gt; Term era t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3D%3A"><span class="hs-operator hs-var">:=:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (DataHash (EraCrypto era)) (Data era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#dataWits"><span class="hs-identifier hs-var">dataWits</span></a></span><span>
</span><span id="line-653"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (BootstrapWitness StandardCrypto))
</span><a href="#local-6989586621685135799"><span class="hs-identifier hs-var">tempBootWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;boots&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyF era
-&gt; Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey)
-&gt; Set (BootstrapWitness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bootWitsT"><span class="hs-identifier hs-var">bootWitsT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var">spending</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135707"><span class="hs-identifier hs-var">necessaryHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Target era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#necessaryKeyHashTarget"><span class="hs-identifier hs-var">necessaryKeyHashTarget</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#reqSignerHashes"><span class="hs-identifier hs-var">reqSignerHashes</span></a></span><span>
</span><span id="line-655"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135705"><span class="hs-identifier hs-var">sufficientHashes</span></a></span><span>
</span><span id="line-656"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;sufficient&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (ScriptHash (EraCrypto era)) (ScriptF era)
-&gt; [TxCertF era]
-&gt; Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era))
-&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#sufficientKeyHashes"><span class="hs-identifier hs-var">sufficientKeyHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135544"><span class="hs-identifier hs-var">neededHashSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#allScriptUniv"><span class="hs-identifier hs-var">allScriptUniv</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era [TxCertF era]
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#certs"><span class="hs-identifier hs-var">certs</span></a></span><span>
</span><span id="line-659"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Genesis (EraCrypto era)) (GenDelegPair (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#genDelegs"><span class="hs-identifier hs-var">genDelegs</span></a></span><span>
</span><span id="line-660"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-661"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term era (Set (WitVKey 'Witness StandardCrypto))
</span><a href="#local-6989586621685135798"><span class="hs-identifier hs-var">tempKeyWits</span></a></span><span>
</span><span id="line-662"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
-&gt; Term
     era
     (Map
        (KeyHash 'Payment (EraCrypto era))
        (Addr (EraCrypto era), SigningKey))
-&gt; Target era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitnessTarget"><span class="hs-identifier hs-var">makeKeyWitnessTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var">tempTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135707"><span class="hs-identifier hs-var">necessaryHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135705"><span class="hs-identifier hs-var">sufficientHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span>
</span><span id="line-663"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (BootstrapWitness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#bootWits"><span class="hs-identifier hs-var">bootWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;boots&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyF era
-&gt; Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey)
-&gt; Set (BootstrapWitness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bootWitsT"><span class="hs-identifier hs-var">bootWitsT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var">spending</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#keyWits"><span class="hs-identifier hs-var">keyWits</span></a></span><span>
</span><span id="line-665"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Set (KeyHash 'Witness (EraCrypto era)))
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
-&gt; Term
     era
     (Map
        (KeyHash 'Payment (EraCrypto era))
        (Addr (EraCrypto era), SigningKey))
-&gt; Target era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#makeKeyWitnessTarget"><span class="hs-identifier hs-var">makeKeyWitnessTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135707"><span class="hs-identifier hs-var">necessaryHashes</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135705"><span class="hs-identifier hs-var">sufficientHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#scriptWits"><span class="hs-identifier hs-var">scriptWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'Payment (EraCrypto era))
     (Addr (EraCrypto era), SigningKey))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#byronAddrUniv"><span class="hs-identifier hs-var">byronAddrUniv</span></a></span><span>
</span><span id="line-666"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- 'langs' is not computed from the 'scriptWits' because that does not include needed</span><span>
</span><span id="line-667"></span><span>          </span><span class="hs-comment">-- scripts that are reference scripts, So get the scripts from the neededHashSet</span><span>
</span><span id="line-668"></span><span>          </span><span class="annot"><span class="annottext">Term era (Set Language)
</span><a href="#local-6989586621685135527"><span class="hs-identifier hs-var">langs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;languages&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall k era. Map k (ScriptF era) -&gt; Set Language
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#scriptWitsLangs"><span class="hs-identifier hs-var">scriptWitsLangs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Term era (Set t) -&gt; Term era (Map t b) -&gt; Term era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Restrict"><span class="hs-identifier hs-var">Restrict</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135544"><span class="hs-identifier hs-var">neededHashSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; Term era (Map (ScriptHash (EraCrypto era)) (ScriptF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#allScriptUniv"><span class="hs-identifier hs-var">allScriptUniv</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-669"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Maybe (SafeHash (EraCrypto era) EraIndependentScriptIntegrity))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#wppHash"><span class="hs-identifier hs-var">wppHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era1 era2.
Era era1 =&gt;
Proof era1
-&gt; Term era2 (PParamsF era1)
-&gt; Term era2 (Set Language)
-&gt; Term era2 (Map (PlutusPointerF era1) (Data era1, ExUnits))
-&gt; Term era2 (Map (DataHash (EraCrypto era1)) (Data era1))
-&gt; Target era2 (Maybe (ScriptIntegrityHash (EraCrypto era1)))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#integrityHash"><span class="hs-identifier hs-var">integrityHash</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Proof era -&gt; Term era (PParamsF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#pparams"><span class="hs-identifier hs-var">pparams</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term era (Set Language)
</span><a href="#local-6989586621685135527"><span class="hs-identifier hs-var">langs</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (PlutusPointerF era) (Data era, ExUnits))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#redeemers"><span class="hs-identifier hs-var">redeemers</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Map (DataHash (EraCrypto era)) (Data era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#dataWits"><span class="hs-identifier hs-var">dataWits</span></a></span><span>
</span><span id="line-670"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#owed"><span class="hs-identifier hs-var">owed</span></a></span><span>
</span><span id="line-671"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;owed&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135525"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621685135525"><span class="hs-identifier hs-var">percent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621685135524"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135524"><span class="hs-identifier hs-var">fee</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">rationalToCoinViaCeiling</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621685135525"><span class="hs-identifier hs-var">percent</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135524"><span class="hs-identifier hs-var">fee</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; a -&gt; Ratio a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">%</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">100</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-672"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. AlonzoEraPParams era =&gt; Proof era -&gt; Term era Natural
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateralPercentage"><span class="hs-identifier hs-var">collateralPercentage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>                    </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txfee"><span class="hs-identifier hs-var">txfee</span></a></span><span>
</span><span id="line-674"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- we need to add 'extraCol' to the colUtxo, to pay the collateral fee.</span><span>
</span><span id="line-676"></span><span>          </span><span class="hs-comment">-- we arrange this so adding the 'extraCol' will make the sum of the all the collateral inputs, one more than 'owed'</span><span>
</span><span id="line-677"></span><span>          </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#extraCol"><span class="hs-identifier hs-var">extraCol</span></a></span><span>
</span><span id="line-678"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;extraCol&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621685135521"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135521"><span class="hs-identifier hs-var">suminputs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621685135520"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135520"><span class="hs-identifier hs-var">owe</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135520"><span class="hs-identifier hs-var">owe</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135521"><span class="hs-identifier hs-var">suminputs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#sumCol"><span class="hs-identifier hs-var">sumCol</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#owed"><span class="hs-identifier hs-var">owed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#totalCol"><span class="hs-identifier hs-var">totalCol</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;(&lt;+&gt;)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135519"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135519"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621685135518"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135518"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135519"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135518"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#extraCol"><span class="hs-identifier hs-var">extraCol</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#sumCol"><span class="hs-identifier hs-var">sumCol</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall t era.
Ord t =&gt;
Direct (Term era t) -&gt; Term era (Set t) -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Member"><span class="hs-identifier hs-var">Member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Addr (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#colRetAddr"><span class="hs-identifier hs-var">colRetAddr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (Addr (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#addrUniv"><span class="hs-identifier hs-var">addrUniv</span></a></span><span>
</span><span id="line-681"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- This ( collateralReturn) depends on the Coin in the TxOut being (Coin 1).</span><span>
</span><span id="line-682"></span><span>          </span><span class="hs-comment">-- The computation of 'owed' and 'extraCol&quot; should ensure this.</span><span>
</span><span id="line-683"></span><span>          </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Term era (TxOutF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateralReturn"><span class="hs-identifier hs-var">collateralReturn</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-684"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;colReturn&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135515"><span class="annot"><span class="annottext">Addr StandardCrypto
</span><a href="#local-6989586621685135515"><span class="hs-identifier hs-var">ad</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; TxOut era -&gt; TxOutF era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-var">TxOutF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr (EraCrypto era) -&gt; Value era -&gt; TxOut era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Addr StandardCrypto
</span><a href="#local-6989586621685135515"><span class="hs-identifier hs-var">ad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t s. Inject t s =&gt; t -&gt; s
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Addr (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#colRetAddr"><span class="hs-identifier hs-var">colRetAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-685"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- We compute this, so that we can test that the (Coin 1) invariant holds.</span><span>
</span><span id="line-686"></span><span>          </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#colRetCoin"><span class="hs-identifier hs-var">colRetCoin</span></a></span><span>
</span><span id="line-687"></span><span>            </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t b era.
TestName -&gt; (t -&gt; b) -&gt; RootTarget era Void (t -&gt; b)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135512"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135512"><span class="hs-identifier hs-var">sumc</span></a></span></span><span> </span><span id="local-6989586621685135511"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135511"><span class="hs-identifier hs-var">extra</span></a></span></span><span> </span><span id="local-6989586621685135510"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135510"><span class="hs-identifier hs-var">owe</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135512"><span class="hs-identifier hs-var">sumc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135511"><span class="hs-identifier hs-var">extra</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135510"><span class="hs-identifier hs-var">owe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#sumCol"><span class="hs-identifier hs-var">sumCol</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#extraCol"><span class="hs-identifier hs-var">extraCol</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a t. Target era (a -&gt; t) -&gt; Term era a -&gt; Target era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%5E%24"><span class="hs-operator hs-var">^$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#owed"><span class="hs-identifier hs-var">owed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era Coin
-&gt; Term era (Maybe (ScriptIntegrityHash (EraCrypto era)))
-&gt; Term era Coin
-&gt; Target era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyTarget"><span class="hs-identifier hs-var">txbodyTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txfee"><span class="hs-identifier hs-var">txfee</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Maybe (SafeHash (EraCrypto era) EraIndependentScriptIntegrity))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#wppHash"><span class="hs-identifier hs-var">wppHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#totalCol"><span class="hs-identifier hs-var">totalCol</span></a></span><span>
</span><span id="line-689"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txterm"><span class="hs-identifier hs-var">txterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t b. Term era t -&gt; RootTarget era b t -&gt; Pred era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#%3A%3C-%3A"><span class="hs-operator hs-var">:&lt;-:</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (BootstrapWitness (EraCrypto era)))
-&gt; Term era (Set (WitVKey 'Witness (EraCrypto era)))
-&gt; Target era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txTarget"><span class="hs-identifier hs-var">txTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (BootstrapWitness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#bootWits"><span class="hs-identifier hs-var">bootWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#keyWits"><span class="hs-identifier hs-var">keyWits</span></a></span><span>
</span><span id="line-690"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-691"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-692"></span><span>    </span><span id="local-6989586621685135884"><span class="annot"><span class="annottext">spending :: Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135884"><span class="hs-identifier hs-var hs-var">spending</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t s.
Era era =&gt;
TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#V"><span class="hs-identifier hs-var">V</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;spending&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Rep era t -&gt; Rep era b -&gt; Rep era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#MapR"><span class="hs-identifier hs-var">MapR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxInR"><span class="hs-identifier hs-var">TxInR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (TxOutF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxOutR"><span class="hs-identifier hs-var">TxOutR</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>    </span><span id="local-6989586621685135871"><span class="annot"><span class="annottext">colUtxo :: Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135871"><span class="hs-identifier hs-var hs-var">colUtxo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t s.
Era era =&gt;
TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#V"><span class="hs-identifier hs-var">V</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;colUtxo&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Rep era t -&gt; Rep era b -&gt; Rep era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#MapR"><span class="hs-identifier hs-var">MapR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxInR"><span class="hs-identifier hs-var">TxInR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (TxOutF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxOutR"><span class="hs-identifier hs-var">TxOutR</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>    </span><span id="local-6989586621685135870"><span class="annot"><span class="annottext">colRestriction :: Term era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135870"><span class="hs-identifier hs-var hs-var">colRestriction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t s.
Era era =&gt;
TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#V"><span class="hs-identifier hs-var">V</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;colRestriction&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Rep era t -&gt; Rep era b -&gt; Rep era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#MapR"><span class="hs-identifier hs-var">MapR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxInR"><span class="hs-identifier hs-var">TxInR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (TxOutF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxOutR"><span class="hs-identifier hs-var">TxOutR</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>    </span><span id="local-6989586621685135855"><span class="annot"><span class="annottext">nonZeroRewards :: Term era (Map (Credential 'Staking (EraCrypto era)) Coin)
</span><a href="#local-6989586621685135855"><span class="hs-identifier hs-var hs-var">nonZeroRewards</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. Era era =&gt; TestName -&gt; Rep era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;nonZeroRewards&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era b.
Ord t =&gt;
Rep era t -&gt; Rep era b -&gt; Rep era (Map t b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#MapR"><span class="hs-identifier hs-var">MapR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Rep era (Credential 'Staking (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CredR"><span class="hs-identifier hs-var">CredR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span>    </span><span id="local-6989586621685135890"><span class="annot"><span class="annottext">balanceCoin :: Term era Coin
</span><a href="#local-6989586621685135890"><span class="hs-identifier hs-var hs-var">balanceCoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t s.
Era era =&gt;
TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#V"><span class="hs-identifier hs-var">V</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;balanceCoin&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>    </span><span id="local-6989586621685135826"><span class="annot"><span class="annottext">certsRefunds :: PParamsF era
-&gt; Map (Credential 'Staking (EraCrypto era)) Coin
-&gt; Map (Credential 'DRepRole (EraCrypto era)) Coin
-&gt; [TxCertF era]
-&gt; Coin
</span><a href="#local-6989586621685135826"><span class="hs-identifier hs-var hs-var">certsRefunds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135493"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685135493"><span class="hs-identifier hs-var">pp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685135492"><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) Coin
</span><a href="#local-6989586621685135492"><span class="hs-identifier hs-var">stakingDepositsx</span></a></span></span><span> </span><span id="local-6989586621685135491"><span class="annot"><span class="annottext">Map (Credential 'DRepRole (EraCrypto era)) Coin
</span><a href="#local-6989586621685135491"><span class="hs-identifier hs-var">drepDepositsx</span></a></span></span><span> </span><span id="local-6989586621685135490"><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685135490"><span class="hs-identifier hs-var">certsx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-698"></span><span>      </span><span class="annot"><span class="annottext">forall era (f :: * -&gt; *).
(EraTxCert era, Foldable f) =&gt;
PParams era
-&gt; (Credential 'Staking (EraCrypto era) -&gt; Maybe Coin)
-&gt; (Credential 'DRepRole (EraCrypto era) -&gt; Maybe Coin)
-&gt; f (TxCert era)
-&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getTotalRefundsTxCerts</span></a></span><span>
</span><span id="line-699"></span><span>        </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685135493"><span class="hs-identifier hs-var">pp</span></a></span><span>
</span><span id="line-700"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">`Map.lookup`</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) Coin
</span><a href="#local-6989586621685135492"><span class="hs-identifier hs-var">stakingDepositsx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">`Map.lookup`</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole (EraCrypto era)) Coin
</span><a href="#local-6989586621685135491"><span class="hs-identifier hs-var">drepDepositsx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-702"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. TxCertF era -&gt; TxCert era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#unTxCertF"><span class="hs-identifier hs-var">unTxCertF</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685135490"><span class="hs-identifier hs-var">certsx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>    </span><span id="local-6989586621685135821"><span class="annot"><span class="annottext">certsDeposits :: PParamsF era
-&gt; Map (KeyHash 'StakePool (EraCrypto era)) a
-&gt; [TxCertF era]
-&gt; Coin
</span><a href="#local-6989586621685135821"><span class="hs-identifier hs-var hs-var">certsDeposits</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135482"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685135482"><span class="hs-identifier hs-var">pp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685135481"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) a
</span><a href="#local-6989586621685135481"><span class="hs-identifier hs-var">regpools</span></a></span></span><span> </span><span id="local-6989586621685135480"><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685135480"><span class="hs-identifier hs-var">certsx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135479"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-705"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621685135479"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135479"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era (f :: * -&gt; *).
(EraTxCert era, Foldable f) =&gt;
PParams era
-&gt; (KeyHash 'StakePool (EraCrypto era) -&gt; Bool)
-&gt; f (TxCert era)
-&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getTotalDepositsTxCerts</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685135482"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">`Map.member`</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool (EraCrypto era)) a
</span><a href="#local-6989586621685135481"><span class="hs-identifier hs-var">regpools</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. TxCertF era -&gt; TxCert era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#unTxCertF"><span class="hs-identifier hs-var">unTxCertF</span></a></span><span> </span><span class="annot"><span class="annottext">[TxCertF era]
</span><a href="#local-6989586621685135480"><span class="hs-identifier hs-var">certsx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span>    </span><span id="local-6989586621685135828"><span class="annot"><span class="annottext">txrefunds :: Term era Coin
</span><a href="#local-6989586621685135828"><span class="hs-identifier hs-var hs-var">txrefunds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;txrefunds&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>    </span><span id="local-6989586621685135827"><span class="annot"><span class="annottext">txdeposits :: Term era Coin
</span><a href="#local-6989586621685135827"><span class="hs-identifier hs-var hs-var">txdeposits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;txdeposits&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>    </span><span class="annot"><a href="#local-6989586621685135545"><span class="hs-identifier hs-type">acNeeded</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PlutusPurposeF"><span class="hs-identifier hs-type">PlutusPurposeF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-709"></span><span>    </span><span id="local-6989586621685135545"><span class="annot"><span class="annottext">acNeeded :: Term era [(PlutusPurposeF era, ScriptHash (EraCrypto era))]
</span><a href="#local-6989586621685135545"><span class="hs-identifier hs-var hs-var">acNeeded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;acNeeded&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; Rep era [t]
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ListR"><span class="hs-identifier hs-var">ListR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t b. Rep era t -&gt; Rep era b -&gt; Rep era (t, b)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#PairR"><span class="hs-identifier hs-var">PairR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (PlutusPurposeF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptPurposeR"><span class="hs-identifier hs-var">ScriptPurposeR</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptHashR"><span class="hs-identifier hs-var">ScriptHashR</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-710"></span><span>    </span><span id="local-6989586621685135544"><span class="annot"><span class="annottext">neededHashSet :: Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135544"><span class="hs-identifier hs-var hs-var">neededHashSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;neededHashSet&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptHashR"><span class="hs-identifier hs-var">ScriptHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-711"></span><span>    </span><span id="local-6989586621685135539"><span class="annot"><span class="annottext">rdmrPtrs :: Term era (Set (PlutusPointerF era))
</span><a href="#local-6989586621685135539"><span class="hs-identifier hs-var hs-var">rdmrPtrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;rdmrPtrs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (PlutusPointerF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#RdmrPtrR"><span class="hs-identifier hs-var">RdmrPtrR</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-712"></span><span>    </span><span id="local-6989586621685135529"><span class="annot"><span class="annottext">plutusDataHashes :: Term era (Set (DataHash StandardCrypto))
</span><a href="#local-6989586621685135529"><span class="hs-identifier hs-var hs-var">plutusDataHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;plutusDataHashes&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (DataHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#DataHashR"><span class="hs-identifier hs-var">DataHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-713"></span><span>    </span><span id="local-6989586621685135812"><span class="annot"><span class="annottext">oneAuxdata :: Term era (TxAuxDataF era)
</span><a href="#local-6989586621685135812"><span class="hs-identifier hs-var hs-var">oneAuxdata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;oneAuxdata&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (TxAuxDataF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxAuxDataR"><span class="hs-identifier hs-var">TxAuxDataR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-714"></span><span>    </span><span id="local-6989586621685135806"><span class="annot"><span class="annottext">tempTxFee :: Term era Coin
</span><a href="#local-6989586621685135806"><span class="hs-identifier hs-var hs-var">tempTxFee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;tempTxFee&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-715"></span><span>    </span><span id="local-6989586621685135801"><span class="annot"><span class="annottext">tempTx :: Term era (TxF era)
</span><a href="#local-6989586621685135801"><span class="hs-identifier hs-var hs-var">tempTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;tempTx&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxR"><span class="hs-identifier hs-var">TxR</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-716"></span><span>    </span><span id="local-6989586621685135818"><span class="annot"><span class="annottext">tempTxBody :: Term era (TxBodyF era)
</span><a href="#local-6989586621685135818"><span class="hs-identifier hs-var hs-var">tempTxBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;tempTxBody&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxBodyR"><span class="hs-identifier hs-var">TxBodyR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-717"></span><span>    </span><span id="local-6989586621685135807"><span class="annot"><span class="annottext">tempWppHash :: Term
  era (Maybe (SafeHash StandardCrypto EraIndependentScriptIntegrity))
</span><a href="#local-6989586621685135807"><span class="hs-identifier hs-var hs-var">tempWppHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;tempWppHash&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; Rep era (Maybe t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#MaybeR"><span class="hs-identifier hs-var">MaybeR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Rep era (SafeHash (EraCrypto era) EraIndependentScriptIntegrity)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptIntegrityHashR"><span class="hs-identifier hs-var">ScriptIntegrityHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-718"></span><span>    </span><span id="local-6989586621685135808"><span class="annot"><span class="annottext">randomWppHash :: Term era (SafeHash StandardCrypto EraIndependentScriptIntegrity)
</span><a href="#local-6989586621685135808"><span class="hs-identifier hs-var hs-var">randomWppHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;randomWppHash&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Rep era (SafeHash (EraCrypto era) EraIndependentScriptIntegrity)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptIntegrityHashR"><span class="hs-identifier hs-var">ScriptIntegrityHashR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-719"></span><span>    </span><span id="local-6989586621685135799"><span class="annot"><span class="annottext">tempBootWits :: Term era (Set (BootstrapWitness StandardCrypto))
</span><a href="#local-6989586621685135799"><span class="hs-identifier hs-var hs-var">tempBootWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;tempBootWits&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (BootstrapWitness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#BootstrapWitnessR"><span class="hs-identifier hs-var">BootstrapWitnessR</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621685137638"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-720"></span><span>    </span><span id="local-6989586621685135798"><span class="annot"><span class="annottext">tempKeyWits :: Term era (Set (WitVKey 'Witness StandardCrypto))
</span><a href="#local-6989586621685135798"><span class="hs-identifier hs-var hs-var">tempKeyWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;tempKeyWits&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Rep era (WitVKey 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#WitVKeyR"><span class="hs-identifier hs-var">WitVKeyR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-721"></span><span>    </span><span id="local-6989586621685135527"><span class="annot"><span class="annottext">langs :: Term era (Set Language)
</span><a href="#local-6989586621685135527"><span class="hs-identifier hs-var hs-var">langs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;langs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Language
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#LanguageR"><span class="hs-identifier hs-var">LanguageR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-722"></span><span>    </span><span id="local-6989586621685135857"><span class="annot"><span class="annottext">tempTotalCol :: Term era Coin
</span><a href="#local-6989586621685135857"><span class="hs-identifier hs-var hs-var">tempTotalCol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;tempTotalCol&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall era. Rep era Coin
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CoinR"><span class="hs-identifier hs-var">CoinR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-723"></span><span>    </span><span id="local-6989586621685135856"><span class="annot"><span class="annottext">prewithdrawal :: Term era (Set (Credential 'Staking StandardCrypto))
</span><a href="#local-6989586621685135856"><span class="hs-identifier hs-var hs-var">prewithdrawal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;preWithdrawal&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Rep era (Credential 'Staking (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#CredR"><span class="hs-identifier hs-var">CredR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-724"></span><span>    </span><span id="local-6989586621685135542"><span class="annot"><span class="annottext">refAdjusted :: Term era (Set (ScriptHash StandardCrypto))
</span><a href="#local-6989586621685135542"><span class="hs-identifier hs-var hs-var">refAdjusted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;refAdjusted&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#ScriptHashR"><span class="hs-identifier hs-var">ScriptHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-725"></span><span>    </span><span id="local-6989586621685135707"><span class="annot"><span class="annottext">necessaryHashes :: Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135707"><span class="hs-identifier hs-var hs-var">necessaryHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;necessaryHashes&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#WitHashR"><span class="hs-identifier hs-var">WitHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-726"></span><span>    </span><span id="local-6989586621685135705"><span class="annot"><span class="annottext">sufficientHashes :: Term era (Set (KeyHash 'Witness StandardCrypto))
</span><a href="#local-6989586621685135705"><span class="hs-identifier hs-var hs-var">sufficientHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t s.
Proof era -&gt; TestName -&gt; Rep era t -&gt; Access era s t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#pV"><span class="hs-identifier hs-var">pV</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135891"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;sufficientHashes&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t era. Ord t =&gt; Rep era t -&gt; Rep era (Set t)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#SetR"><span class="hs-identifier hs-var">SetR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Rep era (KeyHash 'Witness (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#WitHashR"><span class="hs-identifier hs-var">WitHashR</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era s t. Access era s t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span id="local-6989586621685137424"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyStage"><span class="hs-identifier hs-type">txBodyStage</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-729"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137424"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-730"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#UnivSize"><span class="hs-identifier hs-type">UnivSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-731"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137424"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-732"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137424"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-733"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137424"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-734"></span><span id="txBodyStage"><span class="annot"><span class="annottext">txBodyStage :: forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyStage"><span class="hs-identifier hs-var hs-var">txBodyStage</span></a></span></span><span> </span><span id="local-6989586621685135458"><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135458"><span class="hs-identifier hs-var">sizes</span></a></span></span><span> </span><span id="local-6989586621685135457"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135457"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685135456"><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685135456"><span class="hs-identifier hs-var">subst0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-735"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135455"><span class="annot"><span class="annottext">preds :: [Pred era]
</span><a href="#local-6989586621685135455"><span class="hs-identifier hs-var hs-var">preds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
UnivSize -&gt; Proof era -&gt; [Pred era]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyPreds"><span class="hs-identifier hs-var">txBodyPreds</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135458"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135457"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-736"></span><span>  </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; OrderInfo -&gt; [Pred era] -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Solver.html#toolChainSub"><span class="hs-identifier hs-var">toolChainSub</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135457"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">OrderInfo
</span><a href="Test.Cardano.Ledger.Constrained.Rewrite.html#standardOrderInfo"><span class="hs-identifier hs-var">standardOrderInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[Pred era]
</span><a href="#local-6989586621685135455"><span class="hs-identifier hs-var">preds</span></a></span><span> </span><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685135456"><span class="hs-identifier hs-var">subst0</span></a></span><span>
</span><span id="line-737"></span><span>
</span><span id="line-738"></span><span class="hs-comment">-- ===============================================================</span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span id="local-6989586621685137418"><span id="local-6989586621685137419"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#balanceMap"><span class="hs-identifier hs-type">balanceMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137419"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621685137419"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137419"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137418"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137418"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137419"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137418"><span class="hs-identifier hs-type">t</span></a></span></span></span><span>
</span><span id="line-741"></span><span id="balanceMap"><span class="annot"><span class="annottext">balanceMap :: forall k t.
Ord k =&gt;
[(k, Coin)] -&gt; Map k t -&gt; Lens' t Coin -&gt; Map k t
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#balanceMap"><span class="hs-identifier hs-var hs-var">balanceMap</span></a></span></span><span> </span><span id="local-6989586621685135446"><span class="annot"><span class="annottext">[(k, Coin)]
</span><a href="#local-6989586621685135446"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span id="local-6989586621685135445"><span class="annot"><span class="annottext">Map k t
</span><a href="#local-6989586621685135445"><span class="hs-identifier hs-var">m0</span></a></span></span><span> </span><span id="local-6989586621685135444"><span class="annot"><span class="annottext">Lens' t Coin
</span><a href="#local-6989586621685135444"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Map k t -&gt; (k, Coin) -&gt; Map k t
</span><a href="#local-6989586621685135443"><span class="hs-identifier hs-var">accum</span></a></span><span> </span><span class="annot"><span class="annottext">Map k t
</span><a href="#local-6989586621685135445"><span class="hs-identifier hs-var">m0</span></a></span><span> </span><span class="annot"><span class="annottext">[(k, Coin)]
</span><a href="#local-6989586621685135446"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-742"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-743"></span><span>    </span><span id="local-6989586621685135443"><span class="annot"><span class="annottext">accum :: Map k t -&gt; (k, Coin) -&gt; Map k t
</span><a href="#local-6989586621685135443"><span class="hs-identifier hs-var hs-var">accum</span></a></span></span><span> </span><span id="local-6989586621685135442"><span class="annot"><span class="annottext">Map k t
</span><a href="#local-6989586621685135442"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621685135441"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135441"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135440"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135440"><span class="hs-identifier hs-var">thecoin</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.adjust</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621685135438"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621685135438"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621685135438"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' t Coin
</span><a href="#local-6989586621685135444"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135440"><span class="hs-identifier hs-var">thecoin</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621685135438"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' t Coin
</span><a href="#local-6989586621685135444"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135441"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Map k t
</span><a href="#local-6989586621685135442"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="hs-comment">-- | Adjust the Coin part of the TxOut in the 'utxo' map for the TxIn 'feeTxIn' by adding 'txfee'</span><span>
</span><span id="line-746"></span><span id="local-6989586621685137413"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustFeeInput"><span class="hs-identifier hs-type">adjustFeeInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137413"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137413"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#Typed"><span class="hs-identifier hs-type">Typed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137413"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-747"></span><span id="adjustFeeInput"><span class="annot"><span class="annottext">adjustFeeInput :: forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustFeeInput"><span class="hs-identifier hs-var hs-var">adjustFeeInput</span></a></span></span><span> </span><span id="local-6989586621685135417"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135417"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-748"></span><span>  </span><span id="local-6989586621685135416"><span class="annot"><span class="annottext">u :: Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135416"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621685135415"><span class="annot"><span class="annottext">V era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135415"><span class="hs-identifier hs-var">utxoV</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-749"></span><span>    </span><span id="local-6989586621685135414"><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621685135414"><span class="hs-identifier hs-var">feeinput</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135417"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#feeTxIn"><span class="hs-identifier hs-var">feeTxIn</span></a></span><span>
</span><span id="line-750"></span><span>    </span><span id="local-6989586621685135412"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135412"><span class="hs-identifier hs-var">feecoin</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135417"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txfee"><span class="hs-identifier hs-var">txfee</span></a></span><span>
</span><span id="line-751"></span><span>    </span><span id="local-6989586621685135411"><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135411"><span class="hs-identifier hs-var">utxomap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135417"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135416"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-752"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; t -&gt; Env era -&gt; Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#storeVar"><span class="hs-identifier hs-var">storeVar</span></a></span><span> </span><span class="annot"><span class="annottext">V era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135415"><span class="hs-identifier hs-var">utxoV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k t.
Ord k =&gt;
[(k, Coin)] -&gt; Map k t -&gt; Lens' t Coin -&gt; Map k t
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#balanceMap"><span class="hs-identifier hs-var">balanceMap</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn StandardCrypto
</span><a href="#local-6989586621685135414"><span class="hs-identifier hs-var">feeinput</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135412"><span class="hs-identifier hs-var">feecoin</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135411"><span class="hs-identifier hs-var">utxomap</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, Reflect era) =&gt; Lens' (TxOutF era) Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#outputCoinL"><span class="hs-identifier hs-var">outputCoinL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135417"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>  </span><span id="local-6989586621685135404"><span class="annot"><span class="annottext">Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135404"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. [TestName] -&gt; Typed a
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#failT"><span class="hs-identifier hs-var">failT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;utxo does not match a Var Term: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135404"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-754"></span><span>
</span><span id="line-755"></span><span class="hs-comment">-- | Adjust UTxO image of 'collateral' to pay for the collateral fees. Do this by</span><span>
</span><span id="line-756"></span><span class="hs-comment">--   adding 'extraCol' to the TxOuts associated with col inputs</span><span>
</span><span id="line-757"></span><span id="local-6989586621685137399"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustColInput"><span class="hs-identifier hs-type">adjustColInput</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-758"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137399"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-759"></span><span>  </span><span class="hs-comment">-- Term era (TxIn (EraCrypto era)) -&gt;</span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-comment">-- Term era Coin -&gt;</span><span>
</span><span id="line-761"></span><span>  </span><span class="hs-comment">-- Term era Coin -&gt;</span><span>
</span><span id="line-762"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137399"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-763"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#Typed"><span class="hs-identifier hs-type">Typed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137399"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-764"></span><span id="adjustColInput"><span class="annot"><span class="annottext">adjustColInput :: forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Gen (Env era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustColInput"><span class="hs-identifier hs-var hs-var">adjustColInput</span></a></span></span><span> </span><span id="local-6989586621685135373"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135373"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135370"><span class="annot"><span class="annottext">utxoterm :: Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135370"><span class="hs-identifier hs-var hs-var">utxoterm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span>
</span><span id="line-766"></span><span>      </span><span id="local-6989586621685135369"><span class="annot"><span class="annottext">utxoV :: V era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135369"><span class="hs-identifier hs-var hs-var">utxoV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135370"><span class="hs-identifier hs-var">utxoterm</span></a></span><span>
</span><span id="line-767"></span><span>  </span><span id="local-6989586621685135367"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135367"><span class="hs-identifier hs-var">extracoin</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135373"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#extraCol"><span class="hs-identifier hs-var">extraCol</span></a></span><span>
</span><span id="line-768"></span><span>  </span><span id="local-6989586621685135366"><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135366"><span class="hs-identifier hs-var">utxomap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135373"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="#local-6989586621685135370"><span class="hs-identifier hs-var">utxoterm</span></a></span><span>
</span><span id="line-769"></span><span>  </span><span id="local-6989586621685135365"><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
</span><a href="#local-6989586621685135365"><span class="hs-identifier hs-var">col</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135373"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era (Set (TxIn (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#collateral"><span class="hs-identifier hs-var">collateral</span></a></span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k v.
(Ord k, Show k) =&gt;
[k] -&gt; Map k v -&gt; Coin -&gt; Lens' v Coin -&gt; Maybe (Map k v)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustC"><span class="hs-identifier hs-var">adjustC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn StandardCrypto)
</span><a href="#local-6989586621685135365"><span class="hs-identifier hs-var">col</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135366"><span class="hs-identifier hs-var">utxomap</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135367"><span class="hs-identifier hs-var">extracoin</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, Reflect era) =&gt; Lens' (TxOutF era) Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#outputCoinL"><span class="hs-identifier hs-var">outputCoinL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-771"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">discard</span></a></span><span>
</span><span id="line-772"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621685135357"><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135357"><span class="hs-identifier hs-var">newutxo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-773"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135356"><span class="annot"><span class="annottext">env2 :: Env era
</span><a href="#local-6989586621685135356"><span class="hs-identifier hs-var hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; t -&gt; Env era -&gt; Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#storeVar"><span class="hs-identifier hs-var">storeVar</span></a></span><span> </span><span class="annot"><span class="annottext">V era (Map (TxIn StandardCrypto) (TxOutF era))
</span><a href="#local-6989586621685135369"><span class="hs-identifier hs-var">utxoV</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF era)
</span><a href="#local-6989586621685135357"><span class="hs-identifier hs-var">newutxo</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135373"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-774"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621685135355"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135355"><span class="hs-identifier hs-var">env5</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135354"><span class="annot"><span class="annottext">TxBodyF era
</span><a href="#local-6989586621685135354"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b era.
(a -&gt; b -&gt; a)
-&gt; Term era a -&gt; Target era b -&gt; Env era -&gt; Typed (Env era, b)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTarget"><span class="hs-identifier hs-var">updateTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall x. x -&gt; x -&gt; x
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#override"><span class="hs-identifier hs-var">override</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era Coin
-&gt; Term era (Maybe (ScriptIntegrityHash (EraCrypto era)))
-&gt; Term era Coin
-&gt; Target era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyTarget"><span class="hs-identifier hs-var">txbodyTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txfee"><span class="hs-identifier hs-var">txfee</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Maybe (SafeHash (EraCrypto era) EraIndependentScriptIntegrity))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#wppHash"><span class="hs-identifier hs-var">wppHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#totalCol"><span class="hs-identifier hs-var">totalCol</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135356"><span class="hs-identifier hs-var">env2</span></a></span><span>
</span><span id="line-775"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621685135351"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135351"><span class="hs-identifier hs-var">env6</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxF era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-776"></span><span>        </span><span class="annot"><span class="annottext">forall a b era.
(a -&gt; b -&gt; a)
-&gt; Term era a -&gt; Target era b -&gt; Env era -&gt; Typed (Env era, b)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTarget"><span class="hs-identifier hs-var">updateTarget</span></a></span><span> </span><span class="annot"><span class="annottext">forall x. x -&gt; x -&gt; x
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#override"><span class="hs-identifier hs-var">override</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txterm"><span class="hs-identifier hs-var">txterm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (TxBodyF era)
-&gt; Term era (Set (BootstrapWitness (EraCrypto era)))
-&gt; Term era (Set (WitVKey 'Witness (EraCrypto era)))
-&gt; Target era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txTarget"><span class="hs-identifier hs-var">txTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Rep era t -&gt; t -&gt; Term era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Era era =&gt; Proof era -&gt; Rep era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.TypeRep.html#TxBodyR"><span class="hs-identifier hs-var">TxBodyR</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBodyF era
</span><a href="#local-6989586621685135354"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (BootstrapWitness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#bootWits"><span class="hs-identifier hs-var">bootWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Term era (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#keyWits"><span class="hs-identifier hs-var">keyWits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135355"><span class="hs-identifier hs-var">env5</span></a></span><span>
</span><span id="line-777"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135351"><span class="hs-identifier hs-var">env6</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-comment">-- | Adjust the part of the UTxO that maps the 'collateral' inputs, to pay the collateral fee.</span><span>
</span><span id="line-780"></span><span class="hs-comment">--   This will adjust 1 or more of the TxOuts associated with the collateral , to make up the difference.</span><span>
</span><span id="line-781"></span><span class="hs-comment">--   It may happen on rare occaisions, there is not enough Coin to make the adjustment, so return Nothing</span><span>
</span><span id="line-782"></span><span id="local-6989586621685137394"><span id="local-6989586621685137395"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustC"><span class="hs-identifier hs-type">adjustC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137395"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137395"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621685137395"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137395"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137394"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137394"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137395"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137394"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-783"></span><span id="adjustC"><span class="annot"><span class="annottext">adjustC :: forall k v.
(Ord k, Show k) =&gt;
[k] -&gt; Map k v -&gt; Coin -&gt; Lens' v Coin -&gt; Maybe (Map k v)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustC"><span class="hs-identifier hs-var hs-var">adjustC</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map k v
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135321"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135321"><span class="hs-identifier hs-var">extra</span></a></span></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135321"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-784"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustC"><span class="hs-identifier hs-var">adjustC</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621685135319"><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135319"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135319"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-785"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustC"><span class="hs-identifier hs-var">adjustC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621685135318"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135318"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621685135317"><span class="annot"><span class="annottext">[k]
</span><a href="#local-6989586621685135317"><span class="hs-identifier hs-var">is</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685135316"><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135316"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621685135315"><span class="annot"><span class="annottext">extra :: Coin
</span><a href="#local-6989586621685135315"><span class="hs-identifier hs-var">extra</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621685135314"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135314"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685135313"><span class="annot"><span class="annottext">Lens' v Coin
</span><a href="#local-6989586621685135313"><span class="hs-identifier hs-var">coinL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">compare</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135314"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-786"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">EQ</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135316"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-787"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">GT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.adjust</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; v
</span><a href="#local-6989586621685135311"><span class="hs-identifier hs-var">addextra</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135318"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135316"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-789"></span><span>      </span><span id="local-6989586621685135311"><span class="annot"><span class="annottext">addextra :: v -&gt; v
</span><a href="#local-6989586621685135311"><span class="hs-identifier hs-var hs-var">addextra</span></a></span></span><span> </span><span id="local-6989586621685135310"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135310"><span class="hs-identifier hs-var">outf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135310"><span class="hs-identifier hs-var">outf</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><a href="#local-6989586621685135313"><span class="hs-identifier hs-var">coinL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135310"><span class="hs-identifier hs-var">outf</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><a href="#local-6989586621685135313"><span class="hs-identifier hs-var">coinL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135315"><span class="hs-identifier hs-var">extra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>  </span><span class="annot"><span class="annottext">Ordering
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">LT</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-791"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135309"><span class="hs-identifier hs-var">ex</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-792"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.adjust</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; v
</span><a href="#local-6989586621685135308"><span class="hs-identifier hs-var">subextra</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135318"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135316"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-793"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall k v.
(Ord k, Show k) =&gt;
[k] -&gt; Map k v -&gt; Coin -&gt; Lens' v Coin -&gt; Maybe (Map k v)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustC"><span class="hs-identifier hs-var">adjustC</span></a></span><span> </span><span class="annot"><span class="annottext">[k]
</span><a href="#local-6989586621685135317"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.adjust</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; v
</span><a href="#local-6989586621685135308"><span class="hs-identifier hs-var">subextra</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135318"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135316"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135307"><span class="hs-identifier hs-var">amount</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><a href="#local-6989586621685135313"><span class="hs-identifier hs-var">coinL</span></a></span><span>
</span><span id="line-794"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-795"></span><span>      </span><span id="local-6989586621685135307"><span class="annot"><span class="annottext">amount :: Coin
</span><a href="#local-6989586621685135307"><span class="hs-identifier hs-var">amount</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621685135309"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621685135309"><span class="hs-identifier hs-var">ex</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135318"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
</span><a href="#local-6989586621685135316"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-796"></span><span>        </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621685135304"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135304"><span class="hs-identifier hs-var">outf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135304"><span class="hs-identifier hs-var">outf</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><a href="#local-6989586621685135313"><span class="hs-identifier hs-var">coinL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135315"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>        </span><span class="annot"><span class="annottext">Maybe v
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Collateral input: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621685135318"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot; is not found in UTxO in 'adjust'&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span>      </span><span id="local-6989586621685135308"><span class="annot"><span class="annottext">subextra :: v -&gt; v
</span><a href="#local-6989586621685135308"><span class="hs-identifier hs-var hs-var">subextra</span></a></span></span><span> </span><span id="local-6989586621685135303"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135303"><span class="hs-identifier hs-var">outf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135303"><span class="hs-identifier hs-var">outf</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><a href="#local-6989586621685135313"><span class="hs-identifier hs-var">coinL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">max</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin -&gt; Integer
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">unCoin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621685135303"><span class="hs-identifier hs-var">outf</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' v Coin
</span><a href="#local-6989586621685135313"><span class="hs-identifier hs-var">coinL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621685135315"><span class="hs-identifier hs-var">extra</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span id="local-6989586621685137381"><span id="local-6989586621685137382"><span id="local-6989586621685137383"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateVal"><span class="hs-identifier hs-type">updateVal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621685137383"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137382"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137383"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137381"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137383"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137382"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137381"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#Typed"><span class="hs-identifier hs-type">Typed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137381"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-801"></span><span id="updateVal"><span class="annot"><span class="annottext">updateVal :: forall a b era.
(a -&gt; b -&gt; a) -&gt; Term era a -&gt; b -&gt; Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateVal"><span class="hs-identifier hs-var hs-var">updateVal</span></a></span></span><span> </span><span id="local-6989586621685135296"><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621685135296"><span class="hs-identifier hs-var">adjust</span></a></span></span><span> </span><span id="local-6989586621685135295"><span class="annot"><span class="annottext">term :: Term era a
</span><a href="#local-6989586621685135295"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621685135294"><span class="annot"><span class="annottext">V era a
</span><a href="#local-6989586621685135294"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685135293"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621685135293"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span id="local-6989586621685135292"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135292"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-802"></span><span>  </span><span id="local-6989586621685135291"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685135291"><span class="hs-identifier hs-var">varV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135292"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135295"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-803"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; t -&gt; Env era -&gt; Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#storeVar"><span class="hs-identifier hs-var">storeVar</span></a></span><span> </span><span class="annot"><span class="annottext">V era a
</span><a href="#local-6989586621685135294"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621685135296"><span class="hs-identifier hs-var">adjust</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685135291"><span class="hs-identifier hs-var">varV</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621685135293"><span class="hs-identifier hs-var">delta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135292"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-804"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateVal"><span class="hs-identifier hs-var">updateVal</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135290"><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135290"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Env era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [TestName] -&gt; Typed a
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#failT"><span class="hs-identifier hs-var">failT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Non Var in updateVal: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135290"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span id="local-6989586621685137375"><span id="local-6989586621685137376"><span id="local-6989586621685137377"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTerm"><span class="hs-identifier hs-type">updateTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621685137377"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137376"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137377"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137375"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137377"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137375"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137376"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137375"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#Typed"><span class="hs-identifier hs-type">Typed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137375"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-807"></span><span id="updateTerm"><span class="annot"><span class="annottext">updateTerm :: forall a b era.
(a -&gt; b -&gt; a)
-&gt; Term era a -&gt; Term era b -&gt; Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTerm"><span class="hs-identifier hs-var hs-var">updateTerm</span></a></span></span><span> </span><span id="local-6989586621685135284"><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621685135284"><span class="hs-identifier hs-var">adjust</span></a></span></span><span> </span><span id="local-6989586621685135283"><span class="annot"><span class="annottext">term :: Term era a
</span><a href="#local-6989586621685135283"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621685135282"><span class="annot"><span class="annottext">V era a
</span><a href="#local-6989586621685135282"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685135281"><span class="annot"><span class="annottext">Term era b
</span><a href="#local-6989586621685135281"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span id="local-6989586621685135280"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135280"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-808"></span><span>  </span><span id="local-6989586621685135279"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685135279"><span class="hs-identifier hs-var">varV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135280"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135283"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-809"></span><span>  </span><span id="local-6989586621685135278"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621685135278"><span class="hs-identifier hs-var">deltaV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135280"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Term era b
</span><a href="#local-6989586621685135281"><span class="hs-identifier hs-var">delta</span></a></span><span>
</span><span id="line-810"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. V era t -&gt; t -&gt; Env era -&gt; Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#storeVar"><span class="hs-identifier hs-var">storeVar</span></a></span><span> </span><span class="annot"><span class="annottext">V era a
</span><a href="#local-6989586621685135282"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621685135284"><span class="hs-identifier hs-var">adjust</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685135279"><span class="hs-identifier hs-var">varV</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621685135278"><span class="hs-identifier hs-var">deltaV</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135280"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-811"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTerm"><span class="hs-identifier hs-var">updateTerm</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135277"><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135277"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term era b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Env era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [TestName] -&gt; Typed a
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#failT"><span class="hs-identifier hs-var">failT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Non Var in updateTerm: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135277"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span id="local-6989586621685137389"><span id="local-6989586621685137390"><span id="local-6989586621685137391"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTarget"><span class="hs-identifier hs-type">updateTarget</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621685137391"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137390"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137391"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137389"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137391"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Target"><span class="hs-identifier hs-type">Target</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137389"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137390"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137389"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Monad.html#Typed"><span class="hs-identifier hs-type">Typed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137389"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621685137390"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-814"></span><span id="updateTarget"><span class="annot"><span class="annottext">updateTarget :: forall a b era.
(a -&gt; b -&gt; a)
-&gt; Term era a -&gt; Target era b -&gt; Env era -&gt; Typed (Env era, b)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTarget"><span class="hs-identifier hs-var hs-var">updateTarget</span></a></span></span><span> </span><span id="local-6989586621685135272"><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621685135272"><span class="hs-identifier hs-var">adjust</span></a></span></span><span> </span><span id="local-6989586621685135271"><span class="annot"><span class="annottext">term :: Term era a
</span><a href="#local-6989586621685135271"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Ast.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621685135270"><span class="annot"><span class="annottext">V era a
</span><a href="#local-6989586621685135270"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685135269"><span class="annot"><span class="annottext">Target era b
</span><a href="#local-6989586621685135269"><span class="hs-identifier hs-var">delta</span></a></span></span><span> </span><span id="local-6989586621685135268"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135268"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-815"></span><span>  </span><span id="local-6989586621685135267"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685135267"><span class="hs-identifier hs-var">varV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135268"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135271"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-816"></span><span>  </span><span id="local-6989586621685135266"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621685135266"><span class="hs-identifier hs-var">deltaV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era x t. Env era -&gt; RootTarget era x t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTarget"><span class="hs-identifier hs-var">runTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135268"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Target era b
</span><a href="#local-6989586621685135269"><span class="hs-identifier hs-var">delta</span></a></span><span>
</span><span id="line-817"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; t -&gt; Env era -&gt; Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#storeVar"><span class="hs-identifier hs-var">storeVar</span></a></span><span> </span><span class="annot"><span class="annottext">V era a
</span><a href="#local-6989586621685135270"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621685135272"><span class="hs-identifier hs-var">adjust</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621685135267"><span class="hs-identifier hs-var">varV</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621685135266"><span class="hs-identifier hs-var">deltaV</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135268"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621685135266"><span class="hs-identifier hs-var">deltaV</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#updateTarget"><span class="hs-identifier hs-var">updateTarget</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135264"><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135264"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Target era b
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Env era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [TestName] -&gt; Typed a
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#failT"><span class="hs-identifier hs-var">failT</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Non Var in updateTarget: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Term era a
</span><a href="#local-6989586621685135264"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-819"></span><span>
</span><span id="line-820"></span><span id="local-6989586621685137388"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#override"><span class="hs-identifier hs-type">override</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621685137388"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137388"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621685137388"><span class="hs-identifier hs-type">x</span></a></span></span><span>
</span><span id="line-821"></span><span id="override"><span class="annot"><span class="annottext">override :: forall x. x -&gt; x -&gt; x
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#override"><span class="hs-identifier hs-var hs-var">override</span></a></span></span><span> </span><span class="annot"><span class="annottext">x
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135263"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621685135263"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621685135263"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-822"></span><span>
</span><span id="line-823"></span><span class="hs-comment">-- ========================================</span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span id="local-6989586621685137364"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#genTxAndLedger"><span class="hs-identifier hs-type">genTxAndLedger</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137364"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#UnivSize"><span class="hs-identifier hs-type">UnivSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137364"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137364"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137364"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137364"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-826"></span><span id="genTxAndLedger"><span class="annot"><span class="annottext">genTxAndLedger :: forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Gen (LedgerState era, Tx era, Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#genTxAndLedger"><span class="hs-identifier hs-var hs-var">genTxAndLedger</span></a></span></span><span> </span><span id="local-6989586621685135211"><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135211"><span class="hs-identifier hs-var">sizes</span></a></span></span><span> </span><span id="local-6989586621685135210"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-827"></span><span>  </span><span id="local-6989586621685135209"><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685135209"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-828"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#emptySubst"><span class="hs-identifier hs-var">emptySubst</span></a></span><span>
</span><span id="line-829"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html#pParamsStage"><span class="hs-identifier hs-var">pParamsStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-830"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#universeStage"><span class="hs-identifier hs-var">universeStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135211"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-831"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.UTxO.html#utxoStage"><span class="hs-identifier hs-var">utxoStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135211"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-832"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#vstateStage"><span class="hs-identifier hs-var">vstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-833"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#pstateStage"><span class="hs-identifier hs-var">pstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-834"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#dstateStage"><span class="hs-identifier hs-var">dstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-835"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html#certsStage"><span class="hs-identifier hs-var">certsStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135211"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-836"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html#ledgerStateStage"><span class="hs-identifier hs-var">ledgerStateStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135211"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-837"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyStage"><span class="hs-identifier hs-var">txBodyStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135211"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-838"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-839"></span><span>  </span><span id="local-6989586621685135206"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135206"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era -&gt; Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#substToEnv"><span class="hs-identifier hs-var">substToEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685135209"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#emptyEnv"><span class="hs-identifier hs-var">emptyEnv</span></a></span><span>
</span><span id="line-840"></span><span>  </span><span id="local-6989586621685135203"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135203"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustFeeInput"><span class="hs-identifier hs-var">adjustFeeInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135206"><span class="hs-identifier hs-var">env0</span></a></span><span>
</span><span id="line-841"></span><span>  </span><span id="local-6989586621685135202"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135202"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. HasCallStack =&gt; Typed t -&gt; t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#errorTyped"><span class="hs-identifier hs-var">errorTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Gen (Env era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustColInput"><span class="hs-identifier hs-var">adjustColInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135203"><span class="hs-identifier hs-var">env1</span></a></span><span>
</span><span id="line-842"></span><span>  </span><span id="local-6989586621685135201"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621685135201"><span class="hs-identifier hs-var">ledger</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era x t. Env era -&gt; RootTarget era x t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTarget"><span class="hs-identifier hs-var">runTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135202"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraGov era =&gt;
Proof era -&gt; RootTarget era (LedgerState era) (LedgerState era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#ledgerStateT"><span class="hs-identifier hs-var">ledgerStateT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135210"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135199"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685135199"><span class="hs-identifier hs-var">tx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txterm"><span class="hs-identifier hs-var">txterm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135202"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621685135201"><span class="hs-identifier hs-var">ledger</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685135199"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135202"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>
</span><span id="line-846"></span><span id="local-6989586621685137349"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#genTxAndNewEpoch"><span class="hs-identifier hs-type">genTxAndNewEpoch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137349"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#UnivSize"><span class="hs-identifier hs-type">UnivSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137349"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137349"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137349"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Env.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137349"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-847"></span><span id="genTxAndNewEpoch"><span class="annot"><span class="annottext">genTxAndNewEpoch :: forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Gen (NewEpochState era, Tx era, Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#genTxAndNewEpoch"><span class="hs-identifier hs-var hs-var">genTxAndNewEpoch</span></a></span></span><span> </span><span id="local-6989586621685135142"><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135142"><span class="hs-identifier hs-var">sizes</span></a></span></span><span> </span><span id="local-6989586621685135141"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-848"></span><span>  </span><span id="local-6989586621685135140"><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685135140"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-849"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#emptySubst"><span class="hs-identifier hs-var">emptySubst</span></a></span><span>
</span><span id="line-850"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html#pParamsStage"><span class="hs-identifier hs-var">pParamsStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-851"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#universeStage"><span class="hs-identifier hs-var">universeStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135142"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-852"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.UTxO.html#utxoStage"><span class="hs-identifier hs-var">utxoStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135142"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-853"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#vstateStage"><span class="hs-identifier hs-var">vstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-854"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#pstateStage"><span class="hs-identifier hs-var">pstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-855"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#dstateStage"><span class="hs-identifier hs-var">dstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-856"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html#certsStage"><span class="hs-identifier hs-var">certsStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135142"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-857"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html#ledgerStateStage"><span class="hs-identifier hs-var">ledgerStateStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135142"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-858"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyStage"><span class="hs-identifier hs-var">txBodyStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135142"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-859"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.NewEpochState.html#epochStateStage"><span class="hs-identifier hs-var">epochStateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-860"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.NewEpochState.html#newEpochStateStage"><span class="hs-identifier hs-var">newEpochStateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-861"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>  </span><span id="local-6989586621685135139"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135139"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era -&gt; Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#substToEnv"><span class="hs-identifier hs-var">substToEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685135140"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#emptyEnv"><span class="hs-identifier hs-var">emptyEnv</span></a></span><span>
</span><span id="line-863"></span><span>  </span><span id="local-6989586621685135138"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135138"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustFeeInput"><span class="hs-identifier hs-var">adjustFeeInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135139"><span class="hs-identifier hs-var">env0</span></a></span><span>
</span><span id="line-864"></span><span>  </span><span id="local-6989586621685135137"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135137"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. HasCallStack =&gt; Typed t -&gt; t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#errorTyped"><span class="hs-identifier hs-var">errorTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Gen (Env era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustColInput"><span class="hs-identifier hs-var">adjustColInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135138"><span class="hs-identifier hs-var">env1</span></a></span><span>
</span><span id="line-865"></span><span>  </span><span id="local-6989586621685135136"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621685135136"><span class="hs-identifier hs-var">newepochst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era x t. Env era -&gt; RootTarget era x t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTarget"><span class="hs-identifier hs-var">runTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135137"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraGov era =&gt;
Proof era -&gt; RootTarget era (NewEpochState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#newEpochStateT"><span class="hs-identifier hs-var">newEpochStateT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135141"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-866"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135134"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685135134"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txterm"><span class="hs-identifier hs-var">txterm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135137"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-867"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621685135136"><span class="hs-identifier hs-var">newepochst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685135134"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685135137"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-868"></span><span>
</span><span id="line-869"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demoTxNes"><span class="hs-identifier hs-type">demoTxNes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span id="demoTxNes"><span class="annot"><span class="annottext">demoTxNes :: IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demoTxNes"><span class="hs-identifier hs-var hs-var">demoTxNes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-871"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135132"><span class="annot"><span class="annottext">proof :: Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135132"><span class="hs-identifier hs-var hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Conway"><span class="hs-identifier hs-var">Conway</span></a></span><span>
</span><span id="line-872"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621685135131"><span class="annot"><span class="annottext">NewEpochState (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135131"><span class="hs-identifier hs-var">nes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135130"><span class="annot"><span class="annottext">AlonzoTx (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135130"><span class="hs-identifier hs-var">_tx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135129"><span class="annot"><span class="annottext">Env (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135129"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Gen a -&gt; IO a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">generate</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Gen (NewEpochState era, Tx era, Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#genTxAndNewEpoch"><span class="hs-identifier hs-var">genTxAndNewEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135132"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-873"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Proof era -&gt; NewEpochState era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#psNewEpochState"><span class="hs-identifier hs-var">psNewEpochState</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135132"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135131"><span class="hs-identifier hs-var">nes</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span>  </span><span id="local-6989586621685135126"><span class="annot"><span class="annottext">Map (KeyHash 'StakePool StandardCrypto) (PoolParams StandardCrypto)
</span><a href="#local-6989586621685135126"><span class="hs-identifier hs-var">pools</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135129"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (KeyHash 'StakePool (EraCrypto era)) (PoolParams (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#regPools"><span class="hs-identifier hs-var">regPools</span></a></span><span>
</span><span id="line-875"></span><span>  </span><span id="local-6989586621685135125"><span class="annot"><span class="annottext">Map
  (Credential 'Staking StandardCrypto)
  (KeyHash 'StakePool StandardCrypto)
</span><a href="#local-6989586621685135125"><span class="hs-identifier hs-var">deleg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135129"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term
  era
  (Map
     (Credential 'Staking (EraCrypto era))
     (KeyHash 'StakePool (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#delegations"><span class="hs-identifier hs-var">delegations</span></a></span><span>
</span><span id="line-876"></span><span>  </span><span id="local-6989586621685135123"><span class="annot"><span class="annottext">Map (Credential 'Staking StandardCrypto) Coin
</span><a href="#local-6989586621685135123"><span class="hs-identifier hs-var">stak</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135129"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Term era (Map (Credential 'Staking (EraCrypto era)) Coin)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#incrementalStake"><span class="hs-identifier hs-var">incrementalStake</span></a></span><span>
</span><span id="line-877"></span><span>  </span><span class="annot"><span class="annottext">forall ann. Doc ann -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#putDoc"><span class="hs-identifier hs-var">putDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. TestName -&gt; Doc a
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppString"><span class="hs-identifier hs-var">ppString</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\nPool &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. PrettyA t =&gt; t -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool StandardCrypto) (PoolParams StandardCrypto)
</span><a href="#local-6989586621685135126"><span class="hs-identifier hs-var">pools</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>  </span><span class="annot"><span class="annottext">forall ann. Doc ann -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#putDoc"><span class="hs-identifier hs-var">putDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. TestName -&gt; Doc a
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppString"><span class="hs-identifier hs-var">ppString</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\nDeleg &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. PrettyA t =&gt; t -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'Staking StandardCrypto)
  (KeyHash 'StakePool StandardCrypto)
</span><a href="#local-6989586621685135125"><span class="hs-identifier hs-var">deleg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span>  </span><span class="annot"><span class="annottext">forall ann. Doc ann -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#putDoc"><span class="hs-identifier hs-var">putDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. TestName -&gt; Doc a
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppString"><span class="hs-identifier hs-var">ppString</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\nStake &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. PrettyA t =&gt; t -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking StandardCrypto) Coin
</span><a href="#local-6989586621685135123"><span class="hs-identifier hs-var">stak</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-880"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135120"><span class="annot"><span class="annottext">distr :: PoolDistr StandardCrypto
</span><a href="#local-6989586621685135120"><span class="hs-identifier hs-var hs-var">distr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-881"></span><span>        </span><span class="annot"><span class="annottext">forall c. SnapShot c -&gt; PoolDistr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">calculatePoolDistr</span></a></span><span>
</span><span id="line-882"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall c.
Stake c
-&gt; VMap VB VB (Credential 'Staking c) (KeyHash 'StakePool c)
-&gt; VMap VB VB (KeyHash 'StakePool c) (PoolParams c)
-&gt; SnapShot c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">SnapShot</span></a></span><span>
</span><span id="line-883"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c.
VMap VB VP (Credential 'Staking c) (CompactForm Coin) -&gt; Stake c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Stake</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (kv :: * -&gt; *) k (vv :: * -&gt; *) v.
(Vector kv k, Vector vv v) =&gt;
Map k v -&gt; VMap kv vv k v
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/vector-map-1.1.0.0/doc/html/vector-map/src"><span class="hs-identifier hs-var">VMap.fromMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.map</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Coin -&gt; CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">UMap.compactCoinOrError</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking StandardCrypto) Coin
</span><a href="#local-6989586621685135123"><span class="hs-identifier hs-var">stak</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-884"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (kv :: * -&gt; *) k (vv :: * -&gt; *) v.
(Vector kv k, Vector vv v) =&gt;
Map k v -&gt; VMap kv vv k v
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/vector-map-1.1.0.0/doc/html/vector-map/src"><span class="hs-identifier hs-var">VMap.fromMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'Staking StandardCrypto)
  (KeyHash 'StakePool StandardCrypto)
</span><a href="#local-6989586621685135125"><span class="hs-identifier hs-var">deleg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-885"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (kv :: * -&gt; *) k (vv :: * -&gt; *) v.
(Vector kv k, Vector vv v) =&gt;
Map k v -&gt; VMap kv vv k v
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/vector-map-1.1.0.0/doc/html/vector-map/src"><span class="hs-identifier hs-var">VMap.fromMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'StakePool StandardCrypto) (PoolParams StandardCrypto)
</span><a href="#local-6989586621685135126"><span class="hs-identifier hs-var">pools</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>  </span><span class="annot"><span class="annottext">forall ann. Doc ann -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#putDoc"><span class="hs-identifier hs-var">putDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. TestName -&gt; Doc a
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppString"><span class="hs-identifier hs-var">ppString</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;\nPoolDistr &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. PrettyA t =&gt; t -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">PoolDistr StandardCrypto
</span><a href="#local-6989586621685135120"><span class="hs-identifier hs-var">distr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-888"></span><span>  </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Env era -&gt; TestName -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#goRepl"><span class="hs-identifier hs-var">goRepl</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135132"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Env (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135129"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-889"></span><span>
</span><span id="line-890"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demoTx"><span class="hs-identifier hs-type">demoTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-891"></span><span id="demoTx"><span class="annot"><span class="annottext">demoTx :: IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demoTx"><span class="hs-identifier hs-var hs-var">demoTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-892"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135114"><span class="annot"><span class="annottext">proof :: Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135114"><span class="hs-identifier hs-var hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Conway"><span class="hs-identifier hs-var">Conway</span></a></span><span>
</span><span id="line-893"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621685135113"><span class="annot"><span class="annottext">LedgerState (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135113"><span class="hs-identifier hs-var">ls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135112"><span class="annot"><span class="annottext">AlonzoTx (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135112"><span class="hs-identifier hs-var">tx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135111"><span class="annot"><span class="annottext">Env (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135111"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Gen a -&gt; IO a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">generate</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Gen (LedgerState era, Tx era, Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#genTxAndLedger"><span class="hs-identifier hs-var">genTxAndLedger</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135114"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-894"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Proof era -&gt; LedgerState era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcLedgerState"><span class="hs-identifier hs-var">pcLedgerState</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135114"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135113"><span class="hs-identifier hs-var">ls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-895"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Tx era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTx"><span class="hs-identifier hs-var">pcTx</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135114"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">AlonzoTx (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135112"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>  </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Env era -&gt; TestName -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#goRepl"><span class="hs-identifier hs-var">goRepl</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135114"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Env (ConwayEra StandardCrypto)
</span><a href="#local-6989586621685135111"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-897"></span><span>
</span><span id="line-898"></span><span class="hs-comment">-- ================================================================</span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#gone"><span class="hs-identifier hs-type">gone</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span id="gone"><span class="annot"><span class="annottext">gone :: Gen (IO ())
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#gone"><span class="hs-identifier hs-var hs-var">gone</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-902"></span><span>  </span><span id="local-6989586621685135109"><span class="annot"><span class="annottext">TxIx
</span><a href="#local-6989586621685135109"><span class="hs-identifier hs-var">txIx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Arbitrary a =&gt; Gen a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-903"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135107"><span class="annot"><span class="annottext">proof :: Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135107"><span class="hs-identifier hs-var hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span>
</span><span id="line-904"></span><span>      </span><span id="local-6989586621685135105"><span class="annot"><span class="annottext">sizes :: UnivSize
</span><a href="#local-6989586621685135105"><span class="hs-identifier hs-var hs-var">sizes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-905"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621685135104"><span class="annot"><span class="annottext">LedgerState (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135104"><span class="hs-identifier hs-var">ledgerstate</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135103"><span class="annot"><span class="annottext">AlonzoTx (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135103"><span class="hs-identifier hs-var">tx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685135102"><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135102"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Gen (LedgerState era, Tx era, Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#genTxAndLedger"><span class="hs-identifier hs-var">genTxAndLedger</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685135105"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135107"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-906"></span><span>  </span><span id="local-6989586621685135101"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621685135101"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era SlotNo
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#currentSlot"><span class="hs-identifier hs-var">currentSlot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135102"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685135100"><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135100"><span class="hs-identifier hs-var">pp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Proof era -&gt; Term era (PParamsF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#pparams"><span class="hs-identifier hs-var">pparams</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135107"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135102"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>  </span><span id="local-6989586621685135099"><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621685135099"><span class="hs-identifier hs-var">accntState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era x t. Env era -&gt; RootTarget era x t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTarget"><span class="hs-identifier hs-var">runTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135102"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; RootTarget era AccountState AccountState
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#accountStateT"><span class="hs-identifier hs-var">accountStateT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-909"></span><span>  </span><span id="local-6989586621685135097"><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF (BabbageEra StandardCrypto))
</span><a href="#local-6989586621685135097"><span class="hs-identifier hs-var">utxo1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135107"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135102"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-910"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685135096"><span class="annot"><span class="annottext">lenv :: LedgerEnv (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135096"><span class="hs-identifier hs-var hs-var">lenv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
SlotNo -&gt; TxIx -&gt; PParams era -&gt; AccountState -&gt; LedgerEnv era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">LedgerEnv</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621685135101"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx
</span><a href="#local-6989586621685135109"><span class="hs-identifier hs-var">txIx</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135100"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621685135099"><span class="hs-identifier hs-var">accntState</span></a></span><span>
</span><span id="line-911"></span><span>  </span><span class="hs-comment">-- putStrLn (show (pcTx Babbage tx))</span><span>
</span><span id="line-912"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; RuleContext 'Transition (EraRule &quot;LEDGER&quot; era)
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
     (State (EraRule &quot;LEDGER&quot; era))
</span><a href="Test.Cardano.Ledger.Generic.TxGen.html#applySTSByProof"><span class="hs-identifier hs-var">applySTSByProof</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135107"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerEnv (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135096"><span class="hs-identifier hs-var">lenv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LedgerState (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135104"><span class="hs-identifier hs-var">ledgerstate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AlonzoTx (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135103"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-913"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621685135093"><span class="annot"><span class="annottext">State (EraRule &quot;LEDGER&quot; (BabbageEra StandardCrypto))
</span><a href="#local-6989586621685135093"><span class="hs-identifier hs-var">_ledgerState'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-914"></span><span>      </span><span class="hs-comment">-- putStrLn (show (pcTx Babbage tx))</span><span>
</span><span id="line-915"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SUCCESS&quot;</span></span><span>
</span><span id="line-916"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621685135092"><span class="annot"><span class="annottext">NonEmpty
  (PredicateFailure (EraRule &quot;LEDGER&quot; (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621685135092"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-917"></span><span>      </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;FAIL&quot;</span></span><span>
</span><span id="line-918"></span><span>      </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">print</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; Tx era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTx"><span class="hs-identifier hs-var">pgenTx</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135107"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF (BabbageEra StandardCrypto))
</span><a href="#local-6989586621685135097"><span class="hs-identifier hs-var">utxo1</span></a></span><span> </span><span class="annot"><span class="annottext">AlonzoTx (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135103"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-919"></span><span>      </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">print</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. PrettyA t =&gt; t -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty
  (PredicateFailure (EraRule &quot;LEDGER&quot; (BabbageEra StandardCrypto)))
</span><a href="#local-6989586621685135092"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-920"></span><span>      </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Env era -&gt; TestName -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#goRepl"><span class="hs-identifier hs-var">goRepl</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685135102"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#test"><span class="hs-identifier hs-type">test</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-923"></span><span id="test"><span class="annot"><span class="annottext">test :: Maybe Int -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#test"><span class="hs-identifier hs-var hs-var">test</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621685135089"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135089"><span class="hs-identifier hs-var">seed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621685135088"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621685135088"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; Gen a -&gt; IO a
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#generateWithSeed"><span class="hs-identifier hs-var">generateWithSeed</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135089"><span class="hs-identifier hs-var">seed</span></a></span><span> </span><span class="annot"><span class="annottext">Gen (IO ())
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#gone"><span class="hs-identifier hs-var">gone</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621685135088"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-924"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#test"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-925"></span><span>  </span><span id="local-6989586621685135087"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135087"><span class="hs-identifier hs-var">seed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Gen a -&gt; IO a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">generate</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Arbitrary a =&gt; Gen a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-926"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;SEED = &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135087"><span class="hs-identifier hs-var">seed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-927"></span><span>  </span><span id="local-6989586621685135086"><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621685135086"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; Gen a -&gt; IO a
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#generateWithSeed"><span class="hs-identifier hs-var">generateWithSeed</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135087"><span class="hs-identifier hs-var">seed</span></a></span><span> </span><span class="annot"><span class="annottext">Gen (IO ())
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#gone"><span class="hs-identifier hs-var">gone</span></a></span><span>
</span><span id="line-928"></span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621685135086"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-929"></span><span>
</span><span id="line-930"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bad"><span class="hs-identifier hs-type">bad</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-931"></span><span id="bad"><span class="annot"><span class="annottext">bad :: [Int]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bad"><span class="hs-identifier hs-var hs-var">bad</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- [3, 8, 13, 41, 50, 60, 65, 82, 99, 100, 109, 112]</span><span>
</span><span id="line-932"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#go"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-933"></span><span id="go"><span class="annot"><span class="annottext">go :: Int -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#go"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621685135083"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135083"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">print</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135081"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#test"><span class="hs-identifier hs-var">test</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135081"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621685135081"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135081"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135083"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">113</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">elem</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621685135081"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#bad"><span class="hs-identifier hs-var">bad</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span class="hs-comment">-- ========================================</span><span>
</span><span id="line-936"></span><span>
</span><span id="line-937"></span><span class="hs-comment">-- ==============================</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span class="hs-comment">-- | Pretty print the fields of a Randomly generated TxBody, except resolve the</span><span>
</span><span id="line-940"></span><span class="hs-comment">--   inputs with the given Ut map.</span><span>
</span><span id="line-941"></span><span id="local-6989586621685137308"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxBodyField"><span class="hs-identifier hs-type">pgenTxBodyField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-942"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137308"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-943"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137308"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-944"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137308"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137308"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-945"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#TxBodyField"><span class="hs-identifier hs-type">TxBodyField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137308"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-946"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PDoc"><span class="hs-identifier hs-type">PDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-947"></span><span id="pgenTxBodyField"><span class="annot"><span class="annottext">pgenTxBodyField :: forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyField era
-&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxBodyField"><span class="hs-identifier hs-var hs-var">pgenTxBodyField</span></a></span></span><span> </span><span id="local-6989586621685135068"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135068"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685135067"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135067"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span id="local-6989586621685135066"><span class="annot"><span class="annottext">TxBodyField era
</span><a href="#local-6989586621685135066"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxBodyField era
</span><a href="#local-6989586621685135066"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-948"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#Inputs"><span class="hs-identifier hs-type">Inputs</span></a></span><span> </span><span id="local-6989586621685135064"><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685135064"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;spend inputs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxoDoc"><span class="hs-identifier hs-var">pcUtxoDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; Map k a -&gt; Set k -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.restrictKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135067"><span class="hs-identifier hs-var">ut</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685135064"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-949"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#Collateral"><span class="hs-identifier hs-type">Collateral</span></a></span><span> </span><span id="local-6989586621685135061"><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685135061"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;coll inputs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxoDoc"><span class="hs-identifier hs-var">pcUtxoDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; Map k a -&gt; Set k -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.restrictKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135067"><span class="hs-identifier hs-var">ut</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685135061"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-950"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#RefInputs"><span class="hs-identifier hs-type">RefInputs</span></a></span><span> </span><span id="local-6989586621685135059"><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685135059"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;ref inputs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcUtxoDoc"><span class="hs-identifier hs-var">pcUtxoDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; Map k a -&gt; Set k -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.restrictKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135067"><span class="hs-identifier hs-var">ut</span></a></span><span> </span><span class="annot"><span class="annottext">Set (TxIn (EraCrypto era))
</span><a href="#local-6989586621685135059"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-951"></span><span>  </span><span id="local-6989586621685135058"><span class="annot"><span class="annottext">TxBodyField era
</span><a href="#local-6989586621685135058"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; TxBodyField era -&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxBodyField"><span class="hs-identifier hs-var">pcTxBodyField</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135068"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyField era
</span><a href="#local-6989586621685135058"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-952"></span><span>
</span><span id="line-953"></span><span id="local-6989586621685137301"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxBody"><span class="hs-identifier hs-type">pgenTxBody</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-954"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137301"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137301"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137301"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137301"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137301"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PDoc"><span class="hs-identifier hs-type">PDoc</span></a></span></span><span>
</span><span id="line-955"></span><span id="pgenTxBody"><span class="annot"><span class="annottext">pgenTxBody :: forall era.
Reflect era =&gt;
Proof era
-&gt; TxBody era -&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxBody"><span class="hs-identifier hs-var hs-var">pgenTxBody</span></a></span></span><span> </span><span id="local-6989586621685135049"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135049"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685135048"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685135048"><span class="hs-identifier hs-var">txBody</span></a></span></span><span> </span><span id="local-6989586621685135047"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135047"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [(Text, PDoc)] -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppRecord"><span class="hs-identifier hs-var">ppRecord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TxBody &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135049"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, PDoc)]
</span><a href="#local-6989586621685135046"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-956"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-957"></span><span>    </span><span id="local-6989586621685135045"><span class="annot"><span class="annottext">fields :: [TxBodyField era]
</span><a href="#local-6989586621685135045"><span class="hs-identifier hs-var hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; TxBody era -&gt; [TxBodyField era]
</span><a href="Test.Cardano.Ledger.Generic.Fields.html#abstractTxBody"><span class="hs-identifier hs-var">abstractTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135049"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685135048"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-958"></span><span>    </span><span id="local-6989586621685135046"><span class="annot"><span class="annottext">pairs :: [(Text, PDoc)]
</span><a href="#local-6989586621685135046"><span class="hs-identifier hs-var hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyField era
-&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxBodyField"><span class="hs-identifier hs-var">pgenTxBodyField</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135049"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135047"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxBodyField era]
</span><a href="#local-6989586621685135045"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-959"></span><span>
</span><span id="line-960"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxField"><span class="hs-identifier hs-type">pgenTxField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-961"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621685137294"><span class="annot"><a href="#local-6989586621685137294"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-962"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137294"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-963"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137294"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-964"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137294"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137294"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-965"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#TxField"><span class="hs-identifier hs-type">TxField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137294"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-966"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PDoc"><span class="hs-identifier hs-type">PDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-967"></span><span id="pgenTxField"><span class="annot"><span class="annottext">pgenTxField :: forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxField era
-&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxField"><span class="hs-identifier hs-var hs-var">pgenTxField</span></a></span></span><span> </span><span id="local-6989586621685135024"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135024"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685135023"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135023"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span id="local-6989586621685135022"><span class="annot"><span class="annottext">TxField era
</span><a href="#local-6989586621685135022"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxField era
</span><a href="#local-6989586621685135022"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-968"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span id="local-6989586621685135020"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685135020"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;txbody hash&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall c index. SafeHash c index -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppSafeHash"><span class="hs-identifier hs-var">ppSafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685135020"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; TxBody era -&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxBody"><span class="hs-identifier hs-var">pgenTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135024"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621685135020"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135023"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-969"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Fields.html#BodyI"><span class="hs-identifier hs-type">BodyI</span></a></span><span> </span><span id="local-6989586621685135018"><span class="annot"><span class="annottext">[TxBodyField era]
</span><a href="#local-6989586621685135018"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;body&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [(Text, PDoc)] -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppRecord"><span class="hs-identifier hs-var">ppRecord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;TxBody&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxBodyField era
-&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxBodyField"><span class="hs-identifier hs-var">pgenTxBodyField</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135024"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135023"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxBodyField era]
</span><a href="#local-6989586621685135018"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-970"></span><span>  </span><span id="local-6989586621685135016"><span class="annot"><span class="annottext">TxField era
</span><a href="#local-6989586621685135016"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; TxField era -&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#pcTxField"><span class="hs-identifier hs-var">pcTxField</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135024"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">TxField era
</span><a href="#local-6989586621685135022"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-971"></span><span>
</span><span id="line-972"></span><span id="local-6989586621685137316"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTx"><span class="hs-identifier hs-type">pgenTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137316"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137316"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137316"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-type">TxOutF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137316"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137316"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PDoc"><span class="hs-identifier hs-type">PDoc</span></a></span></span><span>
</span><span id="line-973"></span><span id="pgenTx"><span class="annot"><span class="annottext">pgenTx :: forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; Tx era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTx"><span class="hs-identifier hs-var hs-var">pgenTx</span></a></span></span><span> </span><span id="local-6989586621685135012"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135012"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span id="local-6989586621685135011"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135011"><span class="hs-identifier hs-var">ut</span></a></span></span><span> </span><span id="local-6989586621685135010"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685135010"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [(Text, PDoc)] -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppRecord"><span class="hs-identifier hs-var">ppRecord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Tx&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, PDoc)]
</span><a href="#local-6989586621685135009"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-974"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-975"></span><span>    </span><span id="local-6989586621685135008"><span class="annot"><span class="annottext">fields :: [TxField era]
</span><a href="#local-6989586621685135008"><span class="hs-identifier hs-var hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Tx era -&gt; [TxField era]
</span><a href="Test.Cardano.Ledger.Generic.Fields.html#abstractTx"><span class="hs-identifier hs-var">abstractTx</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135012"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685135010"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-976"></span><span>    </span><span id="local-6989586621685135009"><span class="annot"><span class="annottext">pairs :: [(Text, PDoc)]
</span><a href="#local-6989586621685135009"><span class="hs-identifier hs-var hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxField era
-&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxField"><span class="hs-identifier hs-var">pgenTxField</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685135012"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOutF era)
</span><a href="#local-6989586621685135011"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxField era]
</span><a href="#local-6989586621685135008"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-977"></span><span>
</span><span id="line-978"></span><span id="local-6989586621685137284"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcTxWithUTxO"><span class="hs-identifier hs-type">pcTxWithUTxO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137284"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137284"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137284"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137284"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#PDoc"><span class="hs-identifier hs-type">PDoc</span></a></span></span><span>
</span><span id="line-979"></span><span id="pcTxWithUTxO"><span class="annot"><span class="annottext">pcTxWithUTxO :: forall era. Reflect era =&gt; Proof era -&gt; UTxO era -&gt; Tx era -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pcTxWithUTxO"><span class="hs-identifier hs-var hs-var">pcTxWithUTxO</span></a></span></span><span> </span><span id="local-6989586621685134999"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134999"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span id="local-6989586621685134997"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOut era)
</span><a href="#local-6989586621685134997"><span class="hs-identifier hs-var">ut</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621685134996"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685134996"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [(Text, PDoc)] -&gt; PDoc
</span><a href="Test.Cardano.Ledger.Generic.PrettyCore.html#ppRecord"><span class="hs-identifier hs-var">ppRecord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; Text
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Tx&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Text, PDoc)]
</span><a href="#local-6989586621685134995"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-980"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-981"></span><span>    </span><span id="local-6989586621685134994"><span class="annot"><span class="annottext">fields :: [TxField era]
</span><a href="#local-6989586621685134994"><span class="hs-identifier hs-var hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Tx era -&gt; [TxField era]
</span><a href="Test.Cardano.Ledger.Generic.Fields.html#abstractTx"><span class="hs-identifier hs-var">abstractTx</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134999"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685134996"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-982"></span><span>    </span><span id="local-6989586621685134995"><span class="annot"><span class="annottext">pairs :: [(Text, PDoc)]
</span><a href="#local-6989586621685134995"><span class="hs-identifier hs-var hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era
-&gt; Map (TxIn (EraCrypto era)) (TxOutF era)
-&gt; TxField era
-&gt; [(Text, PDoc)]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#pgenTxField"><span class="hs-identifier hs-var">pgenTxField</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134999"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Proof era -&gt; TxOut era -&gt; TxOutF era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxOutF"><span class="hs-identifier hs-var">TxOutF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134999"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOut era)
</span><a href="#local-6989586621685134997"><span class="hs-identifier hs-var">ut</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxField era]
</span><a href="#local-6989586621685134994"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-983"></span><span>
</span><span id="line-984"></span><span class="hs-comment">-- =================================================</span><span>
</span><span id="line-985"></span><span class="hs-comment">-- Demos and Tests</span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span id="local-6989586621685137278"><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#oneTest"><span class="hs-identifier hs-type">oneTest</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-988"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Reflect"><span class="hs-identifier hs-type">Reflect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-989"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-990"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-991"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-992"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.15.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-994"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#UnivSize"><span class="hs-identifier hs-type">UnivSize</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-995"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Generic.Proof.html#Proof"><span class="hs-identifier hs-type">Proof</span></a></span><span> </span><span class="annot"><a href="#local-6989586621685137278"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-996"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-type">Property</span></a></span></span><span>
</span><span id="line-997"></span><span id="oneTest"><span class="annot"><span class="annottext">oneTest :: forall era.
(Reflect era, Environment (EraRule &quot;LEDGER&quot; era) ~ LedgerEnv era,
 State (EraRule &quot;LEDGER&quot; era) ~ LedgerState era,
 Signal (EraRule &quot;LEDGER&quot; era) ~ Tx era,
 Show (PredicateFailure (EraRule &quot;LEDGER&quot; era))) =&gt;
UnivSize -&gt; Proof era -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#oneTest"><span class="hs-identifier hs-var hs-var">oneTest</span></a></span></span><span> </span><span id="local-6989586621685134902"><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134902"><span class="hs-identifier hs-var">sizes</span></a></span></span><span> </span><span id="local-6989586621685134901"><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-998"></span><span>  </span><span id="local-6989586621685134900"><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685134900"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-999"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#emptySubst"><span class="hs-identifier hs-var">emptySubst</span></a></span><span>
</span><span id="line-1000"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html#pParamsStage"><span class="hs-identifier hs-var">pParamsStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1001"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#universeStage"><span class="hs-identifier hs-var">universeStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134902"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1002"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.UTxO.html#utxoStage"><span class="hs-identifier hs-var">utxoStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134902"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1003"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#vstateStage"><span class="hs-identifier hs-var">vstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1004"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#pstateStage"><span class="hs-identifier hs-var">pstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1005"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#dstateStage"><span class="hs-identifier hs-var">dstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1006"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html#certsStage"><span class="hs-identifier hs-var">certsStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134902"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1007"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html#ledgerStateStage"><span class="hs-identifier hs-var">ledgerStateStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134902"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1008"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyStage"><span class="hs-identifier hs-var">txBodyStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134902"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1009"></span><span>  </span><span id="local-6989586621685134899"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134899"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era -&gt; Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#substToEnv"><span class="hs-identifier hs-var">substToEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Subst era
</span><a href="#local-6989586621685134900"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#emptyEnv"><span class="hs-identifier hs-var">emptyEnv</span></a></span><span>
</span><span id="line-1010"></span><span>  </span><span id="local-6989586621685134898"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134898"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustFeeInput"><span class="hs-identifier hs-var">adjustFeeInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134899"><span class="hs-identifier hs-var">env0</span></a></span><span>
</span><span id="line-1011"></span><span>  </span><span id="local-6989586621685134897"><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134897"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall t. HasCallStack =&gt; Typed t -&gt; t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#errorTyped"><span class="hs-identifier hs-var">errorTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Gen (Env era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustColInput"><span class="hs-identifier hs-var">adjustColInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134898"><span class="hs-identifier hs-var">env1</span></a></span><span>
</span><span id="line-1012"></span><span>  </span><span id="local-6989586621685134896"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621685134896"><span class="hs-identifier hs-var">ledgerstate</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era x t. Env era -&gt; RootTarget era x t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTarget"><span class="hs-identifier hs-var">runTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134897"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraGov era =&gt;
Proof era -&gt; RootTarget era (LedgerState era) (LedgerState era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#ledgerStateT"><span class="hs-identifier hs-var">ledgerStateT</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxF"><span class="hs-identifier hs-type">TxF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685134895"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685134895"><span class="hs-identifier hs-var">tx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134897"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txterm"><span class="hs-identifier hs-var">txterm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>
</span><span id="line-1015"></span><span>  </span><span id="local-6989586621685134894"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621685134894"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134897"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era SlotNo
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#currentSlot"><span class="hs-identifier hs-var">currentSlot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1016"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685134893"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685134893"><span class="hs-identifier hs-var">pp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Env era -&gt; Term era t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTerm"><span class="hs-identifier hs-var">runTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134897"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Proof era -&gt; Term era (PParamsF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#pparams"><span class="hs-identifier hs-var">pparams</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1017"></span><span>  </span><span id="local-6989586621685134892"><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621685134892"><span class="hs-identifier hs-var">accntState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era x t. Env era -&gt; RootTarget era x t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTarget"><span class="hs-identifier hs-var">runTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134897"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; RootTarget era AccountState AccountState
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#accountStateT"><span class="hs-identifier hs-var">accountStateT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1018"></span><span>  </span><span id="local-6989586621685134891"><span class="annot"><span class="annottext">TxIx
</span><a href="#local-6989586621685134891"><span class="hs-identifier hs-var">txIx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Arbitrary a =&gt; Gen a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-1019"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685134890"><span class="annot"><span class="annottext">lenv :: LedgerEnv era
</span><a href="#local-6989586621685134890"><span class="hs-identifier hs-var hs-var">lenv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
SlotNo -&gt; TxIx -&gt; PParams era -&gt; AccountState -&gt; LedgerEnv era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">LedgerEnv</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621685134894"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="annot"><span class="annottext">TxIx
</span><a href="#local-6989586621685134891"><span class="hs-identifier hs-var">txIx</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621685134893"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">AccountState
</span><a href="#local-6989586621685134892"><span class="hs-identifier hs-var">accntState</span></a></span><span>
</span><span id="line-1020"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era
-&gt; RuleContext 'Transition (EraRule &quot;LEDGER&quot; era)
-&gt; Either
     (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
     (State (EraRule &quot;LEDGER&quot; era))
</span><a href="Test.Cardano.Ledger.Generic.TxGen.html#applySTSByProof"><span class="hs-identifier hs-var">applySTSByProof</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerEnv era
</span><a href="#local-6989586621685134890"><span class="hs-identifier hs-var">lenv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621685134896"><span class="hs-identifier hs-var">ledgerstate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621685134895"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1021"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621685134889"><span class="annot"><span class="annottext">State (EraRule &quot;LEDGER&quot; era)
</span><a href="#local-6989586621685134889"><span class="hs-identifier hs-var">ledgerState'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. TotalAda t =&gt; t -&gt; Coin
</span><a href="Test.Cardano.Ledger.Generic.Functions.html#totalAda"><span class="hs-identifier hs-var">totalAda</span></a></span><span> </span><span class="annot"><span class="annottext">State (EraRule &quot;LEDGER&quot; era)
</span><a href="#local-6989586621685134889"><span class="hs-identifier hs-var">ledgerState'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (Eq a, Show a) =&gt; a -&gt; a -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-operator hs-var">===</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. TotalAda t =&gt; t -&gt; Coin
</span><a href="Test.Cardano.Ledger.Generic.Functions.html#totalAda"><span class="hs-identifier hs-var">totalAda</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621685134896"><span class="hs-identifier hs-var">ledgerstate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1022"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621685134887"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621685134887"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1023"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685134886"><span class="annot"><span class="annottext">msg :: TestName
</span><a href="#local-6989586621685134886"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TestName] -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;applySTS fails&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621685134887"><span class="hs-identifier hs-var">errs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1024"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1025"></span><span>        </span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; IO () -&gt; prop -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">whenFail</span></a></span><span>
</span><span id="line-1026"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621685134886"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Proof era -&gt; Env era -&gt; TestName -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#goRepl"><span class="hs-identifier hs-var">goRepl</span></a></span><span> </span><span class="annot"><span class="annottext">Proof era
</span><a href="#local-6989586621685134901"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Env era
</span><a href="#local-6989586621685134897"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1027"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; TestName -&gt; prop -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">counterexample</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621685134886"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1028"></span><span>
</span><span id="line-1029"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#main1"><span class="hs-identifier hs-type">main1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1030"></span><span id="main1"><span class="annot"><span class="annottext">main1 :: IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#main1"><span class="hs-identifier hs-var hs-var">main1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; prop -&gt; IO ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">quickCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; Int -&gt; prop -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">withMaxSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(Reflect era, Environment (EraRule &quot;LEDGER&quot; era) ~ LedgerEnv era,
 State (EraRule &quot;LEDGER&quot; era) ~ LedgerState era,
 Signal (EraRule &quot;LEDGER&quot; era) ~ Tx era,
 Show (PredicateFailure (EraRule &quot;LEDGER&quot; era))) =&gt;
UnivSize -&gt; Proof era -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#oneTest"><span class="hs-identifier hs-var">oneTest</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1031"></span><span>
</span><span id="line-1032"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#main2"><span class="hs-identifier hs-type">main2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1033"></span><span id="main2"><span class="annot"><span class="annottext">main2 :: IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#main2"><span class="hs-identifier hs-var hs-var">main2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; prop -&gt; IO ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">quickCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; Int -&gt; prop -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">withMaxSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(Reflect era, Environment (EraRule &quot;LEDGER&quot; era) ~ LedgerEnv era,
 State (EraRule &quot;LEDGER&quot; era) ~ LedgerState era,
 Signal (EraRule &quot;LEDGER&quot; era) ~ Tx era,
 Show (PredicateFailure (EraRule &quot;LEDGER&quot; era))) =&gt;
UnivSize -&gt; Proof era -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#oneTest"><span class="hs-identifier hs-var">oneTest</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ShelleyEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Shelley"><span class="hs-identifier hs-var">Shelley</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demo"><span class="hs-identifier hs-type">demo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#ReplMode"><span class="hs-identifier hs-type">ReplMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1036"></span><span id="demo"><span class="annot"><span class="annottext">demo :: ReplMode -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demo"><span class="hs-identifier hs-var hs-var">demo</span></a></span></span><span> </span><span id="local-6989586621685134877"><span class="annot"><span class="annottext">ReplMode
</span><a href="#local-6989586621685134877"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1037"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685134876"><span class="annot"><span class="annottext">proof :: Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var hs-var">proof</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span>
</span><span id="line-1038"></span><span>  </span><span class="hs-comment">-- Conway</span><span>
</span><span id="line-1039"></span><span>  </span><span class="hs-comment">-- Alonzo</span><span>
</span><span id="line-1040"></span><span>  </span><span class="hs-comment">-- Mary</span><span>
</span><span id="line-1041"></span><span>  </span><span class="hs-comment">-- Shelley</span><span>
</span><span id="line-1042"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621685134874"><span class="annot"><span class="annottext">sizes :: UnivSize
</span><a href="#local-6989586621685134874"><span class="hs-identifier hs-var hs-var">sizes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-1043"></span><span>  </span><span id="local-6989586621685134873"><span class="annot"><span class="annottext">Subst (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134873"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1044"></span><span>    </span><span class="annot"><span class="annottext">forall a. Gen a -&gt; IO a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">generate</span></a></span><span>
</span><span id="line-1045"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#emptySubst"><span class="hs-identifier hs-var">emptySubst</span></a></span><span>
</span><span id="line-1046"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.PParams.html#pParamsStage"><span class="hs-identifier hs-var">pParamsStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1047"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Universes.html#universeStage"><span class="hs-identifier hs-var">universeStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134874"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1048"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.UTxO.html#utxoStage"><span class="hs-identifier hs-var">utxoStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134874"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1049"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#vstateStage"><span class="hs-identifier hs-var">vstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1050"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#pstateStage"><span class="hs-identifier hs-var">pstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1051"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.CertState.html#dstateStage"><span class="hs-identifier hs-var">dstateStage</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1052"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Certs.html#certsStage"><span class="hs-identifier hs-var">certsStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134874"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1053"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.LedgerState.html#ledgerStateStage"><span class="hs-identifier hs-var">ledgerStateStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134874"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1054"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Reflect era =&gt;
UnivSize -&gt; Proof era -&gt; Subst era -&gt; Gen (Subst era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyStage"><span class="hs-identifier hs-var">txBodyStage</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134874"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span>
</span><span id="line-1055"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1056"></span><span>  </span><span class="hs-comment">-- rewritten &lt;- snd &lt;$&gt; generate (rewriteGen (1, txBodyPreds sizes proof))</span><span>
</span><span id="line-1057"></span><span>  </span><span class="hs-comment">-- putStrLn (show rewritten)</span><span>
</span><span id="line-1058"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621685134872"><span class="annot"><span class="annottext">Maybe TestName
</span><a href="#local-6989586621685134872"><span class="hs-identifier hs-var">status</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
[Pred era] -&gt; Subst era -&gt; Typed (Env era, Maybe TestName)
</span><a href="Test.Cardano.Ledger.Constrained.Utils.html#checkForSoundness"><span class="hs-identifier hs-var">checkForSoundness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
UnivSize -&gt; Proof era -&gt; [Pred era]
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#txBodyPreds"><span class="hs-identifier hs-var">txBodyPreds</span></a></span><span> </span><span class="annot"><span class="annottext">UnivSize
</span><a href="#local-6989586621685134874"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Subst (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134873"><span class="hs-identifier hs-var">subst</span></a></span><span>
</span><span id="line-1059"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe TestName
</span><a href="#local-6989586621685134872"><span class="hs-identifier hs-var">status</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1060"></span><span>    </span><span class="annot"><span class="annottext">Maybe TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1061"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621685134871"><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621685134871"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; TestName -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><a href="#local-6989586621685134871"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1062"></span><span>  </span><span id="local-6989586621685134870"><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134870"><span class="hs-identifier hs-var">env0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Subst era -&gt; Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#substToEnv"><span class="hs-identifier hs-var">substToEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Subst (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134873"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Env era
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#emptyEnv"><span class="hs-identifier hs-var">emptyEnv</span></a></span><span>
</span><span id="line-1063"></span><span>  </span><span id="local-6989586621685134869"><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134869"><span class="hs-identifier hs-var">env1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Env era)
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustFeeInput"><span class="hs-identifier hs-var">adjustFeeInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134870"><span class="hs-identifier hs-var">env0</span></a></span><span>
</span><span id="line-1064"></span><span>  </span><span id="local-6989586621685134868"><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134868"><span class="hs-identifier hs-var">env2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Gen a -&gt; IO a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">generate</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. HasCallStack =&gt; Typed t -&gt; t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#errorTyped"><span class="hs-identifier hs-var">errorTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, Reflect era) =&gt;
Env era -&gt; Typed (Gen (Env era))
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#adjustColInput"><span class="hs-identifier hs-var">adjustColInput</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134869"><span class="hs-identifier hs-var">env1</span></a></span><span>
</span><span id="line-1065"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReplMode
</span><a href="#local-6989586621685134877"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ReplMode
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#Interactive"><span class="hs-identifier hs-var">Interactive</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a. Era era =&gt; Env era -&gt; Term era a -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134868"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Era era =&gt; Term era Coin
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txfee"><span class="hs-identifier hs-var">txfee</span></a></span><span>
</span><span id="line-1066"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReplMode
</span><a href="#local-6989586621685134877"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ReplMode
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#Interactive"><span class="hs-identifier hs-var">Interactive</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a. Era era =&gt; Env era -&gt; Term era a -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134868"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txterm"><span class="hs-identifier hs-var">txterm</span></a></span><span>
</span><span id="line-1067"></span><span>  </span><span class="hs-comment">-- compute Produced and Consumed</span><span>
</span><span id="line-1068"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#TxBodyF"><span class="hs-identifier hs-type">TxBodyF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685134865"><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134865"><span class="hs-identifier hs-var">txb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Reflect era =&gt; Term era (TxBodyF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#txbodyterm"><span class="hs-identifier hs-var">txbodyterm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134868"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1069"></span><span>  </span><span id="local-6989586621685134864"><span class="annot"><span class="annottext">CertState (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134864"><span class="hs-identifier hs-var">certState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era x t. Env era -&gt; RootTarget era x t -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#runTarget"><span class="hs-identifier hs-var">runTarget</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134869"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
RootTarget era (CertState era) (CertState era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#certstateT"><span class="hs-identifier hs-var">certstateT</span></a></span><span>
</span><span id="line-1070"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Classes.html#PParamsF"><span class="hs-identifier hs-type">PParamsF</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621685134862"><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134862"><span class="hs-identifier hs-var">ppV</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Proof era -&gt; Term era (PParamsF era)
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#pparams"><span class="hs-identifier hs-var">pparams</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134868"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1071"></span><span>  </span><span id="local-6989586621685134861"><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF (BabbageEra StandardCrypto))
</span><a href="#local-6989586621685134861"><span class="hs-identifier hs-var">utxoV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) t. (HasCallStack, Monad m) =&gt; Typed t -&gt; m t
</span><a href="Test.Cardano.Ledger.Constrained.Monad.html#monadTyped"><span class="hs-identifier hs-var">monadTyped</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. V era t -&gt; Env era -&gt; Typed t
</span><a href="Test.Cardano.Ledger.Constrained.Env.html#findVar"><span class="hs-identifier hs-var">findVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era t. Term era t -&gt; V era t
</span><a href="Test.Cardano.Ledger.Constrained.Ast.html#unVar"><span class="hs-identifier hs-var">unVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
Proof era -&gt; Term era (Map (TxIn (EraCrypto era)) (TxOutF era))
</span><a href="Test.Cardano.Ledger.Constrained.Vars.html#utxo"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134868"><span class="hs-identifier hs-var">env2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReplMode
</span><a href="#local-6989586621685134877"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ReplMode
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#Interactive"><span class="hs-identifier hs-var">Interactive</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
TxBody era -&gt; PParams era -&gt; CertState era -&gt; Produced
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">producedTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134865"><span class="hs-identifier hs-var">txb</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134862"><span class="hs-identifier hs-var">ppV</span></a></span><span> </span><span class="annot"><span class="annottext">CertState (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134864"><span class="hs-identifier hs-var">certState</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReplMode
</span><a href="#local-6989586621685134877"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">ReplMode
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#Interactive"><span class="hs-identifier hs-var">Interactive</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TestName -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; TestName
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
TxBody era -&gt; PParams era -&gt; CertState era -&gt; UTxO era -&gt; Consumed
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.14.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">consumedTxBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134865"><span class="hs-identifier hs-var">txb</span></a></span><span> </span><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134862"><span class="hs-identifier hs-var">ppV</span></a></span><span> </span><span class="annot"><span class="annottext">CertState (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134864"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOutF era) -&gt; UTxO era
</span><a href="Test.Cardano.Ledger.Constrained.Classes.html#liftUTxO"><span class="hs-identifier hs-var">liftUTxO</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn StandardCrypto) (TxOutF (BabbageEra StandardCrypto))
</span><a href="#local-6989586621685134861"><span class="hs-identifier hs-var">utxoV</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>  </span><span class="annot"><span class="annottext">forall era. ReplMode -&gt; Proof era -&gt; Env era -&gt; TestName -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#modeRepl"><span class="hs-identifier hs-var">modeRepl</span></a></span><span> </span><span class="annot"><span class="annottext">ReplMode
</span><a href="#local-6989586621685134877"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134876"><span class="hs-identifier hs-var">proof</span></a></span><span> </span><span class="annot"><span class="annottext">Env (BabbageEra StandardCrypto)
</span><a href="#local-6989586621685134868"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1075"></span><span>
</span><span id="line-1076"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demoTest"><span class="hs-identifier hs-type">demoTest</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier hs-type">TestTree</span></a></span><span>
</span><span id="line-1077"></span><span id="demoTest"><span class="annot"><span class="annottext">demoTest :: TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demoTest"><span class="hs-identifier hs-var hs-var">demoTest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1078"></span><span>  </span><span class="annot"><span class="annottext">TestName -&gt; [TestTree] -&gt; TestTree
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier hs-var">testGroup</span></a></span><span>
</span><span id="line-1079"></span><span>    </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Tests for Tx Stage&quot;</span></span><span>
</span><span id="line-1080"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. TestName -&gt; IO a -&gt; TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Utils.html#testIO"><span class="hs-identifier hs-var">testIO</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Testing Tx Stage&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReplMode -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demo"><span class="hs-identifier hs-var">demo</span></a></span><span> </span><span class="annot"><span class="annottext">ReplMode
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#CI"><span class="hs-identifier hs-var">CI</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-quickcheck-0.11-f7b5b54ac4f7fedfbc5b4a059efd8763465a4d360842aa9a33a96c0eb490a2bb/share/doc/html/src"><span class="hs-identifier hs-var">testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;One Tx Test Babbage&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; Int -&gt; prop -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">withMaxSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(Reflect era, Environment (EraRule &quot;LEDGER&quot; era) ~ LedgerEnv era,
 State (EraRule &quot;LEDGER&quot; era) ~ LedgerState era,
 Signal (EraRule &quot;LEDGER&quot; era) ~ Tx era,
 Show (PredicateFailure (EraRule &quot;LEDGER&quot; era))) =&gt;
UnivSize -&gt; Proof era -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#oneTest"><span class="hs-identifier hs-var">oneTest</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (BabbageEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Babbage"><span class="hs-identifier hs-var">Babbage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1082"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. Testable a =&gt; TestName -&gt; a -&gt; TestTree
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-quickcheck-0.11-f7b5b54ac4f7fedfbc5b4a059efd8763465a4d360842aa9a33a96c0eb490a2bb/share/doc/html/src"><span class="hs-identifier hs-var">testProperty</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;One Tx Test Shelley&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; Int -&gt; prop -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.15.0.1-4019c8c32cd83e4551b6cacd38479a53d08da5213f8f0afe416c11ef11d8101d/share/doc/html/src"><span class="hs-identifier hs-var">withMaxSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(Reflect era, Environment (EraRule &quot;LEDGER&quot; era) ~ LedgerEnv era,
 State (EraRule &quot;LEDGER&quot; era) ~ LedgerState era,
 Signal (EraRule &quot;LEDGER&quot; era) ~ Tx era,
 Show (PredicateFailure (EraRule &quot;LEDGER&quot; era))) =&gt;
UnivSize -&gt; Proof era -&gt; Gen Property
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#oneTest"><span class="hs-identifier hs-var">oneTest</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-cc61b3e1505bae222166941c5d7d95310a6fc64233e500cdf16191d60ef6520a/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Proof (ShelleyEra StandardCrypto)
</span><a href="Test.Cardano.Ledger.Generic.Proof.html#Shelley"><span class="hs-identifier hs-var">Shelley</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1083"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1084"></span><span>
</span><span id="line-1085"></span><span class="annot"><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#main"><span class="hs-identifier hs-type">main</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1086"></span><span id="main"><span class="annot"><span class="annottext">main :: IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#main"><span class="hs-identifier hs-var hs-var">main</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TestTree -&gt; IO ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tasty-1.5-6bef5979231cd62c92cb9dfa07c3397764344dc5b7fce41fb7f60d6b75b8169f/share/doc/html/src"><span class="hs-identifier hs-var">defaultMain</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. TestName -&gt; IO a -&gt; TestTree
</span><a href="Test.Cardano.Ledger.Constrained.Utils.html#testIO"><span class="hs-identifier hs-var">testIO</span></a></span><span> </span><span class="annot"><span class="annottext">TestName
</span><span class="hs-string">&quot;Testing Tx Stage&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReplMode -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Tx.html#demo"><span class="hs-identifier hs-var">demo</span></a></span><span> </span><span class="annot"><span class="annottext">ReplMode
</span><a href="Test.Cardano.Ledger.Constrained.Preds.Repl.html#Interactive"><span class="hs-identifier hs-var">Interactive</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1087"></span></pre></body></html>