<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621679762155"><span id="local-6989586621679762156"><span id="local-6989586621679762157"><span id="local-6989586621679762158"><span id="local-6989586621679762159"><span id="local-6989586621679762160"><span id="local-6989586621679762161"><span id="local-6989586621679762162"><span id="local-6989586621679762163"><span id="local-6989586621679762164"><span id="local-6989586621679762165"><span id="local-6989586621679762166"><span id="local-6989586621679762167"><span id="local-6989586621679762168"><span id="local-6989586621679762169"><span id="local-6989586621679762170"><span id="local-6989586621679762171"><span id="local-6989586621679762172"><span id="local-6989586621679762173"><span id="local-6989586621679762174"><span id="local-6989586621679762175"><span id="local-6989586621679762176"><span id="local-6989586621679762177"><span id="local-6989586621679762178"><span id="local-6989586621679762179"><span id="local-6989586621679762180"><span id="local-6989586621679762181"><span id="local-6989586621679762182"><span id="local-6989586621679762183"><span id="local-6989586621679762193"><span id="local-6989586621679762194"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE StrictData #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Byron.Spec.Ledger.Delegation</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Delegation scheduling</span></span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier">SDELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier">SDELEGS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier">DSState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier">DSState</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier">_dSStateScheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier">_dSStateKeyEpochDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier">DCert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier">DCert</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier">delegator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier">delegate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier">depoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier">dwho</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier">mkDCert</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword">signature</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Delegation activation</span></span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier">ADELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier">ADELEGS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier">DSEnv</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier">DSEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier">_dSEnvAllowedDelegators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier">_dSEnvEpoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvSlot"><span class="hs-identifier">_dSEnvSlot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvK"><span class="hs-identifier">_dSEnvK</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier">allowedDelegators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier">DState</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier">DState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier">_dStateDelegationMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier">_dStateLastDelegation</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Delegation interface</span></span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier">DELEG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIEnv"><span class="hs-identifier">DIEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier">DIState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier">DIState</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateDelegationMap"><span class="hs-identifier">_dIStateDelegationMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateLastDelegation"><span class="hs-identifier">_dIStateLastDelegation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier">_dIStateScheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier">_dIStateKeyEpochDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier">liveAfter</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier">EpochDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><span class="hs-comment">-- * State lens fields</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier">slot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier">epoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier">delegationMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><span class="hs-comment">-- * State lens type classes</span></span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#HasScheduledDelegations"><span class="hs-identifier">HasScheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier">scheduledDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dmsL"><span class="hs-identifier">dmsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Generators</span></span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier">dcertGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier">dcertsGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier">initialEnvFromGenesisKeys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#randomDCertGen"><span class="hs-identifier">randomDCertGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Functions on delegation state</span></span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorOf"><span class="hs-identifier">delegatorOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Support Functions for delegation properties</span></span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier">delegatorDelegate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#emptyDelegationPayloadRatio"><span class="hs-identifier">emptyDelegationPayloadRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#thisEpochDelegationsRatio"><span class="hs-identifier">thisEpochDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#nextEpochDelegationsRatio"><span class="hs-identifier">nextEpochDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#selfDelegationsRatio"><span class="hs-identifier">selfDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#multipleDelegationsRatio"><span class="hs-identifier">multipleDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxDelegationsTo"><span class="hs-identifier">maxDelegationsTo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#changedDelegationsRatio"><span class="hs-identifier">changedDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxChangedDelegations"><span class="hs-identifier">maxChangedDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#repeatedDelegationsRatio"><span class="hs-identifier">repeatedDelegationsRatio</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxRepeatedDelegations"><span class="hs-identifier">maxRepeatedDelegations</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxCertsPerBlock"><span class="hs-identifier">maxCertsPerBlock</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Predicate failures</span></span><span>
</span><span id="line-91"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegPredicateFailure"><span class="hs-identifier">AdelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegsPredicateFailure"><span class="hs-identifier">AdelegsPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegPredicateFailure"><span class="hs-identifier">SdelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegsPredicateFailure"><span class="hs-identifier">SdelegsPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MsdelegPredicateFailure"><span class="hs-identifier">MsdelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DelegPredicateFailure"><span class="hs-identifier">DelegPredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">where</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html"><span class="hs-identifier">Byron.Spec.Ledger.Core</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier">BlockCount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier">Epoch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier">Epoch</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#HasHash"><span class="hs-identifier">HasHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier">Hash</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier">Owner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier">Owner</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier">Sig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier">Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier">Slot</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier">SlotCount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier">SlotCount</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier">VKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier">VKeyGenesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier">VKeyGenesis</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-identifier">addSlot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#hash"><span class="hs-identifier">hash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#mkVkGenesisSet"><span class="hs-identifier">mkVkGenesisSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#owner"><span class="hs-identifier">owner</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier">range</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#unBlockCount"><span class="hs-identifier">unBlockCount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#unVKeyGenesis"><span class="hs-identifier">unVKeyGenesis</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#verify"><span class="hs-identifier">verify</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator">(&#8712;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2209"><span class="hs-operator">(&#8713;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator">(&#10755;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Generators</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html#epochGen"><span class="hs-identifier">epochGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html#slotGen"><span class="hs-identifier">slotGen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Generators.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Generators</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CoreGen</span></span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.Omniscient.html"><span class="hs-identifier">Byron.Spec.Ledger.Core.Omniscient</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.Omniscient.html#signWithGenesisKey"><span class="hs-identifier">signWithGenesisKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(&amp;&amp;&amp;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">Control.State.Transition</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">Embed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">Environment</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">IRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">IRC</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">PredicateFailure</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">Signal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">State</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">TRC</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">initialRules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">judgmentContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">trans</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">transitionRules</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">wrapFailed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator">(?!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.AbstractSize.html"><span class="hs-identifier">Data.AbstractSize</span></a></span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier">Data.Bimap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier">Bimap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-operator">(!&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier">Data.Bimap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bimap</span></span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hashable-1.4.7.0-362279f2c0e4d95474c1c18b0a8d073095f2127e355e8b0cb57473a25efee8b2/share/doc/html/src"><span class="hs-identifier">Data.Hashable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hashable-1.4.7.0-362279f2c0e4d95474c1c18b0a8d073095f2127e355e8b0cb57473a25efee8b2/share/doc/html/src"><span class="hs-identifier">Hashable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hashable-1.4.7.0-362279f2c0e4d95474c1c18b0a8d073095f2127e355e8b0cb57473a25efee8b2/share/doc/html/src"><span class="hs-identifier">Data.Hashable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-150"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/Unique-0.4.7.9-5d63e8218cc9cd6e824817231ee950da27ddf227910f7c881b5986d3afb6c1f0/share/doc/html/src"><span class="hs-identifier">Data.List.Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/Unique-0.4.7.9-5d63e8218cc9cd6e824817231ee950da27ddf227910f7c881b5986d3afb6c1f0/share/doc/html/src"><span class="hs-identifier">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">catMaybes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator">(\\)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Word8</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier">Hedgehog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier">Gen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier">Hedgehog.Gen</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Gen</span></span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier">Hedgehog.Range</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Range</span></span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier">Lens.Micro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier">Lens'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier">lens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator">(%~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(&amp;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator">(.~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator">(&lt;&gt;~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator">(^.)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier">_1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-th-0.4.3.15-897de5234c78e044278a4e695d411b715684563e79cffc96e94373a0c17d3f59/share/doc/html/src"><span class="hs-identifier">Lens.Micro.TH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-th-0.4.3.15-897de5234c78e044278a4e695d411b715684563e79cffc96e94373a0c17d3f59/share/doc/html/src"><span class="hs-identifier">makeFields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier">NoThunks.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier">allNoThunks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier">noThunksInKeysAndValues</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">Test.Control.State.Transition.Generator</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">HasTrace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">envGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">genTrace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">sigGen</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-169"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">Test.Control.State.Transition.Trace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">TraceOrder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">OldestFirst</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier">traceSignals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- Abstract types</span><span>
</span><span id="line-174"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-comment">-- | A delegation certificate.</span><span>
</span><span id="line-177"></span><span id="local-6989586621679761920"><span id="local-6989586621679761921"></span></span><span class="hs-keyword">data</span><span> </span><span id="DCert"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-var">DCert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DCert"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-var">DCert</span></a></span></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="delegator"><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var hs-var">delegator</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-comment">-- ^ Key that delegates</span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="delegate"><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var hs-var">delegate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-comment">-- ^ Key that the delegator is delegating to</span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="depoch"><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var hs-var">depoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-comment">-- ^ Certificate epoch</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="signature"><span class="annot"><span class="annottext">DCert -&gt; Sig (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword hs-var hs-var">signature</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-comment">-- ^ Witness for the delegation certificate</span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761904"><span id="local-6989586621679761906"><span id="local-6989586621679761918"><span class="annot"><span class="annottext">Int -&gt; DCert -&gt; ShowS
[DCert] -&gt; ShowS
DCert -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DCert] -&gt; ShowS
$cshowList :: [DCert] -&gt; ShowS
show :: DCert -&gt; String
$cshow :: DCert -&gt; String
showsPrec :: Int -&gt; DCert -&gt; ShowS
$cshowsPrec :: Int -&gt; DCert -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761890"><span id="local-6989586621679761900"><span class="annot"><span class="annottext">DCert -&gt; DCert -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DCert -&gt; DCert -&gt; Bool
$c/= :: DCert -&gt; DCert -&gt; Bool
== :: DCert -&gt; DCert -&gt; Bool
$c== :: DCert -&gt; DCert -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761858"><span id="local-6989586621679761860"><span id="local-6989586621679761863"><span id="local-6989586621679761866"><span id="local-6989586621679761869"><span id="local-6989586621679761876"><span id="local-6989586621679761884"><span class="annot"><span class="annottext">Eq DCert
DCert -&gt; DCert -&gt; Bool
DCert -&gt; DCert -&gt; Ordering
DCert -&gt; DCert -&gt; DCert
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DCert -&gt; DCert -&gt; DCert
$cmin :: DCert -&gt; DCert -&gt; DCert
max :: DCert -&gt; DCert -&gt; DCert
$cmax :: DCert -&gt; DCert -&gt; DCert
&gt;= :: DCert -&gt; DCert -&gt; Bool
$c&gt;= :: DCert -&gt; DCert -&gt; Bool
&gt; :: DCert -&gt; DCert -&gt; Bool
$c&gt; :: DCert -&gt; DCert -&gt; Bool
&lt;= :: DCert -&gt; DCert -&gt; Bool
$c&lt;= :: DCert -&gt; DCert -&gt; Bool
&lt; :: DCert -&gt; DCert -&gt; Bool
$c&lt; :: DCert -&gt; DCert -&gt; Bool
compare :: DCert -&gt; DCert -&gt; Ordering
$ccompare :: DCert -&gt; DCert -&gt; Ordering
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep DCert x -&gt; DCert
forall x. DCert -&gt; Rep DCert x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DCert x -&gt; DCert
$cfrom :: forall x. DCert -&gt; Rep DCert x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761848"><span id="local-6989586621679761850"><span class="annot"><span class="annottext">Eq DCert
Int -&gt; DCert -&gt; Int
DCert -&gt; Int
forall a. Eq a -&gt; (Int -&gt; a -&gt; Int) -&gt; (a -&gt; Int) -&gt; Hashable a
hash :: DCert -&gt; Int
$chash :: DCert -&gt; Int
hashWithSalt :: Int -&gt; DCert -&gt; Int
$chashWithSalt :: Int -&gt; DCert -&gt; Int
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hashable-1.4.7.0-362279f2c0e4d95474c1c18b0a8d073095f2127e355e8b0cb57473a25efee8b2/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Hashable</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761801"><span id="local-6989586621679761803"><span id="local-6989586621679761805"><span id="local-6989586621679761807"><span id="local-6989586621679761809"><span id="local-6989586621679761811"><span id="local-6989586621679761813"><span id="local-6989586621679761815"><span id="local-6989586621679761817"><span id="local-6989586621679761819"><span id="local-6989586621679761821"><span id="local-6989586621679761823"><span id="local-6989586621679761832"><span id="local-6989586621679761843"><span class="annot"><span class="annottext">Typeable DCert
DCert -&gt; DataType
DCert -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; DCert -&gt; DCert
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DCert)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DCert)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DCert -&gt; m DCert
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DCert -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DCert -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DCert -&gt; DCert
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DCert -&gt; DCert
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DCert)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DCert)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DCert)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DCert)
dataTypeOf :: DCert -&gt; DataType
$cdataTypeOf :: DCert -&gt; DataType
toConstr :: DCert -&gt; Constr
$ctoConstr :: DCert -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DCert
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DCert -&gt; c DCert
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761791"><span id="local-6989586621679761793"><span id="local-6989586621679761795"><span class="annot"><span class="annottext">Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
Proxy DCert -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DCert -&gt; String
$cshowTypeOf :: Proxy DCert -&gt; String
wNoThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DCert -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679761788"><span class="annot"><a href="Data.AbstractSize.html#HasTypeReps"><span class="hs-identifier hs-type">HasTypeReps</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#HasHash"><span class="hs-identifier hs-type">HasHash</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>  </span><span id="local-6989586621679761780"><span class="annot"><span class="annottext">hash :: [DCert] -&gt; Hash
</span><a href="#local-6989586621679761780"><span class="hs-identifier hs-var hs-var hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Hash
</span><a href="Byron.Spec.Ledger.Core.html#Hash"><span class="hs-identifier hs-var">Hash</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Hashable a =&gt; a -&gt; Int
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hashable-1.4.7.0-362279f2c0e4d95474c1c18b0a8d073095f2127e355e8b0cb57473a25efee8b2/share/doc/html/src"><span class="hs-identifier hs-var">H.hash</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-type">mkDCert</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-200"></span><span id="mkDCert"><span class="annot"><span class="annottext">mkDCert :: VKeyGenesis -&gt; Sig (VKey, Epoch) -&gt; VKey -&gt; Epoch -&gt; DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-var hs-var">mkDCert</span></a></span></span><span> </span><span id="local-6989586621679761777"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679761777"><span class="hs-identifier hs-var">vkg</span></a></span></span><span> </span><span id="local-6989586621679761776"><span class="annot"><span class="annottext">Sig (VKey, Epoch)
</span><a href="#local-6989586621679761776"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679761775"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679761775"><span class="hs-identifier hs-var">vkd</span></a></span></span><span> </span><span id="local-6989586621679761774"><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679761774"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-201"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">delegator :: VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var">delegator</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679761777"><span class="hs-identifier hs-var">vkg</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">delegate :: VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var">delegate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679761775"><span class="hs-identifier hs-var">vkd</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">depoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679761774"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">signature :: Sig (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword hs-var">signature</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sig (VKey, Epoch)
</span><a href="#local-6989586621679761776"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">-- | Who is delegating to whom.</span><span>
</span><span id="line-209"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-type">dwho</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span id="dwho"><span class="annot"><span class="annottext">dwho :: DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var hs-var">dwho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var">delegator</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var">delegate</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-comment">-- | Part of the delegation certificate that is signed by the delegator.</span><span>
</span><span id="line-213"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dbody"><span class="hs-identifier hs-type">dbody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span id="dbody"><span class="annot"><span class="annottext">dbody :: DCert -&gt; (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#dbody"><span class="hs-identifier hs-var hs-var">dbody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var">delegate</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- Derived types</span><span>
</span><span id="line-218"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- | Delegation scheduling environment</span><span>
</span><span id="line-221"></span><span id="local-6989586621679761771"><span id="local-6989586621679761772"></span></span><span class="hs-keyword">data</span><span> </span><span id="DSEnv"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-var">DSEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DSEnv"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-var">DSEnv</span></a></span></span><span>
</span><span id="line-222"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dSEnvAllowedDelegators"><span class="annot"><span class="annottext">DSEnv -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier hs-var hs-var">_dSEnvAllowedDelegators</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-comment">-- ^ Set of allowed delegators</span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dSEnvEpoch"><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var hs-var">_dSEnvEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-comment">-- ^ Current epoch</span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dSEnvSlot"><span class="annot"><span class="annottext">DSEnv -&gt; Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvSlot"><span class="hs-identifier hs-var hs-var">_dSEnvSlot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-comment">-- ^ Current slot</span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dSEnvK"><span class="annot"><span class="annottext">DSEnv -&gt; BlockCount
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvK"><span class="hs-identifier hs-var hs-var">_dSEnvK</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-comment">-- ^ Chain stability parameter</span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761756"><span id="local-6989586621679761758"><span id="local-6989586621679761769"><span class="annot"><span class="annottext">Int -&gt; DSEnv -&gt; ShowS
[DSEnv] -&gt; ShowS
DSEnv -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DSEnv] -&gt; ShowS
$cshowList :: [DSEnv] -&gt; ShowS
show :: DSEnv -&gt; String
$cshow :: DSEnv -&gt; String
showsPrec :: Int -&gt; DSEnv -&gt; ShowS
$cshowsPrec :: Int -&gt; DSEnv -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761744"><span id="local-6989586621679761754"><span class="annot"><span class="annottext">DSEnv -&gt; DSEnv -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DSEnv -&gt; DSEnv -&gt; Bool
$c/= :: DSEnv -&gt; DSEnv -&gt; Bool
== :: DSEnv -&gt; DSEnv -&gt; Bool
$c== :: DSEnv -&gt; DSEnv -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep DSEnv x -&gt; DSEnv
forall x. DSEnv -&gt; Rep DSEnv x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DSEnv x -&gt; DSEnv
$cfrom :: forall x. DSEnv -&gt; Rep DSEnv x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761736"><span id="local-6989586621679761738"><span id="local-6989586621679761740"><span class="annot"><span class="annottext">Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
Proxy DSEnv -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DSEnv -&gt; String
$cshowTypeOf :: Proxy DSEnv -&gt; String
wNoThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DSEnv -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679761736"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span id="k"><span id="local-6989586621679761722"><span id="local-6989586621679761726"><span id="local-6989586621679761730"><span id="local-6989586621679761734"><span id="epoch"><span id="slot"><span id="allowedDelegators"><span id="local-6989586621679763557"><span id="local-6989586621679763558"><span id="HasEpoch"><span id="local-6989586621679763560"><span id="local-6989586621679763561"><span id="HasK"><span id="local-6989586621679763563"><span id="local-6989586621679763564"><span id="HasSlot"><span id="local-6989586621679763567"><span id="local-6989586621679763568"><span id="HasAllowedDelegators"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DSEnv</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-comment">-- | Delegation scheduling state</span><span>
</span><span id="line-236"></span><span id="local-6989586621679761686"><span id="local-6989586621679761687"></span></span><span class="hs-keyword">data</span><span> </span><span id="DSState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-var">DSState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DSState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-var">DSState</span></a></span></span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dSStateScheduledDelegations"><span class="annot"><span class="annottext">DSState -&gt; [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier hs-var hs-var">_dSStateScheduledDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dSStateKeyEpochDelegations"><span class="annot"><span class="annottext">DSState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var hs-var">_dSStateKeyEpochDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761674"><span id="local-6989586621679761676"><span id="local-6989586621679761684"><span class="annot"><span class="annottext">Int -&gt; DSState -&gt; ShowS
[DSState] -&gt; ShowS
DSState -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DSState] -&gt; ShowS
$cshowList :: [DSState] -&gt; ShowS
show :: DSState -&gt; String
$cshow :: DSState -&gt; String
showsPrec :: Int -&gt; DSState -&gt; ShowS
$cshowsPrec :: Int -&gt; DSState -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761660"><span id="local-6989586621679761667"><span class="annot"><span class="annottext">DSState -&gt; DSState -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DSState -&gt; DSState -&gt; Bool
$c/= :: DSState -&gt; DSState -&gt; Bool
== :: DSState -&gt; DSState -&gt; Bool
$c== :: DSState -&gt; DSState -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep DSState x -&gt; DSState
forall x. DSState -&gt; Rep DSState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DSState x -&gt; DSState
$cfrom :: forall x. DSState -&gt; Rep DSState x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761647"><span id="local-6989586621679761649"><span id="local-6989586621679761651"><span class="annot"><span class="annottext">Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
Proxy DSState -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DSState -&gt; String
$cshowTypeOf :: Proxy DSState -&gt; String
wNoThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DSState -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679761647"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span id="keyEpochDelegations"><span id="local-6989586621679761641"><span id="local-6989586621679761645"><span id="scheduledDelegations"><span id="HasKeyEpochDelegations"><span id="local-6989586621679763543"><span id="local-6989586621679763544"><span id="HasScheduledDelegations"><span id="local-6989586621679763546"><span id="local-6989586621679763547"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DSState</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | Delegation state</span><span>
</span><span id="line-245"></span><span id="local-6989586621679761624"><span id="local-6989586621679761625"></span></span><span class="hs-keyword">data</span><span> </span><span id="DState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-var">DState</span></a></span></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dStateDelegationMap"><span class="annot"><span class="annottext">DState -&gt; Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var hs-var">_dStateDelegationMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dStateLastDelegation"><span class="annot"><span class="annottext">DState -&gt; Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var hs-var">_dStateLastDelegation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span>
</span><span id="line-248"></span><span>  </span><span class="hs-comment">-- ^ When was the last time each genesis key delegated.</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761613"><span id="local-6989586621679761622"><span class="annot"><span class="annottext">DState -&gt; DState -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DState -&gt; DState -&gt; Bool
$c/= :: DState -&gt; DState -&gt; Bool
== :: DState -&gt; DState -&gt; Bool
$c== :: DState -&gt; DState -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761599"><span id="local-6989586621679761601"><span id="local-6989586621679761611"><span class="annot"><span class="annottext">Int -&gt; DState -&gt; ShowS
[DState] -&gt; ShowS
DState -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DState] -&gt; ShowS
$cshowList :: [DState] -&gt; ShowS
show :: DState -&gt; String
$cshow :: DState -&gt; String
showsPrec :: Int -&gt; DState -&gt; ShowS
$cshowsPrec :: Int -&gt; DState -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep DState x -&gt; DState
forall x. DState -&gt; Rep DState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DState x -&gt; DState
$cfrom :: forall x. DState -&gt; Rep DState x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679761592"><span id="local-6989586621679761595"><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>  </span><span id="local-6989586621679761587"><span class="annot"><span class="annottext">wNoThunks :: Context -&gt; DState -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">wNoThunks</span></a></span></span><span> </span><span id="local-6989586621679761585"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761585"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span> </span><span id="local-6989586621679761584"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679761584"><span class="hs-identifier hs-var">dmap</span></a></span></span><span> </span><span id="local-6989586621679761583"><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679761583"><span class="hs-identifier hs-var">lastDeleg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><span class="annottext">[IO (Maybe ThunkInfo)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">allNoThunks</span></a></span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761585"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. Bimap a b -&gt; [(a, b)]
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-var">Bimap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679761584"><span class="hs-identifier hs-var">dmap</span></a></span><span>
</span><span id="line-256"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761585"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679761583"><span class="hs-identifier hs-var">lastDeleg</span></a></span><span>
</span><span id="line-257"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span id="lastDelegation"><span id="local-6989586621679761575"><span id="local-6989586621679761579"><span id="delegationMap"><span id="HasDelegationMap"><span id="local-6989586621679763518"><span id="local-6989586621679763519"><span id="HasLastDelegation"><span id="local-6989586621679763521"><span id="local-6989586621679763522"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DState</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorOf"><span class="hs-identifier hs-type">delegatorOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-262"></span><span id="delegatorOf"><span class="annot"><span class="annottext">delegatorOf :: Bimap VKeyGenesis VKey -&gt; VKey -&gt; Maybe VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorOf"><span class="hs-identifier hs-var hs-var">delegatorOf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b (m :: * -&gt; *).
(Ord a, Ord b, MonadThrow m) =&gt;
b -&gt; Bimap a b -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-var">Bimap.lookupR</span></a></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-comment">-- | Interface environment is the same as scheduling environment.</span><span>
</span><span id="line-265"></span><span class="hs-keyword">type</span><span> </span><span id="DIEnv"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIEnv"><span class="hs-identifier hs-var">DIEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span id="local-6989586621679761556"><span id="local-6989586621679761557"></span></span><span class="hs-keyword">data</span><span> </span><span id="DIState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-var">DIState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DIState"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-var">DIState</span></a></span></span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_dIStateDelegationMap"><span class="annot"><span class="annottext">DIState -&gt; Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateDelegationMap"><span class="hs-identifier hs-var hs-var">_dIStateDelegationMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dIStateLastDelegation"><span class="annot"><span class="annottext">DIState -&gt; Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateLastDelegation"><span class="hs-identifier hs-var hs-var">_dIStateLastDelegation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dIStateScheduledDelegations"><span class="annot"><span class="annottext">DIState -&gt; [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier hs-var hs-var">_dIStateScheduledDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_dIStateKeyEpochDelegations"><span class="annot"><span class="annottext">DIState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier hs-var hs-var">_dIStateKeyEpochDelegations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761540"><span id="local-6989586621679761542"><span id="local-6989586621679761554"><span class="annot"><span class="annottext">Int -&gt; DIState -&gt; ShowS
[DIState] -&gt; ShowS
DIState -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DIState] -&gt; ShowS
$cshowList :: [DIState] -&gt; ShowS
show :: DIState -&gt; String
$cshow :: DIState -&gt; String
showsPrec :: Int -&gt; DIState -&gt; ShowS
$cshowsPrec :: Int -&gt; DIState -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761525"><span id="local-6989586621679761536"><span class="annot"><span class="annottext">DIState -&gt; DIState -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DIState -&gt; DIState -&gt; Bool
$c/= :: DIState -&gt; DIState -&gt; Bool
== :: DIState -&gt; DIState -&gt; Bool
$c== :: DIState -&gt; DIState -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep DIState x -&gt; DIState
forall x. DIState -&gt; Rep DIState x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DIState x -&gt; DIState
$cfrom :: forall x. DIState -&gt; Rep DIState x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span id="local-6989586621679761507"><span id="local-6989586621679761511"><span id="local-6989586621679761515"><span id="local-6989586621679761519"><span class="hs-identifier">makeFields</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">DIState</span></span></span></span></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679761472"><span id="local-6989586621679761475"><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-278"></span><span>  </span><span id="local-6989586621679761461"><span class="annot"><span class="annottext">wNoThunks :: Context -&gt; DIState -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679761461"><span class="hs-identifier hs-var hs-var hs-var hs-var">wNoThunks</span></a></span></span><span> </span><span id="local-6989586621679761460"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761460"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span id="local-6989586621679761459"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679761459"><span class="hs-identifier hs-var">dmap</span></a></span></span><span> </span><span id="local-6989586621679761458"><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679761458"><span class="hs-identifier hs-var">lastDeleg</span></a></span></span><span> </span><span id="local-6989586621679761457"><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679761457"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span id="local-6989586621679761456"><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679761456"><span class="hs-identifier hs-var">sked</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="annottext">[IO (Maybe ThunkInfo)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">allNoThunks</span></a></span><span>
</span><span id="line-280"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761460"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. Bimap a b -&gt; [(a, b)]
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-var">Bimap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679761459"><span class="hs-identifier hs-var">dmap</span></a></span><span>
</span><span id="line-281"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall k v.
(NoThunks k, NoThunks v) =&gt;
Context -&gt; [(k, v)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">noThunksInKeysAndValues</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761460"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [(k, a)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679761458"><span class="hs-identifier hs-var">lastDeleg</span></a></span><span>
</span><span id="line-282"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">wNoThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761460"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679761457"><span class="hs-identifier hs-var">sds</span></a></span><span>
</span><span id="line-283"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.2.1.1-0463ac71474a2bad0a06b0f513fd49599fa3f3dd9bae265aaebf349d2fda51f3/share/doc/html/src"><span class="hs-identifier hs-var">wNoThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679761460"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679761456"><span class="hs-identifier hs-var">sked</span></a></span><span>
</span><span id="line-284"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span id="local-6989586621679763500"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dmsL"><span class="hs-identifier hs-type">dmsL</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-287"></span><span>  </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#HasDelegationMap"><span class="hs-identifier hs-type">HasDelegationMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679763500"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-288"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679763500"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-type">Bimap</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-289"></span><span id="dmsL"><span class="annot"><span class="annottext">dmsL :: forall a.
HasDelegationMap a (Bimap VKeyGenesis VKey) =&gt;
Lens' a (Bimap VKeyGenesis VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dmsL"><span class="hs-identifier hs-var hs-var">dmsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dIStateDSState"><span class="hs-identifier hs-type">dIStateDSState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-292"></span><span id="dIStateDSState"><span class="annot"><span class="annottext">dIStateDSState :: Lens' DIState DSState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDSState"><span class="hs-identifier hs-var hs-var">dIStateDSState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-293"></span><span>  </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679761436"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761436"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
-&gt; Set (Epoch, VKeyGenesis) -&gt; DSState
</span><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-var">DSState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761436"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761436"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679761435"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761435"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span id="local-6989586621679761434"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679761434"><span class="hs-identifier hs-var">dss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761435"><span class="hs-identifier hs-var">dis</span></a></span><span>
</span><span id="line-297"></span><span>          </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-298"></span><span>            </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679761434"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-299"></span><span>              </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-300"></span><span>          </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-301"></span><span>            </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679761434"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-302"></span><span>              </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dIStateDState"><span class="hs-identifier hs-type">dIStateDState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-306"></span><span id="dIStateDState"><span class="annot"><span class="annottext">dIStateDState :: Lens' DIState DState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDState"><span class="hs-identifier hs-var hs-var">dIStateDState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679761418"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761418"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey -&gt; Map VKeyGenesis Slot -&gt; DState
</span><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-var">DState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761418"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761418"><span class="hs-identifier hs-var">dis</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679761417"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761417"><span class="hs-identifier hs-var">dis</span></a></span></span><span> </span><span id="local-6989586621679761416"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679761416"><span class="hs-identifier hs-var">dss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-310"></span><span>        </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679761417"><span class="hs-identifier hs-var">dis</span></a></span><span>
</span><span id="line-311"></span><span>          </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span>
</span><span id="line-312"></span><span>            </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679761416"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-313"></span><span>              </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span>
</span><span id="line-314"></span><span>          </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span>
</span><span id="line-315"></span><span>            </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679761416"><span class="hs-identifier hs-var">dss</span></a></span><span>
</span><span id="line-316"></span><span>              </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span>
</span><span id="line-317"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- Transition systems</span><span>
</span><span id="line-321"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-comment">-- | Delegation scheduling rules</span><span>
</span><span id="line-324"></span><span class="hs-keyword">data</span><span> </span><span id="SDELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-var">SDELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761386"><span id="local-6989586621679761388"><span id="local-6989586621679761390"><span id="local-6989586621679761392"><span id="local-6989586621679761394"><span id="local-6989586621679761396"><span id="local-6989586621679761398"><span id="local-6989586621679761400"><span id="local-6989586621679761402"><span id="local-6989586621679761404"><span id="local-6989586621679761406"><span id="local-6989586621679761408"><span id="local-6989586621679761410"><span id="local-6989586621679761412"><span class="annot"><span class="annottext">Typeable SDELEG
SDELEG -&gt; DataType
SDELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; SDELEG -&gt; SDELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEG)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEG -&gt; m SDELEG
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEG -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEG -&gt; SDELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEG -&gt; SDELEG
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEG)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEG)
dataTypeOf :: SDELEG -&gt; DataType
$cdataTypeOf :: SDELEG -&gt; DataType
toConstr :: SDELEG -&gt; Constr
$ctoConstr :: SDELEG -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEG
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEG -&gt; c SDELEG
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span id="local-6989586621679761384"><span id="local-6989586621679761385"></span></span><span class="hs-keyword">data</span><span> </span><span id="EpochDiff"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-var">EpochDiff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EpochDiff"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-var">EpochDiff</span></a></span></span><span> </span><span class="hs-special">{</span><span id="currentEpoch"><span class="annot"><span class="annottext">EpochDiff -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#currentEpoch"><span class="hs-identifier hs-var hs-var">currentEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span id="certEpoch"><span class="annot"><span class="annottext">EpochDiff -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#certEpoch"><span class="hs-identifier hs-var hs-var">certEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761375"><span id="local-6989586621679761379"><span class="annot"><span class="annottext">EpochDiff -&gt; EpochDiff -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EpochDiff -&gt; EpochDiff -&gt; Bool
$c/= :: EpochDiff -&gt; EpochDiff -&gt; Bool
== :: EpochDiff -&gt; EpochDiff -&gt; Bool
$c== :: EpochDiff -&gt; EpochDiff -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761366"><span id="local-6989586621679761368"><span id="local-6989586621679761373"><span class="annot"><span class="annottext">Int -&gt; EpochDiff -&gt; ShowS
[EpochDiff] -&gt; ShowS
EpochDiff -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EpochDiff] -&gt; ShowS
$cshowList :: [EpochDiff] -&gt; ShowS
show :: EpochDiff -&gt; String
$cshow :: EpochDiff -&gt; String
showsPrec :: Int -&gt; EpochDiff -&gt; ShowS
$cshowsPrec :: Int -&gt; EpochDiff -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761332"><span id="local-6989586621679761334"><span id="local-6989586621679761336"><span id="local-6989586621679761338"><span id="local-6989586621679761340"><span id="local-6989586621679761342"><span id="local-6989586621679761344"><span id="local-6989586621679761346"><span id="local-6989586621679761348"><span id="local-6989586621679761350"><span id="local-6989586621679761352"><span id="local-6989586621679761354"><span id="local-6989586621679761358"><span id="local-6989586621679761362"><span class="annot"><span class="annottext">Typeable EpochDiff
EpochDiff -&gt; DataType
EpochDiff -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; EpochDiff -&gt; EpochDiff
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EpochDiff)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EpochDiff)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; EpochDiff -&gt; m EpochDiff
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; EpochDiff -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; EpochDiff -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EpochDiff -&gt; EpochDiff
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; EpochDiff -&gt; EpochDiff
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EpochDiff)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c EpochDiff)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EpochDiff)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c EpochDiff)
dataTypeOf :: EpochDiff -&gt; DataType
$cdataTypeOf :: EpochDiff -&gt; DataType
toConstr :: EpochDiff -&gt; Constr
$ctoConstr :: EpochDiff -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c EpochDiff
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; EpochDiff -&gt; c EpochDiff
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep EpochDiff x -&gt; EpochDiff
forall x. EpochDiff -&gt; Rep EpochDiff x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep EpochDiff x -&gt; EpochDiff
$cfrom :: forall x. EpochDiff -&gt; Rep EpochDiff x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761324"><span id="local-6989586621679761326"><span id="local-6989586621679761328"><span class="annot"><span class="annottext">Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
Proxy EpochDiff -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy EpochDiff -&gt; String
$cshowTypeOf :: Proxy EpochDiff -&gt; String
wNoThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; EpochDiff -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679761324"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-comment">-- | These `PredicateFailure`s are all &quot;throwable&quot;. The disjunction of the</span><span>
</span><span id="line-330"></span><span class="hs-comment">--   rules' preconditions is not `True` - the `PredicateFailure`s represent</span><span>
</span><span id="line-331"></span><span class="hs-comment">--   `False` cases.</span><span>
</span><span id="line-332"></span><span id="local-6989586621679761322"><span id="local-6989586621679761323"></span></span><span class="hs-keyword">data</span><span> </span><span id="SdelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegPredicateFailure"><span class="hs-identifier hs-var">SdelegPredicateFailure</span></a></span></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsNotGenesisKey"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#IsNotGenesisKey"><span class="hs-identifier hs-var">IsNotGenesisKey</span></a></span></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EpochInThePast"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochInThePast"><span class="hs-identifier hs-var">EpochInThePast</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="EpochPastNextEpoch"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochPastNextEpoch"><span class="hs-identifier hs-var">EpochPastNextEpoch</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HasAlreadyDelegated"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#HasAlreadyDelegated"><span class="hs-identifier hs-var">HasAlreadyDelegated</span></a></span></span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IsAlreadyScheduled"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#IsAlreadyScheduled"><span class="hs-identifier hs-var">IsAlreadyScheduled</span></a></span></span><span>
</span><span id="line-338"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DoesNotVerify"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DoesNotVerify"><span class="hs-identifier hs-var">DoesNotVerify</span></a></span></span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761310"><span id="local-6989586621679761314"><span class="annot"><span class="annottext">SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
$c/= :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
== :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
$c== :: SdelegPredicateFailure -&gt; SdelegPredicateFailure -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761300"><span id="local-6989586621679761302"><span id="local-6989586621679761308"><span class="annot"><span class="annottext">Int -&gt; SdelegPredicateFailure -&gt; ShowS
[SdelegPredicateFailure] -&gt; ShowS
SdelegPredicateFailure -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SdelegPredicateFailure] -&gt; ShowS
$cshowList :: [SdelegPredicateFailure] -&gt; ShowS
show :: SdelegPredicateFailure -&gt; String
$cshow :: SdelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; SdelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; SdelegPredicateFailure -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761266"><span id="local-6989586621679761268"><span id="local-6989586621679761270"><span id="local-6989586621679761272"><span id="local-6989586621679761274"><span id="local-6989586621679761276"><span id="local-6989586621679761278"><span id="local-6989586621679761280"><span id="local-6989586621679761282"><span id="local-6989586621679761284"><span id="local-6989586621679761286"><span id="local-6989586621679761288"><span id="local-6989586621679761292"><span id="local-6989586621679761296"><span class="annot"><span class="annottext">Typeable SdelegPredicateFailure
SdelegPredicateFailure -&gt; DataType
SdelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegPredicateFailure -&gt; SdelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegPredicateFailure
-&gt; c SdelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegPredicateFailure)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegPredicateFailure -&gt; m SdelegPredicateFailure
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; u
gmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegPredicateFailure -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegPredicateFailure -&gt; SdelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegPredicateFailure -&gt; SdelegPredicateFailure
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegPredicateFailure)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegPredicateFailure)
dataTypeOf :: SdelegPredicateFailure -&gt; DataType
$cdataTypeOf :: SdelegPredicateFailure -&gt; DataType
toConstr :: SdelegPredicateFailure -&gt; Constr
$ctoConstr :: SdelegPredicateFailure -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegPredicateFailure
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegPredicateFailure
-&gt; c SdelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegPredicateFailure
-&gt; c SdelegPredicateFailure
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep SdelegPredicateFailure x -&gt; SdelegPredicateFailure
forall x. SdelegPredicateFailure -&gt; Rep SdelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SdelegPredicateFailure x -&gt; SdelegPredicateFailure
$cfrom :: forall x. SdelegPredicateFailure -&gt; Rep SdelegPredicateFailure x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761258"><span id="local-6989586621679761260"><span id="local-6989586621679761262"><span class="annot"><span class="annottext">Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy SdelegPredicateFailure -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy SdelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy SdelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; SdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679761258"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679761242"><span id="local-6989586621679761244"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegPredicateFailure"><span class="hs-identifier hs-type">SdelegPredicateFailure</span></a></span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>  </span><span id="local-6989586621679761238"><span class="annot"><span class="annottext">initialRules :: [InitialRule SDELEG]
</span><a href="#local-6989586621679761238"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-350"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dSStateScheduledDelegations :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier hs-var">_dSStateScheduledDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-351"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dSStateKeyEpochDelegations :: Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dSStateKeyEpochDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-352"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-354"></span><span>  </span><span id="local-6989586621679761179"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule SDELEG]
</span><a href="#local-6989586621679761179"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761178"><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761177"><span class="annot"><span class="annottext">State SDELEG
</span><a href="#local-6989586621679761177"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761176"><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-357"></span><span>        </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; VKey -&gt; a -&gt; Sig a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#verify"><span class="hs-identifier hs-var">verify</span></a></span><span>
</span><span id="line-358"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#unVKeyGenesis"><span class="hs-identifier hs-var">unVKeyGenesis</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var">delegator</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#dbody"><span class="hs-identifier hs-var">dbody</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; Sig (VKey, Epoch)
</span><a href="Byron.Spec.Ledger.Delegation.html#signature"><span class="hs-keyword hs-var">signature</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>          </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#DoesNotVerify"><span class="hs-identifier hs-var">DoesNotVerify</span></a></span><span>
</span><span id="line-362"></span><span>        </span><span class="annot"><span class="annottext">DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679761175"><span class="hs-identifier hs-var">notAlreadyDelegated</span></a></span><span> </span><span class="annot"><span class="annottext">State SDELEG
</span><a href="#local-6989586621679761177"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#HasAlreadyDelegated"><span class="hs-identifier hs-var">HasAlreadyDelegated</span></a></span><span>
</span><span id="line-363"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679761174"><span class="annot"><span class="annottext">d :: SlotCount
</span><a href="#local-6989586621679761174"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier hs-var">liveAfter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasK s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#k"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>        </span><span class="annot"><span class="annottext">SlotCount -&gt; DSEnv -&gt; DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679761173"><span class="hs-identifier hs-var">notAlreadyScheduled</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679761174"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">State SDELEG
</span><a href="#local-6989586621679761177"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#IsAlreadyScheduled"><span class="hs-identifier hs-var">IsAlreadyScheduled</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.member</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">_1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#IsNotGenesisKey"><span class="hs-identifier hs-var">IsNotGenesisKey</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-367"></span><span>          </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span>
</span><span id="line-368"></span><span>          </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-369"></span><span>            </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span>
</span><span id="line-370"></span><span>              </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">EpochDiff -&gt; SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#EpochInThePast"><span class="hs-identifier hs-var">EpochInThePast</span></a></span><span>
</span><span id="line-371"></span><span>                </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-372"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">currentEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#currentEpoch"><span class="hs-identifier hs-var">currentEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span>
</span><span id="line-373"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">certEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#certEpoch"><span class="hs-identifier hs-var">certEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span>
</span><span id="line-374"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-375"></span><span>        </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span>
</span><span id="line-376"></span><span>          </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span>
</span><span id="line-377"></span><span>          </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-378"></span><span>            </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span>
</span><span id="line-379"></span><span>            </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><span class="hs-number">1</span></span><span>
</span><span id="line-380"></span><span>              </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">EpochDiff -&gt; SdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#EpochPastNextEpoch"><span class="hs-identifier hs-var">EpochPastNextEpoch</span></a></span><span>
</span><span id="line-381"></span><span>                </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#EpochDiff"><span class="hs-identifier hs-type">EpochDiff</span></a></span><span>
</span><span id="line-382"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">currentEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#currentEpoch"><span class="hs-identifier hs-var">currentEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span>
</span><span id="line-383"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">certEpoch :: Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#certEpoch"><span class="hs-identifier hs-var">certEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span>
</span><span id="line-384"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-385"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-386"></span><span>          </span><span class="annot"><span class="annottext">State SDELEG
</span><a href="#local-6989586621679761177"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-387"></span><span>            </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-388"></span><span>              </span><span class="annot"><span class="annottext">forall a s t. Monoid a =&gt; ASetter s t a a -&gt; a -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">&lt;&gt;~</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-389"></span><span>                    </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEG
</span><a href="#local-6989586621679761178"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-operator hs-var">`addSlot`</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679761174"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-390"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span>
</span><span id="line-391"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-393"></span><span>            </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679761168"><span class="hs-identifier hs-var">epochDelegator</span></a></span><span> </span><span class="annot"><span class="annottext">Signal SDELEG
</span><a href="#local-6989586621679761176"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-comment">-- Check that this delegator hasn't already delegated this epoch</span><span>
</span><span id="line-397"></span><span>      </span><span class="annot"><a href="#local-6989586621679761175"><span class="hs-identifier hs-type">notAlreadyDelegated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-398"></span><span>      </span><span id="local-6989586621679761175"><span class="annot"><span class="annottext">notAlreadyDelegated :: DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679761175"><span class="hs-identifier hs-var hs-var">notAlreadyDelegated</span></a></span></span><span> </span><span id="local-6989586621679761167"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679761167"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679761166"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679761166"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.notMember</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert -&gt; (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679761168"><span class="hs-identifier hs-var">epochDelegator</span></a></span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679761166"><span class="hs-identifier hs-var">cert</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679761167"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span>      </span><span class="annot"><a href="#local-6989586621679761168"><span class="hs-identifier hs-type">epochDelegator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>      </span><span id="local-6989586621679761168"><span class="annot"><span class="annottext">epochDelegator :: DCert -&gt; (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679761168"><span class="hs-identifier hs-var hs-var">epochDelegator</span></a></span></span><span> </span><span id="local-6989586621679761164"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679761164"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679761164"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#depoch"><span class="hs-identifier hs-var">depoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679761164"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">_1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span>      </span><span class="hs-comment">-- Check whether there is a scheduled delegation from this key</span><span>
</span><span id="line-405"></span><span>      </span><span class="annot"><a href="#local-6989586621679761173"><span class="hs-identifier hs-type">notAlreadyScheduled</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-406"></span><span>      </span><span id="local-6989586621679761173"><span class="annot"><span class="annottext">notAlreadyScheduled :: SlotCount -&gt; DSEnv -&gt; DSState -&gt; DCert -&gt; Bool
</span><a href="#local-6989586621679761173"><span class="hs-identifier hs-var hs-var">notAlreadyScheduled</span></a></span></span><span> </span><span id="local-6989586621679761163"><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679761163"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679761162"><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679761162"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679761161"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679761161"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621679761160"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679761160"><span class="hs-identifier hs-var">cert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-407"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.notElem</span></a></span><span>
</span><span id="line-408"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679761162"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-operator hs-var">`addSlot`</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><a href="#local-6989586621679761163"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679761160"><span class="hs-identifier hs-var">cert</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#dwho"><span class="hs-identifier hs-var">dwho</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. Field1 s t a b =&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">_1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679761161"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="hs-comment">-- | Compute after which slot the delegation certificate will become live,</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- using the chain stability parameter.</span><span>
</span><span id="line-413"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier hs-type">liveAfter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#BlockCount"><span class="hs-identifier hs-type">BlockCount</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-type">SlotCount</span></a></span><span>
</span><span id="line-414"></span><span id="liveAfter"><span class="annot"><span class="annottext">liveAfter :: BlockCount -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Delegation.html#liveAfter"><span class="hs-identifier hs-var hs-var">liveAfter</span></a></span></span><span> </span><span id="local-6989586621679761158"><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679761158"><span class="hs-identifier hs-var">bc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; SlotCount
</span><a href="Byron.Spec.Ledger.Core.html#SlotCount"><span class="hs-identifier hs-var">SlotCount</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount -&gt; Word64
</span><a href="Byron.Spec.Ledger.Core.html#unBlockCount"><span class="hs-identifier hs-var">unBlockCount</span></a></span><span> </span><span class="annot"><span class="annottext">BlockCount
</span><a href="#local-6989586621679761158"><span class="hs-identifier hs-var">bc</span></a></span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span class="hs-comment">-- | None of these `PredicateFailure`s are actually &quot;throwable&quot;. The</span><span>
</span><span id="line-417"></span><span class="hs-comment">--   disjuction of the rules' preconditions is `True`, which means that one of</span><span>
</span><span id="line-418"></span><span class="hs-comment">--   them will pass. The `PredicateFailure` just act as switches to direct</span><span>
</span><span id="line-419"></span><span class="hs-comment">--   control flow to the successful one.</span><span>
</span><span id="line-420"></span><span id="local-6989586621679761155"><span id="local-6989586621679761156"></span></span><span class="hs-keyword">data</span><span> </span><span id="AdelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegPredicateFailure"><span class="hs-identifier hs-var">AdelegPredicateFailure</span></a></span></span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="S_BeforeExistingDelegation"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_BeforeExistingDelegation"><span class="hs-identifier hs-var">S_BeforeExistingDelegation</span></a></span></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_NoLastDelegation"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_NoLastDelegation"><span class="hs-identifier hs-var">S_NoLastDelegation</span></a></span></span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_AfterExistingDelegation"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_AfterExistingDelegation"><span class="hs-identifier hs-var">S_AfterExistingDelegation</span></a></span></span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="S_AlreadyADelegateOf"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#S_AlreadyADelegateOf"><span class="hs-identifier hs-var">S_AlreadyADelegateOf</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-425"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761145"><span id="local-6989586621679761149"><span class="annot"><span class="annottext">AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
$c/= :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
== :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
$c== :: AdelegPredicateFailure -&gt; AdelegPredicateFailure -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761136"><span id="local-6989586621679761138"><span id="local-6989586621679761143"><span class="annot"><span class="annottext">Int -&gt; AdelegPredicateFailure -&gt; ShowS
[AdelegPredicateFailure] -&gt; ShowS
AdelegPredicateFailure -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AdelegPredicateFailure] -&gt; ShowS
$cshowList :: [AdelegPredicateFailure] -&gt; ShowS
show :: AdelegPredicateFailure -&gt; String
$cshow :: AdelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; AdelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; AdelegPredicateFailure -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761102"><span id="local-6989586621679761104"><span id="local-6989586621679761106"><span id="local-6989586621679761108"><span id="local-6989586621679761110"><span id="local-6989586621679761112"><span id="local-6989586621679761114"><span id="local-6989586621679761116"><span id="local-6989586621679761118"><span id="local-6989586621679761120"><span id="local-6989586621679761122"><span id="local-6989586621679761124"><span id="local-6989586621679761128"><span id="local-6989586621679761132"><span class="annot"><span class="annottext">Typeable AdelegPredicateFailure
AdelegPredicateFailure -&gt; DataType
AdelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegPredicateFailure -&gt; AdelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegPredicateFailure
-&gt; c AdelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegPredicateFailure)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegPredicateFailure -&gt; m AdelegPredicateFailure
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; u
gmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegPredicateFailure -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegPredicateFailure -&gt; AdelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegPredicateFailure -&gt; AdelegPredicateFailure
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegPredicateFailure)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegPredicateFailure)
dataTypeOf :: AdelegPredicateFailure -&gt; DataType
$cdataTypeOf :: AdelegPredicateFailure -&gt; DataType
toConstr :: AdelegPredicateFailure -&gt; Constr
$ctoConstr :: AdelegPredicateFailure -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegPredicateFailure
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegPredicateFailure
-&gt; c AdelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegPredicateFailure
-&gt; c AdelegPredicateFailure
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep AdelegPredicateFailure x -&gt; AdelegPredicateFailure
forall x. AdelegPredicateFailure -&gt; Rep AdelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AdelegPredicateFailure x -&gt; AdelegPredicateFailure
$cfrom :: forall x. AdelegPredicateFailure -&gt; Rep AdelegPredicateFailure x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679761094"><span id="local-6989586621679761096"><span id="local-6989586621679761098"><span class="annot"><span class="annottext">Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy AdelegPredicateFailure -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy AdelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy AdelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; AdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679761094"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="hs-comment">-- | Delegation rules</span><span>
</span><span id="line-428"></span><span class="hs-keyword">data</span><span> </span><span id="ADELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-var">ADELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679761064"><span id="local-6989586621679761066"><span id="local-6989586621679761068"><span id="local-6989586621679761070"><span id="local-6989586621679761072"><span id="local-6989586621679761074"><span id="local-6989586621679761076"><span id="local-6989586621679761078"><span id="local-6989586621679761080"><span id="local-6989586621679761082"><span id="local-6989586621679761084"><span id="local-6989586621679761086"><span id="local-6989586621679761088"><span id="local-6989586621679761090"><span class="annot"><span class="annottext">Typeable ADELEG
ADELEG -&gt; DataType
ADELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ADELEG -&gt; ADELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEG)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEG -&gt; m ADELEG
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEG -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEG -&gt; ADELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEG -&gt; ADELEG
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEG)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEG)
dataTypeOf :: ADELEG -&gt; DataType
$cdataTypeOf :: ADELEG -&gt; DataType
toConstr :: ADELEG -&gt; Constr
$ctoConstr :: ADELEG -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEG
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEG -&gt; c ADELEG
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679761048"><span id="local-6989586621679761050"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-431"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-432"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-434"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegPredicateFailure"><span class="hs-identifier hs-type">AdelegPredicateFailure</span></a></span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span>  </span><span id="local-6989586621679761042"><span class="annot"><span class="annottext">initialRules :: [InitialRule ADELEG]
</span><a href="#local-6989586621679761042"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-437"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-438"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679761041"><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679761041"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-439"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-440"></span><span>          </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-441"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-442"></span><span>                </span><span class="annot"><span class="annottext">forall a b. (Ord a, Ord b) =&gt; [(a, b)] -&gt; Bimap a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-identifier hs-var">Bimap.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-443"></span><span>                  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679761039"><span class="annot"><span class="annottext">vkg :: VKeyGenesis
</span><a href="#local-6989586621679761039"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span> </span><span id="local-6989586621679761038"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679761038"><span class="hs-identifier hs-var">key</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679761039"><span class="hs-identifier hs-var">vkg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679761038"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679761041"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. (k -&gt; a) -&gt; Set k -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.fromSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-var">Slot</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679761041"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-445"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span>  </span><span id="local-6989586621679760997"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule ADELEG]
</span><a href="#local-6989586621679760997"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-450"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span>
</span><span id="line-451"></span><span>          </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679760996"><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679760996"><span class="hs-identifier hs-var">_env</span></a></span></span><span>
</span><span id="line-452"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-453"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dStateDelegationMap :: DState -&gt; Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679760995"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679760995"><span class="hs-identifier hs-var">dms</span></a></span></span><span>
</span><span id="line-454"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dStateLastDelegation :: DState -&gt; Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679760994"><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679760994"><span class="hs-identifier hs-var">dws</span></a></span></span><span>
</span><span id="line-455"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-456"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760993"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760993"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760992"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760992"><span class="hs-identifier hs-var">vks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760991"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760991"><span class="hs-identifier hs-var">vkd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-458"></span><span>          </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-459"></span><span>        </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760991"><span class="hs-identifier hs-var">vkd</span></a></span><span> </span><span class="annot"><span class="annottext">forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2209"><span class="hs-operator hs-var">&#8713;</span></a></span><span> </span><span class="annot"><span class="annottext">forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679760995"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">VKey -&gt; VKeyGenesis -&gt; AdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#S_AlreadyADelegateOf"><span class="hs-identifier hs-var">S_AlreadyADelegateOf</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760991"><span class="hs-identifier hs-var">vkd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679760995"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (Ord a, Ord b) =&gt; Bimap a b -&gt; b -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/bimap-0.5.0-64183a8e8ee1fd6a92274c5884ae84a01afa114c2c7b8dbf1b64f7056690453c/share/doc/html/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760991"><span class="hs-identifier hs-var">vkd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760992"><span class="hs-identifier hs-var">vks</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679760994"><span class="hs-identifier hs-var">dws</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-461"></span><span>          </span><span class="annot"><span class="annottext">Maybe Slot
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- If vks hasn't delegated, then we proceed and</span><span>
</span><span id="line-462"></span><span>          </span><span class="hs-comment">-- update the @ADELEG@ state.</span><span>
</span><span id="line-463"></span><span>          </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679760989"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760989"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760989"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760993"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">AdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#S_BeforeExistingDelegation"><span class="hs-identifier hs-var">S_BeforeExistingDelegation</span></a></span><span>
</span><span id="line-464"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$!</span></a></span><span>
</span><span id="line-465"></span><span>          </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-466"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679760995"><span class="hs-identifier hs-var">dms</span></a></span><span> </span><span class="annot"><span class="annottext">forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760992"><span class="hs-identifier hs-var">vks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760991"><span class="hs-identifier hs-var">vkd</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-467"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679760994"><span class="hs-identifier hs-var">dws</span></a></span><span> </span><span class="annot"><span class="annottext">forall m (f :: * -&gt; *).
(Relation m, Ord (Domain m), Ord (Range m), Foldable f) =&gt;
m -&gt; f (Domain m, Range m) -&gt; m
</span><a href="Byron.Spec.Ledger.Core.html#%2A03"><span class="hs-operator hs-var">&#10755;</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760992"><span class="hs-identifier hs-var">vks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760993"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-468"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-469"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-470"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span>
</span><span id="line-471"></span><span>          </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679760986"><span class="annot"><span class="annottext">Environment ADELEG
</span><a href="#local-6989586621679760986"><span class="hs-identifier hs-var">_env</span></a></span></span><span>
</span><span id="line-472"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760985"><span class="annot"><span class="annottext">st :: State ADELEG
</span><a href="#local-6989586621679760985"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-473"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dStateDelegationMap :: DState -&gt; Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateDelegationMap"><span class="hs-identifier hs-var">_dStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679760984"><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679760984"><span class="hs-identifier hs-var">dms</span></a></span></span><span>
</span><span id="line-474"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dStateLastDelegation :: DState -&gt; Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dStateLastDelegation"><span class="hs-identifier hs-var">_dStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679760983"><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679760983"><span class="hs-identifier hs-var">dws</span></a></span></span><span>
</span><span id="line-475"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-476"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760982"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760982"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760981"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760981"><span class="hs-identifier hs-var">vks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760980"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760980"><span class="hs-identifier hs-var">vkd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-478"></span><span>          </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-479"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760980"><span class="hs-identifier hs-var">vkd</span></a></span><span> </span><span class="annot"><span class="annottext">forall a (f :: * -&gt; *). (Eq a, Foldable f) =&gt; a -&gt; f a -&gt; Bool
</span><a href="Byron.Spec.Ledger.Core.html#%2208"><span class="hs-operator hs-var">&#8712;</span></a></span><span> </span><span class="annot"><span class="annottext">forall m. (Relation m, Ord (Range m)) =&gt; m -&gt; Set (Range m)
</span><a href="Byron.Spec.Ledger.Core.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
</span><a href="#local-6989586621679760984"><span class="hs-identifier hs-var">dms</span></a></span><span>
</span><span id="line-480"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State ADELEG
</span><a href="#local-6989586621679760985"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-481"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-482"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760981"><span class="hs-identifier hs-var">vks</span></a></span><span> </span><span class="annot"><span class="annottext">Map VKeyGenesis Slot
</span><a href="#local-6989586621679760983"><span class="hs-identifier hs-var">dws</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-483"></span><span>              </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679760979"><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760979"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760979"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Slot
</span><a href="#local-6989586621679760982"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts (ctx :: RuleType).
Bool -&gt; PredicateFailure sts -&gt; Rule sts ctx ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-operator hs-var">?!</span></a></span><span> </span><span class="annot"><span class="annottext">AdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#S_AfterExistingDelegation"><span class="hs-identifier hs-var">S_AfterExistingDelegation</span></a></span><span>
</span><span id="line-484"></span><span>              </span><span class="annot"><span class="annottext">Maybe Slot
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-485"></span><span>                </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-486"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This can't happen since otherwise &quot;</span></span><span>
</span><span id="line-487"></span><span>                    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the previous rule would have been triggered.&quot;</span></span><span>
</span><span id="line-488"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State ADELEG
</span><a href="#local-6989586621679760985"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-489"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span class="hs-comment">-- | Delegation scheduling sequencing</span><span>
</span><span id="line-492"></span><span class="hs-keyword">data</span><span> </span><span id="SDELEGS"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-var">SDELEGS</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760948"><span id="local-6989586621679760950"><span id="local-6989586621679760952"><span id="local-6989586621679760954"><span id="local-6989586621679760956"><span id="local-6989586621679760958"><span id="local-6989586621679760960"><span id="local-6989586621679760962"><span id="local-6989586621679760964"><span id="local-6989586621679760966"><span id="local-6989586621679760968"><span id="local-6989586621679760970"><span id="local-6989586621679760972"><span id="local-6989586621679760974"><span class="annot"><span class="annottext">Typeable SDELEGS
SDELEGS -&gt; DataType
SDELEGS -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; SDELEGS -&gt; SDELEGS
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEGS)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEGS)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; SDELEGS -&gt; m SDELEGS
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; SDELEGS -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; SDELEGS -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEGS -&gt; SDELEGS
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; SDELEGS -&gt; SDELEGS
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEGS)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c SDELEGS)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEGS)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SDELEGS)
dataTypeOf :: SDELEGS -&gt; DataType
$cdataTypeOf :: SDELEGS -&gt; DataType
toConstr :: SDELEGS -&gt; Constr
$ctoConstr :: SDELEGS -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SDELEGS
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; SDELEGS -&gt; c SDELEGS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span id="local-6989586621679760946"><span id="local-6989586621679760947"></span></span><span class="hs-keyword">data</span><span> </span><span id="SdelegsPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegsPredicateFailure"><span class="hs-identifier hs-var">SdelegsPredicateFailure</span></a></span></span><span>
</span><span id="line-495"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SDelegFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDelegFailure"><span class="hs-identifier hs-var">SDelegFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760940"><span id="local-6989586621679760943"><span class="annot"><span class="annottext">SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
$c/= :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
== :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
$c== :: SdelegsPredicateFailure -&gt; SdelegsPredicateFailure -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760932"><span id="local-6989586621679760934"><span id="local-6989586621679760938"><span class="annot"><span class="annottext">Int -&gt; SdelegsPredicateFailure -&gt; ShowS
[SdelegsPredicateFailure] -&gt; ShowS
SdelegsPredicateFailure -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [SdelegsPredicateFailure] -&gt; ShowS
$cshowList :: [SdelegsPredicateFailure] -&gt; ShowS
show :: SdelegsPredicateFailure -&gt; String
$cshow :: SdelegsPredicateFailure -&gt; String
showsPrec :: Int -&gt; SdelegsPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; SdelegsPredicateFailure -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760900"><span id="local-6989586621679760902"><span id="local-6989586621679760904"><span id="local-6989586621679760906"><span id="local-6989586621679760908"><span id="local-6989586621679760910"><span id="local-6989586621679760912"><span id="local-6989586621679760914"><span id="local-6989586621679760916"><span id="local-6989586621679760918"><span id="local-6989586621679760920"><span id="local-6989586621679760922"><span id="local-6989586621679760925"><span id="local-6989586621679760928"><span class="annot"><span class="annottext">Typeable SdelegsPredicateFailure
SdelegsPredicateFailure -&gt; DataType
SdelegsPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegsPredicateFailure -&gt; SdelegsPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegsPredicateFailure
-&gt; c SdelegsPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegsPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegsPredicateFailure)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; SdelegsPredicateFailure -&gt; m SdelegsPredicateFailure
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; u
gmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; SdelegsPredicateFailure -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; SdelegsPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegsPredicateFailure -&gt; SdelegsPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; SdelegsPredicateFailure -&gt; SdelegsPredicateFailure
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegsPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c SdelegsPredicateFailure)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegsPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c SdelegsPredicateFailure)
dataTypeOf :: SdelegsPredicateFailure -&gt; DataType
$cdataTypeOf :: SdelegsPredicateFailure -&gt; DataType
toConstr :: SdelegsPredicateFailure -&gt; Constr
$ctoConstr :: SdelegsPredicateFailure -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c SdelegsPredicateFailure
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegsPredicateFailure
-&gt; c SdelegsPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; SdelegsPredicateFailure
-&gt; c SdelegsPredicateFailure
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep SdelegsPredicateFailure x -&gt; SdelegsPredicateFailure
forall x. SdelegsPredicateFailure -&gt; Rep SdelegsPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep SdelegsPredicateFailure x -&gt; SdelegsPredicateFailure
$cfrom :: forall x. SdelegsPredicateFailure -&gt; Rep SdelegsPredicateFailure x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760892"><span id="local-6989586621679760894"><span id="local-6989586621679760896"><span class="annot"><span class="annottext">Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy SdelegsPredicateFailure -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy SdelegsPredicateFailure -&gt; String
$cshowTypeOf :: Proxy SdelegsPredicateFailure -&gt; String
wNoThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; SdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679760892"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760876"><span id="local-6989586621679760878"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-499"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-501"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-502"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SdelegsPredicateFailure"><span class="hs-identifier hs-type">SdelegsPredicateFailure</span></a></span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span>  </span><span id="local-6989586621679760873"><span class="annot"><span class="annottext">initialRules :: [InitialRule SDELEGS]
</span><a href="#local-6989586621679760873"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-505"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-506"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679760872"><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679760872"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-507"></span><span>        </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. Environment sts -&gt; IRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679760872"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-508"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-509"></span><span>  </span><span id="local-6989586621679760862"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule SDELEGS]
</span><a href="#local-6989586621679760862"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-511"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760861"><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679760861"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760860"><span class="annot"><span class="annottext">State SDELEGS
</span><a href="#local-6989586621679760860"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760859"><span class="annot"><span class="annottext">Signal SDELEGS
</span><a href="#local-6989586621679760859"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-512"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Signal SDELEGS
</span><a href="#local-6989586621679760859"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-513"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State SDELEGS
</span><a href="#local-6989586621679760860"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-514"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679760858"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679760858"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679760857"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760857"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-515"></span><span>            </span><span id="local-6989586621679760856"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760856"><span class="hs-identifier hs-var">dss'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679760861"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State SDELEGS
</span><a href="#local-6989586621679760860"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679760858"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>            </span><span id="local-6989586621679760855"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760855"><span class="hs-identifier hs-var">dss''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment SDELEGS
</span><a href="#local-6989586621679760861"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760856"><span class="hs-identifier hs-var">dss'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760857"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760855"><span class="hs-identifier hs-var">dss''</span></a></span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760847"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-521"></span><span>  </span><span id="local-6989586621679760845"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure SDELEG -&gt; PredicateFailure SDELEGS
</span><a href="#local-6989586621679760845"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG -&gt; SdelegsPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#SDelegFailure"><span class="hs-identifier hs-var">SDelegFailure</span></a></span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="hs-comment">-- | Delegation rules sequencing</span><span>
</span><span id="line-524"></span><span class="hs-keyword">data</span><span> </span><span id="ADELEGS"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-var">ADELEGS</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760815"><span id="local-6989586621679760817"><span id="local-6989586621679760819"><span id="local-6989586621679760821"><span id="local-6989586621679760823"><span id="local-6989586621679760825"><span id="local-6989586621679760827"><span id="local-6989586621679760829"><span id="local-6989586621679760831"><span id="local-6989586621679760833"><span id="local-6989586621679760835"><span id="local-6989586621679760837"><span id="local-6989586621679760839"><span id="local-6989586621679760841"><span class="annot"><span class="annottext">Typeable ADELEGS
ADELEGS -&gt; DataType
ADELEGS -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; ADELEGS -&gt; ADELEGS
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEGS)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEGS)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; ADELEGS -&gt; m ADELEGS
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; ADELEGS -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; ADELEGS -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEGS -&gt; ADELEGS
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; ADELEGS -&gt; ADELEGS
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEGS)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c ADELEGS)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEGS)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c ADELEGS)
dataTypeOf :: ADELEGS -&gt; DataType
$cdataTypeOf :: ADELEGS -&gt; DataType
toConstr :: ADELEGS -&gt; Constr
$ctoConstr :: ADELEGS -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c ADELEGS
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; ADELEGS -&gt; c ADELEGS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span id="local-6989586621679760813"><span id="local-6989586621679760814"></span></span><span class="hs-keyword">data</span><span> </span><span id="AdelegsPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegsPredicateFailure"><span class="hs-identifier hs-var">AdelegsPredicateFailure</span></a></span></span><span>
</span><span id="line-527"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ADelegFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADelegFailure"><span class="hs-identifier hs-var">ADelegFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760807"><span id="local-6989586621679760810"><span class="annot"><span class="annottext">AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
$c/= :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
== :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
$c== :: AdelegsPredicateFailure -&gt; AdelegsPredicateFailure -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760799"><span id="local-6989586621679760801"><span id="local-6989586621679760805"><span class="annot"><span class="annottext">Int -&gt; AdelegsPredicateFailure -&gt; ShowS
[AdelegsPredicateFailure] -&gt; ShowS
AdelegsPredicateFailure -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [AdelegsPredicateFailure] -&gt; ShowS
$cshowList :: [AdelegsPredicateFailure] -&gt; ShowS
show :: AdelegsPredicateFailure -&gt; String
$cshow :: AdelegsPredicateFailure -&gt; String
showsPrec :: Int -&gt; AdelegsPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; AdelegsPredicateFailure -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760767"><span id="local-6989586621679760769"><span id="local-6989586621679760771"><span id="local-6989586621679760773"><span id="local-6989586621679760775"><span id="local-6989586621679760777"><span id="local-6989586621679760779"><span id="local-6989586621679760781"><span id="local-6989586621679760783"><span id="local-6989586621679760785"><span id="local-6989586621679760787"><span id="local-6989586621679760789"><span id="local-6989586621679760792"><span id="local-6989586621679760795"><span class="annot"><span class="annottext">Typeable AdelegsPredicateFailure
AdelegsPredicateFailure -&gt; DataType
AdelegsPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegsPredicateFailure -&gt; AdelegsPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegsPredicateFailure
-&gt; c AdelegsPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegsPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegsPredicateFailure)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; AdelegsPredicateFailure -&gt; m AdelegsPredicateFailure
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; u
gmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; AdelegsPredicateFailure -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; AdelegsPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegsPredicateFailure -&gt; AdelegsPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; AdelegsPredicateFailure -&gt; AdelegsPredicateFailure
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegsPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c AdelegsPredicateFailure)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegsPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AdelegsPredicateFailure)
dataTypeOf :: AdelegsPredicateFailure -&gt; DataType
$cdataTypeOf :: AdelegsPredicateFailure -&gt; DataType
toConstr :: AdelegsPredicateFailure -&gt; Constr
$ctoConstr :: AdelegsPredicateFailure -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AdelegsPredicateFailure
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegsPredicateFailure
-&gt; c AdelegsPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; AdelegsPredicateFailure
-&gt; c AdelegsPredicateFailure
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep AdelegsPredicateFailure x -&gt; AdelegsPredicateFailure
forall x. AdelegsPredicateFailure -&gt; Rep AdelegsPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep AdelegsPredicateFailure x -&gt; AdelegsPredicateFailure
$cfrom :: forall x. AdelegsPredicateFailure -&gt; Rep AdelegsPredicateFailure x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760759"><span id="local-6989586621679760761"><span id="local-6989586621679760763"><span class="annot"><span class="annottext">Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy AdelegsPredicateFailure -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy AdelegsPredicateFailure -&gt; String
$cshowTypeOf :: Proxy AdelegsPredicateFailure -&gt; String
wNoThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; AdelegsPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679760759"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760743"><span id="local-6989586621679760745"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-531"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DState"><span class="hs-identifier hs-type">DState</span></a></span><span>
</span><span id="line-532"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Slot"><span class="hs-identifier hs-type">Slot</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-keyword">type</span><span>
</span><span id="line-536"></span><span>    </span><span id="PredicateFailure"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-537"></span><span>      </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#AdelegsPredicateFailure"><span class="hs-identifier hs-type">AdelegsPredicateFailure</span></a></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span>  </span><span id="local-6989586621679760740"><span class="annot"><span class="annottext">initialRules :: [InitialRule ADELEGS]
</span><a href="#local-6989586621679760740"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-541"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679760739"><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679760739"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-542"></span><span>        </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. Environment sts -&gt; IRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679760739"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-543"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-544"></span><span>  </span><span id="local-6989586621679760730"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule ADELEGS]
</span><a href="#local-6989586621679760730"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-546"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760729"><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679760729"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760728"><span class="annot"><span class="annottext">State ADELEGS
</span><a href="#local-6989586621679760728"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760727"><span class="annot"><span class="annottext">Signal ADELEGS
</span><a href="#local-6989586621679760727"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-547"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Signal ADELEGS
</span><a href="#local-6989586621679760727"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-548"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">State ADELEGS
</span><a href="#local-6989586621679760728"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-549"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679760726"><span class="annot"><span class="annottext">(Slot, (VKeyGenesis, VKey))
</span><a href="#local-6989586621679760726"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679760725"><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679760725"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-550"></span><span>            </span><span id="local-6989586621679760724"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760724"><span class="hs-identifier hs-var">ds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679760729"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State ADELEGS
</span><a href="#local-6989586621679760728"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Slot, (VKeyGenesis, VKey))
</span><a href="#local-6989586621679760726"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-551"></span><span>            </span><span id="local-6989586621679760723"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760723"><span class="hs-identifier hs-var">ds''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment ADELEGS
</span><a href="#local-6989586621679760729"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760724"><span class="hs-identifier hs-var">ds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679760725"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-552"></span><span>            </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760723"><span class="hs-identifier hs-var">ds''</span></a></span><span>
</span><span id="line-553"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760715"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEG"><span class="hs-identifier hs-type">ADELEG</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-556"></span><span>  </span><span id="local-6989586621679760714"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure ADELEG -&gt; PredicateFailure ADELEGS
</span><a href="#local-6989586621679760714"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADELEG -&gt; AdelegsPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#ADelegFailure"><span class="hs-identifier hs-var">ADelegFailure</span></a></span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="hs-comment">-- | Delegation interface</span><span>
</span><span id="line-559"></span><span class="hs-keyword">data</span><span> </span><span id="DELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-var">DELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760684"><span id="local-6989586621679760686"><span id="local-6989586621679760688"><span id="local-6989586621679760690"><span id="local-6989586621679760692"><span id="local-6989586621679760694"><span id="local-6989586621679760696"><span id="local-6989586621679760698"><span id="local-6989586621679760700"><span id="local-6989586621679760702"><span id="local-6989586621679760704"><span id="local-6989586621679760706"><span id="local-6989586621679760708"><span id="local-6989586621679760710"><span class="annot"><span class="annottext">Typeable DELEG
DELEG -&gt; DataType
DELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; DELEG -&gt; DELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DELEG)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; DELEG -&gt; m DELEG
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; DELEG -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DELEG -&gt; DELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; DELEG -&gt; DELEG
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c DELEG)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DELEG)
dataTypeOf :: DELEG -&gt; DataType
$cdataTypeOf :: DELEG -&gt; DataType
toConstr :: DELEG -&gt; Constr
$ctoConstr :: DELEG -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DELEG
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; DELEG -&gt; c DELEG
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span id="local-6989586621679760682"><span id="local-6989586621679760683"></span></span><span class="hs-keyword">data</span><span> </span><span id="DelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DelegPredicateFailure"><span class="hs-identifier hs-var">DelegPredicateFailure</span></a></span></span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SDelegSFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDelegSFailure"><span class="hs-identifier hs-var">SDelegSFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ADelegSFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADelegSFailure"><span class="hs-identifier hs-var">ADelegSFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760674"><span id="local-6989586621679760678"><span class="annot"><span class="annottext">DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
$c/= :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
== :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
$c== :: DelegPredicateFailure -&gt; DelegPredicateFailure -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760664"><span id="local-6989586621679760666"><span id="local-6989586621679760672"><span class="annot"><span class="annottext">Int -&gt; DelegPredicateFailure -&gt; ShowS
[DelegPredicateFailure] -&gt; ShowS
DelegPredicateFailure -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DelegPredicateFailure] -&gt; ShowS
$cshowList :: [DelegPredicateFailure] -&gt; ShowS
show :: DelegPredicateFailure -&gt; String
$cshow :: DelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; DelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; DelegPredicateFailure -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760630"><span id="local-6989586621679760632"><span id="local-6989586621679760634"><span id="local-6989586621679760636"><span id="local-6989586621679760638"><span id="local-6989586621679760640"><span id="local-6989586621679760642"><span id="local-6989586621679760644"><span id="local-6989586621679760646"><span id="local-6989586621679760648"><span id="local-6989586621679760650"><span id="local-6989586621679760652"><span id="local-6989586621679760656"><span id="local-6989586621679760660"><span class="annot"><span class="annottext">Typeable DelegPredicateFailure
DelegPredicateFailure -&gt; DataType
DelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; DelegPredicateFailure -&gt; DelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; DelegPredicateFailure
-&gt; c DelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c DelegPredicateFailure)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; DelegPredicateFailure -&gt; m DelegPredicateFailure
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; u
gmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; DelegPredicateFailure -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; DelegPredicateFailure -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; DelegPredicateFailure -&gt; DelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; DelegPredicateFailure -&gt; DelegPredicateFailure
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c DelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c DelegPredicateFailure)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c DelegPredicateFailure)
dataTypeOf :: DelegPredicateFailure -&gt; DataType
$cdataTypeOf :: DelegPredicateFailure -&gt; DataType
toConstr :: DelegPredicateFailure -&gt; Constr
$ctoConstr :: DelegPredicateFailure -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DelegPredicateFailure
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; DelegPredicateFailure
-&gt; c DelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; DelegPredicateFailure
-&gt; c DelegPredicateFailure
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep DelegPredicateFailure x -&gt; DelegPredicateFailure
forall x. DelegPredicateFailure -&gt; Rep DelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep DelegPredicateFailure x -&gt; DelegPredicateFailure
$cfrom :: forall x. DelegPredicateFailure -&gt; Rep DelegPredicateFailure x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760622"><span id="local-6989586621679760624"><span id="local-6989586621679760626"><span class="annot"><span class="annottext">Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy DelegPredicateFailure -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy DelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy DelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; DelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679760622"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760606"><span id="local-6989586621679760608"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span>
</span><span id="line-568"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIEnv"><span class="hs-identifier hs-type">DIEnv</span></a></span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DelegPredicateFailure"><span class="hs-identifier hs-type">DelegPredicateFailure</span></a></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span>  </span><span id="local-6989586621679760589"><span class="annot"><span class="annottext">initialRules :: [InitialRule DELEG]
</span><a href="#local-6989586621679760589"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-574"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-575"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">IRC</span></a></span><span> </span><span id="local-6989586621679760588"><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760588"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-576"></span><span>        </span><span id="local-6989586621679760587"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760587"><span class="hs-identifier hs-var">initADelegsState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. Environment sts -&gt; IRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760588"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span>        </span><span id="local-6989586621679760586"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760586"><span class="hs-identifier hs-var">initSDelegsState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. Environment sts -&gt; IRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">IRC</span></a></span><span> </span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760588"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-578"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$!</span></a></span><span>
</span><span id="line-579"></span><span>          </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span>
</span><span id="line-580"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dIStateDelegationMap :: Bimap VKeyGenesis VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateDelegationMap"><span class="hs-identifier hs-var">_dIStateDelegationMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760587"><span class="hs-identifier hs-var">initADelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span>
</span><span id="line-581"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dIStateLastDelegation :: Map VKeyGenesis Slot
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateLastDelegation"><span class="hs-identifier hs-var">_dIStateLastDelegation</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760587"><span class="hs-identifier hs-var">initADelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span>
</span><span id="line-582"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dIStateScheduledDelegations :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier hs-var">_dIStateScheduledDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760586"><span class="hs-identifier hs-var">initSDelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-583"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dIStateKeyEpochDelegations :: Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dIStateKeyEpochDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760586"><span class="hs-identifier hs-var">initSDelegsState</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-584"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-586"></span><span>  </span><span id="local-6989586621679760554"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule DELEG]
</span><a href="#local-6989586621679760554"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-588"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760553"><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760553"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760552"><span class="annot"><span class="annottext">State DELEG
</span><a href="#local-6989586621679760552"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760551"><span class="annot"><span class="annottext">Signal DELEG
</span><a href="#local-6989586621679760551"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-589"></span><span>        </span><span id="local-6989586621679760550"><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760550"><span class="hs-identifier hs-var">sds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760553"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State DELEG
</span><a href="#local-6989586621679760552"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' DIState DSState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDSState"><span class="hs-identifier hs-var">dIStateDSState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal DELEG
</span><a href="#local-6989586621679760551"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679760549"><span class="annot"><span class="annottext">slots :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679760549"><span class="hs-identifier hs-var hs-var">slots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760553"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760550"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-591"></span><span>        </span><span id="local-6989586621679760548"><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760548"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760553"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State DELEG
</span><a href="#local-6989586621679760552"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' DIState DState
</span><a href="Byron.Spec.Ledger.Delegation.html#dIStateDState"><span class="hs-identifier hs-var">dIStateDState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Slot, (VKeyGenesis, VKey))]
</span><a href="#local-6989586621679760549"><span class="hs-identifier hs-var">slots</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-592"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-593"></span><span>          </span><span class="annot"><span class="annottext">Bimap VKeyGenesis VKey
-&gt; Map VKeyGenesis Slot
-&gt; [(Slot, (VKeyGenesis, VKey))]
-&gt; Set (Epoch, VKeyGenesis)
-&gt; DIState
</span><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-var">DIState</span></a></span><span>
</span><span id="line-594"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760548"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasDelegationMap s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#delegationMap"><span class="hs-identifier hs-var">delegationMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DState
</span><a href="#local-6989586621679760548"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasLastDelegation s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#lastDelegation"><span class="hs-identifier hs-var">lastDelegation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760553"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasSlot s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#slot"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Slot -&gt; SlotCount -&gt; Slot
</span><a href="Byron.Spec.Ledger.Core.html#addSlot"><span class="hs-operator hs-var">`addSlot`</span></a></span><span> </span><span class="annot"><span class="annottext">SlotCount
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-597"></span><span>                </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760550"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasScheduledDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#scheduledDelegations"><span class="hs-identifier hs-var">scheduledDelegations</span></a></span><span>
</span><span id="line-598"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760553"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasEpoch s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-600"></span><span>                </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760550"><span class="hs-identifier hs-var">sds</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasKeyEpochDelegations s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#keyEpochDelegations"><span class="hs-identifier hs-var">keyEpochDelegations</span></a></span><span>
</span><span id="line-601"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760539"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGS"><span class="hs-identifier hs-type">SDELEGS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-605"></span><span>  </span><span id="local-6989586621679760538"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure SDELEGS -&gt; PredicateFailure DELEG
</span><a href="#local-6989586621679760538"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEGS -&gt; DelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#SDelegSFailure"><span class="hs-identifier hs-var">SDelegSFailure</span></a></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760530"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ADELEGS"><span class="hs-identifier hs-type">ADELEGS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-608"></span><span>  </span><span id="local-6989586621679760529"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure ADELEGS -&gt; PredicateFailure DELEG
</span><a href="#local-6989586621679760529"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure ADELEGS -&gt; DelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#ADelegSFailure"><span class="hs-identifier hs-var">ADelegSFailure</span></a></span><span>
</span><span id="line-609"></span><span>
</span><span id="line-610"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-611"></span><span class="hs-comment">-- Generators</span><span>
</span><span id="line-612"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier hs-type">dcertGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-615"></span><span id="dcertGen"><span class="annot"><span class="annottext">dcertGen :: DSEnv -&gt; Set (Epoch, VKeyGenesis) -&gt; Gen (Maybe DCert)
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier hs-var hs-var">dcertGen</span></a></span></span><span> </span><span id="local-6989586621679760528"><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679760528"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679760527"><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679760527"><span class="hs-identifier hs-var">eks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679760526"><span class="hs-identifier hs-type">allowed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-617"></span><span>      </span><span id="local-6989586621679760526"><span class="annot"><span class="annottext">allowed :: [VKeyGenesis]
</span><a href="#local-6989586621679760526"><span class="hs-identifier hs-var hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSEnv -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier hs-var">_dSEnvAllowedDelegators</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679760528"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span>      </span><span class="hs-comment">-- We can generate delegation certificates using the allowed delegators,</span><span>
</span><span id="line-619"></span><span>      </span><span class="hs-comment">-- and we can delegate for the current or next epoch only.</span><span>
</span><span id="line-620"></span><span>      </span><span class="annot"><a href="#local-6989586621679760525"><span class="hs-identifier hs-type">preCandidates</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>      </span><span id="local-6989586621679760525"><span class="annot"><span class="annottext">preCandidates :: Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679760525"><span class="hs-identifier hs-var hs-var">preCandidates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-622"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-623"></span><span>          </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var">_dSEnvEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679760528"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis]
</span><a href="#local-6989586621679760526"><span class="hs-identifier hs-var">allowed</span></a></span><span>
</span><span id="line-624"></span><span>            </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var">_dSEnvEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679760528"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis]
</span><a href="#local-6989586621679760526"><span class="hs-identifier hs-var">allowed</span></a></span><span>
</span><span id="line-625"></span><span>      </span><span class="hs-comment">-- We obtain the candidates by removing the ones that already delegated in</span><span>
</span><span id="line-626"></span><span>      </span><span class="hs-comment">-- this or next epoch.</span><span>
</span><span id="line-627"></span><span>      </span><span class="annot"><a href="#local-6989586621679760522"><span class="hs-identifier hs-type">candidates</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-628"></span><span>      </span><span id="local-6989586621679760522"><span class="annot"><span class="annottext">candidates :: [(Epoch, VKeyGenesis)]
</span><a href="#local-6989586621679760522"><span class="hs-identifier hs-var hs-var">candidates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679760525"><span class="hs-identifier hs-var">preCandidates</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">\\</span></a></span><span> </span><span class="annot"><span class="annottext">Set (Epoch, VKeyGenesis)
</span><a href="#local-6989586621679760527"><span class="hs-identifier hs-var">eks</span></a></span><span>
</span><span id="line-629"></span><span>      </span><span class="hs-comment">-- Next, we choose to whom these keys delegate.</span><span>
</span><span id="line-630"></span><span>      </span><span class="annot"><a href="#local-6989586621679760521"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-631"></span><span>      </span><span class="hs-comment">-- NOTE: we might want to make this configurable for now we chose an upper</span><span>
</span><span id="line-632"></span><span>      </span><span class="hs-comment">-- bound equal to two times the number of genesis keys to increase the</span><span>
</span><span id="line-633"></span><span>      </span><span class="hs-comment">-- chance of having two genesis keys delegating to the same key.</span><span>
</span><span id="line-634"></span><span>      </span><span id="local-6989586621679760521"><span class="annot"><span class="annottext">target :: [VKey]
</span><a href="#local-6989586621679760521"><span class="hs-identifier hs-var hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Owner -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-var">VKey</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier hs-var">Owner</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[VKeyGenesis]
</span><a href="#local-6989586621679760526"><span class="hs-identifier hs-var">allowed</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span>      </span><span id="local-6989586621679760518"><span class="annot"><span class="annottext">mkDCert' :: ((Epoch, VKeyGenesis), VKey) -&gt; DCert
</span><a href="#local-6989586621679760518"><span class="hs-identifier hs-var hs-var">mkDCert'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679760517"><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679760517"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760516"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760516"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760515"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760515"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Sig (VKey, Epoch) -&gt; VKey -&gt; Epoch -&gt; DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-var">mkDCert</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760516"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. VKeyGenesis -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#signWithGenesisKey"><span class="hs-identifier hs-var">signWithGenesisKey</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760516"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760515"><span class="hs-identifier hs-var">vk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679760517"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760515"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679760517"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-637"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)]
</span><a href="#local-6989586621679760522"><span class="hs-identifier hs-var">candidates</span></a></span><span>
</span><span id="line-638"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-639"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable f, MonadGen m) =&gt;
f a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Epoch, VKeyGenesis), VKey) -&gt; DCert
</span><a href="#local-6989586621679760518"><span class="hs-identifier hs-var">mkDCert'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[(Epoch, VKeyGenesis)]
</span><a href="#local-6989586621679760522"><span class="hs-identifier hs-var">candidates</span></a></span><span> </span><span class="annot"><span class="annottext">[VKey]
</span><a href="#local-6989586621679760521"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier hs-type">dcertsGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DIState"><span class="hs-identifier hs-type">DIState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-642"></span><span id="dcertsGen"><span class="annot"><span class="annottext">dcertsGen :: DSEnv -&gt; DIState -&gt; Gen [DCert]
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier hs-var hs-var">dcertsGen</span></a></span></span><span> </span><span id="local-6989586621679760512"><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679760512"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679760511"><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679760511"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-643"></span><span>  </span><span class="hs-comment">-- This generator can result in an empty list of delegation certificates if</span><span>
</span><span id="line-644"></span><span>  </span><span class="hs-comment">-- no delegation certificates can be produced, according to the delegation</span><span>
</span><span id="line-645"></span><span>  </span><span class="hs-comment">-- rules, given the initial state and environment.</span><span>
</span><span id="line-646"></span><span>  </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. TraceOrder -&gt; Trace s -&gt; [Signal s]
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier hs-var">traceSignals</span></a></span><span> </span><span class="annot"><span class="annottext">TraceOrder
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier hs-var">OldestFirst</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s.
HasTrace s =&gt;
BaseEnv s
-&gt; Word64
-&gt; Environment s
-&gt; State s
-&gt; SignalGenerator s
-&gt; Gen (Trace s)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier hs-var">genTrace</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760510"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679760512"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">DSState
</span><a href="#local-6989586621679760509"><span class="hs-identifier hs-var">subSt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s. HasTrace s =&gt; SignalGenerator s
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier hs-var">sigGen</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-647"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-648"></span><span>    </span><span id="local-6989586621679760510"><span class="annot"><span class="annottext">n :: Word64
</span><a href="#local-6989586621679760510"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv
</span><a href="#local-6989586621679760512"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. HasAllowedDelegators s a =&gt; Lens' s a
</span><a href="Byron.Spec.Ledger.Delegation.html#allowedDelegators"><span class="hs-identifier hs-var">allowedDelegators</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-8b2bea885eb8212a3ebcb31d917de3abc20fe0aa9e677bbb15eac33f7b96228a/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span>
</span><span id="line-649"></span><span>    </span><span id="local-6989586621679760509"><span class="annot"><span class="annottext">subSt :: DSState
</span><a href="#local-6989586621679760509"><span class="hs-identifier hs-var hs-var">subSt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-650"></span><span>      </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-651"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_dSStateScheduledDelegations :: [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateScheduledDelegations"><span class="hs-identifier hs-var">_dSStateScheduledDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DIState -&gt; [(Slot, (VKeyGenesis, VKey))]
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateScheduledDelegations"><span class="hs-identifier hs-var">_dIStateScheduledDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679760511"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-652"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_dSStateKeyEpochDelegations :: Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dSStateKeyEpochDelegations</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DIState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dIStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dIStateKeyEpochDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">DIState
</span><a href="#local-6989586621679760511"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-653"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="hs-comment">-- | Generate a random delegation certificate, which has a high probability of failing since</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- we do not consider the current delegation state. So for instance, we could generate a</span><span>
</span><span id="line-657"></span><span class="hs-comment">-- delegation certificate for a genesis key that already delegated in this epoch.</span><span>
</span><span id="line-658"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#randomDCertGen"><span class="hs-identifier hs-type">randomDCertGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-659"></span><span id="randomDCertGen"><span class="annot"><span class="annottext">randomDCertGen :: Environment DELEG -&gt; Gen DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#randomDCertGen"><span class="hs-identifier hs-var hs-var">randomDCertGen</span></a></span></span><span> </span><span id="local-6989586621679760508"><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760508"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-660"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679760507"><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760507"><span class="hs-identifier hs-var">vkg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760506"><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760506"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760505"><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679760505"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity VKeyGenesis
</span><a href="#local-6989586621679760504"><span class="hs-identifier hs-var">vkgGen'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity VKey
</span><a href="#local-6989586621679760503"><span class="hs-identifier hs-var">vkGen'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenT Identity Epoch
</span><a href="#local-6989586621679760502"><span class="hs-identifier hs-var">epochGen'</span></a></span><span>
</span><span id="line-661"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis -&gt; Sig (VKey, Epoch) -&gt; VKey -&gt; Epoch -&gt; DCert
</span><a href="Byron.Spec.Ledger.Delegation.html#mkDCert"><span class="hs-identifier hs-var">mkDCert</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760507"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. VKeyGenesis -&gt; a -&gt; Sig a
</span><a href="Byron.Spec.Ledger.Core.Omniscient.html#signWithGenesisKey"><span class="hs-identifier hs-var">signWithGenesisKey</span></a></span><span> </span><span class="annot"><span class="annottext">VKeyGenesis
</span><a href="#local-6989586621679760507"><span class="hs-identifier hs-var">vkg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760506"><span class="hs-identifier hs-var">vk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679760505"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VKey
</span><a href="#local-6989586621679760506"><span class="hs-identifier hs-var">vk</span></a></span><span> </span><span class="annot"><span class="annottext">Epoch
</span><a href="#local-6989586621679760505"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-662"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-663"></span><span>    </span><span id="local-6989586621679760504"><span class="annot"><span class="annottext">vkgGen' :: GenT Identity VKeyGenesis
</span><a href="#local-6989586621679760504"><span class="hs-identifier hs-var hs-var">vkgGen'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable f, MonadGen m) =&gt;
f a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679760501"><span class="hs-identifier hs-var">allowed</span></a></span><span>
</span><span id="line-664"></span><span>    </span><span id="local-6989586621679760501"><span class="annot"><span class="annottext">allowed :: Set VKeyGenesis
</span><a href="#local-6989586621679760501"><span class="hs-identifier hs-var hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvAllowedDelegators"><span class="hs-identifier hs-var">_dSEnvAllowedDelegators</span></a></span><span> </span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760508"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-665"></span><span>    </span><span id="local-6989586621679760503"><span class="annot"><span class="annottext">vkGen' :: GenT Identity VKey
</span><a href="#local-6989586621679760503"><span class="hs-identifier hs-var hs-var">vkGen'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable f, MonadGen m) =&gt;
f a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-var">Gen.element</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Owner -&gt; VKey
</span><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-var">VKey</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Natural -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#Owner"><span class="hs-identifier hs-var">Owner</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">Set VKeyGenesis
</span><a href="#local-6989586621679760501"><span class="hs-identifier hs-var">allowed</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-666"></span><span>    </span><span id="local-6989586621679760502"><span class="annot"><span class="annottext">epochGen' :: GenT Identity Epoch
</span><a href="#local-6989586621679760502"><span class="hs-identifier hs-var hs-var">epochGen'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-667"></span><span>      </span><span class="annot"><span class="annottext">Word64 -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-var">Epoch</span></a></span><span>
</span><span id="line-668"></span><span>        </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-comment">-- We don't care about underflow. We want to generate large epochs anyway.</span><span>
</span><span id="line-669"></span><span>        </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760500"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>        </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-var">Gen.integral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; a -&gt; Range a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-var">Range.constant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-671"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-672"></span><span>        </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span> </span><span id="local-6989586621679760500"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760500"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Epoch
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSEnvEpoch"><span class="hs-identifier hs-var">_dSEnvEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">Environment DELEG
</span><a href="#local-6989586621679760508"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span class="hs-comment">-- | Dummy transition system needed for generating sequences of delegation certificates.</span><span>
</span><span id="line-675"></span><span class="hs-keyword">data</span><span> </span><span id="MSDELEG"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-var">MSDELEG</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760468"><span id="local-6989586621679760470"><span id="local-6989586621679760472"><span id="local-6989586621679760474"><span id="local-6989586621679760476"><span id="local-6989586621679760478"><span id="local-6989586621679760480"><span id="local-6989586621679760482"><span id="local-6989586621679760484"><span id="local-6989586621679760486"><span id="local-6989586621679760488"><span id="local-6989586621679760490"><span id="local-6989586621679760492"><span id="local-6989586621679760494"><span class="annot"><span class="annottext">Typeable MSDELEG
MSDELEG -&gt; DataType
MSDELEG -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; MSDELEG -&gt; MSDELEG
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MSDELEG)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MSDELEG)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MSDELEG -&gt; m MSDELEG
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; u
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MSDELEG -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MSDELEG -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; MSDELEG -&gt; MSDELEG
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; MSDELEG -&gt; MSDELEG
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MSDELEG)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MSDELEG)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MSDELEG)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MSDELEG)
dataTypeOf :: MSDELEG -&gt; DataType
$cdataTypeOf :: MSDELEG -&gt; DataType
toConstr :: MSDELEG -&gt; Constr
$ctoConstr :: MSDELEG -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MSDELEG
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MSDELEG -&gt; c MSDELEG
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>
</span><span id="line-677"></span><span id="local-6989586621679760466"><span id="local-6989586621679760467"></span></span><span class="hs-keyword">data</span><span> </span><span id="MsdelegPredicateFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MsdelegPredicateFailure"><span class="hs-identifier hs-var">MsdelegPredicateFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SDELEGFailure"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEGFailure"><span class="hs-identifier hs-var">SDELEGFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760460"><span id="local-6989586621679760463"><span class="annot"><span class="annottext">MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
$c/= :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
== :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
$c== :: MsdelegPredicateFailure -&gt; MsdelegPredicateFailure -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760452"><span id="local-6989586621679760454"><span id="local-6989586621679760458"><span class="annot"><span class="annottext">Int -&gt; MsdelegPredicateFailure -&gt; ShowS
[MsdelegPredicateFailure] -&gt; ShowS
MsdelegPredicateFailure -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [MsdelegPredicateFailure] -&gt; ShowS
$cshowList :: [MsdelegPredicateFailure] -&gt; ShowS
show :: MsdelegPredicateFailure -&gt; String
$cshow :: MsdelegPredicateFailure -&gt; String
showsPrec :: Int -&gt; MsdelegPredicateFailure -&gt; ShowS
$cshowsPrec :: Int -&gt; MsdelegPredicateFailure -&gt; ShowS
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760420"><span id="local-6989586621679760422"><span id="local-6989586621679760424"><span id="local-6989586621679760426"><span id="local-6989586621679760428"><span id="local-6989586621679760430"><span id="local-6989586621679760432"><span id="local-6989586621679760434"><span id="local-6989586621679760436"><span id="local-6989586621679760438"><span id="local-6989586621679760440"><span id="local-6989586621679760442"><span id="local-6989586621679760445"><span id="local-6989586621679760448"><span class="annot"><span class="annottext">Typeable MsdelegPredicateFailure
MsdelegPredicateFailure -&gt; DataType
MsdelegPredicateFailure -&gt; Constr
(forall b. Data b =&gt; b -&gt; b)
-&gt; MsdelegPredicateFailure -&gt; MsdelegPredicateFailure
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; u
forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; MsdelegPredicateFailure
-&gt; c MsdelegPredicateFailure
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MsdelegPredicateFailure)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c MsdelegPredicateFailure)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; MsdelegPredicateFailure -&gt; m MsdelegPredicateFailure
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; u
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; u
gmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; [u]
$cgmapQ :: forall u.
(forall d. Data d =&gt; d -&gt; u) -&gt; MsdelegPredicateFailure -&gt; [u]
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r
-&gt; (forall d. Data d =&gt; d -&gt; r')
-&gt; MsdelegPredicateFailure
-&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; MsdelegPredicateFailure -&gt; MsdelegPredicateFailure
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; MsdelegPredicateFailure -&gt; MsdelegPredicateFailure
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c MsdelegPredicateFailure)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c MsdelegPredicateFailure)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MsdelegPredicateFailure)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MsdelegPredicateFailure)
dataTypeOf :: MsdelegPredicateFailure -&gt; DataType
$cdataTypeOf :: MsdelegPredicateFailure -&gt; DataType
toConstr :: MsdelegPredicateFailure -&gt; Constr
$ctoConstr :: MsdelegPredicateFailure -&gt; Constr
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MsdelegPredicateFailure
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; MsdelegPredicateFailure
-&gt; c MsdelegPredicateFailure
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g)
-&gt; MsdelegPredicateFailure
-&gt; c MsdelegPredicateFailure
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall x. Rep MsdelegPredicateFailure x -&gt; MsdelegPredicateFailure
forall x. MsdelegPredicateFailure -&gt; Rep MsdelegPredicateFailure x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep MsdelegPredicateFailure x -&gt; MsdelegPredicateFailure
$cfrom :: forall x. MsdelegPredicateFailure -&gt; Rep MsdelegPredicateFailure x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760412"><span id="local-6989586621679760414"><span id="local-6989586621679760416"><span class="annot"><span class="annottext">Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
Proxy MsdelegPredicateFailure -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy MsdelegPredicateFailure -&gt; String
$cshowTypeOf :: Proxy MsdelegPredicateFailure -&gt; String
wNoThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: Context -&gt; MsdelegPredicateFailure -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679760412"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>
</span><span id="line-680"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760396"><span id="local-6989586621679760398"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-681"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Environment"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Environment</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-682"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="State"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSState"><span class="hs-identifier hs-type">DSState</span></a></span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Signal"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">Signal</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span>
</span><span id="line-684"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PredicateFailure"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">PredicateFailure</span></a></span></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MsdelegPredicateFailure"><span class="hs-identifier hs-type">MsdelegPredicateFailure</span></a></span><span>
</span><span id="line-685"></span><span>
</span><span id="line-686"></span><span>  </span><span id="local-6989586621679760395"><span class="annot"><span class="annottext">initialRules :: [InitialRule MSDELEG]
</span><a href="#local-6989586621679760395"><span class="hs-identifier hs-var hs-var hs-var hs-var">initialRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-687"></span><span>
</span><span id="line-688"></span><span>  </span><span id="local-6989586621679760391"><span class="annot"><span class="annottext">transitionRules :: [TransitionRule MSDELEG]
</span><a href="#local-6989586621679760391"><span class="hs-identifier hs-var hs-var hs-var hs-var">transitionRules</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-689"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-690"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">TRC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760390"><span class="annot"><span class="annottext">Environment MSDELEG
</span><a href="#local-6989586621679760390"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760389"><span class="annot"><span class="annottext">State MSDELEG
</span><a href="#local-6989586621679760389"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760388"><span class="annot"><span class="annottext">Signal MSDELEG
</span><a href="#local-6989586621679760388"><span class="hs-identifier hs-var">msig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall sts (rtype :: RuleType).
Rule sts rtype (RuleContext rtype sts)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">judgmentContext</span></a></span><span>
</span><span id="line-691"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Signal MSDELEG
</span><a href="#local-6989586621679760388"><span class="hs-identifier hs-var">msig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-692"></span><span>          </span><span class="annot"><span class="annottext">Maybe DCert
Signal MSDELEG
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">State MSDELEG
</span><a href="#local-6989586621679760389"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-693"></span><span>          </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679760387"><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679760387"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall sub super (rtype :: RuleType).
Embed sub super =&gt;
RuleContext rtype sub -&gt; Rule super rtype (State sub)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment MSDELEG
</span><a href="#local-6989586621679760390"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State MSDELEG
</span><a href="#local-6989586621679760389"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DCert
</span><a href="#local-6989586621679760387"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760379"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Embed</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#SDELEG"><span class="hs-identifier hs-type">SDELEG</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-697"></span><span>  </span><span id="local-6989586621679760378"><span class="annot"><span class="annottext">wrapFailed :: PredicateFailure SDELEG -&gt; PredicateFailure MSDELEG
</span><a href="#local-6989586621679760378"><span class="hs-identifier hs-var hs-var hs-var hs-var">wrapFailed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PredicateFailure SDELEG -&gt; MsdelegPredicateFailure
</span><a href="Byron.Spec.Ledger.Delegation.html#SDELEGFailure"><span class="hs-identifier hs-var">SDELEGFailure</span></a></span><span>
</span><span id="line-698"></span><span>
</span><span id="line-699"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760364"><span id="local-6989586621679760366"><span id="local-6989586621679760368"><span id="local-6989586621679760370"><span id="local-6989586621679760374"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTrace</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#MSDELEG"><span class="hs-identifier hs-type">MSDELEG</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-700"></span><span>  </span><span id="local-6989586621679760362"><span class="annot"><span class="annottext">envGen :: Word64 -&gt; Gen (Environment MSDELEG)
</span><a href="#local-6989586621679760362"><span class="hs-identifier hs-var hs-var hs-var hs-var">envGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-var">delegEnvGen</span></a></span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span>  </span><span id="local-6989586621679760360"><span class="annot"><span class="annottext">sigGen :: SignalGenerator MSDELEG
</span><a href="#local-6989586621679760360"><span class="hs-identifier hs-var hs-var hs-var hs-var">sigGen</span></a></span></span><span> </span><span id="local-6989586621679760359"><span class="annot"><span class="annottext">Environment MSDELEG
</span><a href="#local-6989586621679760359"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621679760358"><span class="annot"><span class="annottext">State MSDELEG
</span><a href="#local-6989586621679760358"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; Set (Epoch, VKeyGenesis) -&gt; Gen (Maybe DCert)
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertGen"><span class="hs-identifier hs-var">dcertGen</span></a></span><span> </span><span class="annot"><span class="annottext">Environment MSDELEG
</span><a href="#local-6989586621679760359"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DSState -&gt; Set (Epoch, VKeyGenesis)
</span><a href="Byron.Spec.Ledger.Delegation.html#_dSStateKeyEpochDelegations"><span class="hs-identifier hs-var">_dSStateKeyEpochDelegations</span></a></span><span> </span><span class="annot"><span class="annottext">State MSDELEG
</span><a href="#local-6989586621679760358"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679760344"><span id="local-6989586621679760346"><span id="local-6989586621679760348"><span id="local-6989586621679760350"><span id="local-6989586621679760354"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/l/testlib/doc/html/small-steps/src"><span class="hs-identifier hs-type">HasTrace</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DELEG"><span class="hs-identifier hs-type">DELEG</span></a></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-705"></span><span>  </span><span id="local-6989586621679760343"><span class="annot"><span class="annottext">envGen :: Word64 -&gt; Gen (Environment DELEG)
</span><a href="#local-6989586621679760343"><span class="hs-identifier hs-var hs-var hs-var hs-var">envGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-var">delegEnvGen</span></a></span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span>  </span><span id="local-6989586621679760342"><span class="annot"><span class="annottext">sigGen :: SignalGenerator DELEG
</span><a href="#local-6989586621679760342"><span class="hs-identifier hs-var hs-var hs-var hs-var">sigGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DSEnv -&gt; DIState -&gt; Gen [DCert]
</span><a href="Byron.Spec.Ledger.Delegation.html#dcertsGen"><span class="hs-identifier hs-var">dcertsGen</span></a></span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-type">delegEnvGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-710"></span><span id="delegEnvGen"><span class="annot"><span class="annottext">delegEnvGen :: Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#delegEnvGen"><span class="hs-identifier hs-var hs-var">delegEnvGen</span></a></span></span><span> </span><span id="local-6989586621679760341"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760341"><span class="hs-identifier hs-var">chainLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-711"></span><span>  </span><span id="local-6989586621679760340"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679760340"><span class="hs-identifier hs-var">ngk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (MonadGen m, Integral a) =&gt; Range a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-var">Gen.integral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; a -&gt; Range a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-var">Range.linear</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">14</span></span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>  </span><span class="annot"><span class="annottext">Word8 -&gt; Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier hs-var">initialEnvFromGenesisKeys</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679760340"><span class="hs-identifier hs-var">ngk</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760341"><span class="hs-identifier hs-var">chainLength</span></a></span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="hs-comment">-- | Generate an initial 'DELEG' environment from the given number of genesis</span><span>
</span><span id="line-715"></span><span class="hs-comment">-- keys.</span><span>
</span><span id="line-716"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier hs-type">initialEnvFromGenesisKeys</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-717"></span><span>  </span><span class="hs-comment">-- | Number of genesis keys.</span><span>
</span><span id="line-718"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-719"></span><span>  </span><span class="hs-comment">-- | Chain length</span><span>
</span><span id="line-720"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-721"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hedgehog-1.4-cf25076c23f8111cd6afc444e0858eba4ce376f503d597d6b1f692a04269d59c/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-type">DSEnv</span></a></span><span>
</span><span id="line-722"></span><span id="initialEnvFromGenesisKeys"><span class="annot"><span class="annottext">initialEnvFromGenesisKeys :: Word8 -&gt; Word64 -&gt; Gen DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#initialEnvFromGenesisKeys"><span class="hs-identifier hs-var hs-var">initialEnvFromGenesisKeys</span></a></span></span><span> </span><span id="local-6989586621679760338"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679760338"><span class="hs-identifier hs-var">ngk</span></a></span></span><span> </span><span id="local-6989586621679760337"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760337"><span class="hs-identifier hs-var">chainLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-723"></span><span>  </span><span class="annot"><span class="annottext">Set VKeyGenesis -&gt; Epoch -&gt; Slot -&gt; BlockCount -&gt; DSEnv
</span><a href="Byron.Spec.Ledger.Delegation.html#DSEnv"><span class="hs-identifier hs-var">DSEnv</span></a></span><span>
</span><span id="line-724"></span><span>    </span><span class="hs-comment">-- We need at least one delegator in the environment to be able to generate</span><span>
</span><span id="line-725"></span><span>    </span><span class="hs-comment">-- delegation certificates.</span><span>
</span><span id="line-726"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-727"></span><span>    </span><span class="hs-comment">-- The use of a linear generator and its bound is rather arbitrary. The</span><span>
</span><span id="line-728"></span><span>    </span><span class="hs-comment">-- sizes passed to the `Gen` monad would be around 100~300, so we rather</span><span>
</span><span id="line-729"></span><span>    </span><span class="hs-comment">-- arbitrarily decided that this size times 100 is a reasonable upper</span><span>
</span><span id="line-730"></span><span>    </span><span class="hs-comment">-- bounds for epochs.</span><span>
</span><span id="line-731"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-732"></span><span>    </span><span class="hs-comment">-- A similar remark applies to the ranges chosen for slot and slot count</span><span>
</span><span id="line-733"></span><span>    </span><span class="hs-comment">-- generators.</span><span>
</span><span id="line-734"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; Set VKeyGenesis
</span><a href="Byron.Spec.Ledger.Core.html#mkVkGenesisSet"><span class="hs-identifier hs-var">mkVkGenesisSet</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621679760338"><span class="hs-identifier hs-var">ngk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-735"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; GenT Identity Epoch
</span><a href="Byron.Spec.Ledger.Core.Generators.html#epochGen"><span class="hs-identifier hs-var">epochGen</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span>
</span><span id="line-736"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Gen Slot
</span><a href="Byron.Spec.Ledger.Core.Generators.html#slotGen"><span class="hs-identifier hs-var">slotGen</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">100</span></span><span>
</span><span id="line-737"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Gen BlockCount
</span><a href="Byron.Spec.Ledger.Core.Generators.html#k"><span class="hs-identifier hs-var">CoreGen.k</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760337"><span class="hs-identifier hs-var">chainLength</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679760337"><span class="hs-identifier hs-var">chainLength</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>
</span><span id="line-739"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-740"></span><span class="hs-comment">-- Shared support functions for Delegation Properties</span><span>
</span><span id="line-741"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-type">delegatorDelegate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span id="delegatorDelegate"><span class="annot"><span class="annottext">delegatorDelegate :: DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var hs-var">delegatorDelegate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKeyGenesis
</span><a href="Byron.Spec.Ledger.Delegation.html#delegator"><span class="hs-identifier hs-var">delegator</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: * -&gt; * -&gt; *) b c c'.
Arrow a =&gt;
a b c -&gt; a b c' -&gt; a b (c, c')
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; VKey
</span><a href="Byron.Spec.Ledger.Delegation.html#delegate"><span class="hs-identifier hs-var">delegate</span></a></span><span>
</span><span id="line-745"></span><span>
</span><span id="line-746"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#ratioInt"><span class="hs-identifier hs-type">ratioInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-747"></span><span id="ratioInt"><span class="annot"><span class="annottext">ratioInt :: Int -&gt; Int -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#ratioInt"><span class="hs-identifier hs-var hs-var">ratioInt</span></a></span></span><span> </span><span id="local-6989586621679760333"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679760333"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679760332"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679760332"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-748"></span><span>  </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679760333"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679760332"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="hs-comment">-- | Transforms the list and returns the ratio of lengths of</span><span>
</span><span id="line-751"></span><span class="hs-comment">-- the transformed and original lists.</span><span>
</span><span id="line-752"></span><span id="local-6989586621679763343"><span id="local-6989586621679763344"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-type">lenRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679763344"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679763343"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679763344"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span></span></span><span>
</span><span id="line-753"></span><span id="lenRatio"><span class="annot"><span class="annottext">lenRatio :: forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var hs-var">lenRatio</span></a></span></span><span> </span><span id="local-6989586621679760327"><span class="annot"><span class="annottext">[a] -&gt; [b]
</span><a href="#local-6989586621679760327"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679760326"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679760326"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-754"></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#ratioInt"><span class="hs-identifier hs-var">ratioInt</span></a></span><span>
</span><span id="line-755"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; [b]
</span><a href="#local-6989586621679760327"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679760326"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-756"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679760326"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span class="hs-comment">-- | True if the tuple count (snd item) is &gt;= 2</span><span>
</span><span id="line-759"></span><span id="local-6989586621679763340"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-type">multiple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679763340"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-760"></span><span id="multiple"><span class="annot"><span class="annottext">multiple :: forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var hs-var">multiple</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-comment">-- | Count the number of delegates/delegators in the given certificates</span><span>
</span><span id="line-763"></span><span id="local-6989586621679763336"><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-type">delegateCounter</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-764"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679763336"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679763336"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-767"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679763336"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-768"></span><span id="delegateCounter"><span class="annot"><span class="annottext">delegateCounter :: forall a.
Ord a =&gt;
((VKeyGenesis, VKey) -&gt; a) -&gt; [DCert] -&gt; [(a, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-var hs-var">delegateCounter</span></a></span></span><span> </span><span id="local-6989586621679760314"><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; a
</span><a href="#local-6989586621679760314"><span class="hs-identifier hs-var">pick</span></a></span></span><span> </span><span id="local-6989586621679760313"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760313"><span class="hs-identifier hs-var">certs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-769"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760313"><span class="hs-identifier hs-var">certs</span></a></span><span>
</span><span id="line-770"></span><span>    </span><span class="hs-comment">-- Remove duplicated elements, since we're not</span><span>
</span><span id="line-771"></span><span>    </span><span class="hs-comment">-- interested in repeated delegations</span><span>
</span><span id="line-772"></span><span>    </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.nub</span></a></span><span>
</span><span id="line-773"></span><span>    </span><span class="hs-comment">-- Select the (unique) delegate/delegators</span><span>
</span><span id="line-774"></span><span>    </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(VKeyGenesis, VKey) -&gt; a
</span><a href="#local-6989586621679760314"><span class="hs-identifier hs-var">pick</span></a></span><span>
</span><span id="line-775"></span><span>    </span><span class="hs-comment">-- If we have more than one occurrence, then there were</span><span>
</span><span id="line-776"></span><span>    </span><span class="hs-comment">-- multiple delegations from/to that delegate</span><span>
</span><span id="line-777"></span><span>    </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [(a, Int)]
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/Unique-0.4.7.9-5d63e8218cc9cd6e824817231ee950da27ddf227910f7c881b5986d3afb6c1f0/share/doc/html/src"><span class="hs-identifier hs-var">count</span></a></span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-comment">-- | Count the number of times each delegate was delegated to</span><span>
</span><span id="line-780"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-type">delegateCounts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKey"><span class="hs-identifier hs-type">VKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-781"></span><span id="delegateCounts"><span class="annot"><span class="annottext">delegateCounts :: [DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var hs-var">delegateCounts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
Ord a =&gt;
((VKeyGenesis, VKey) -&gt; a) -&gt; [DCert] -&gt; [(a, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-var">delegateCounter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span>
</span><span id="line-782"></span><span>
</span><span id="line-783"></span><span class="hs-comment">-- | Count the number of times each delegator changed their delegation</span><span>
</span><span id="line-784"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#delegatorCounts"><span class="hs-identifier hs-type">delegatorCounts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#VKeyGenesis"><span class="hs-identifier hs-type">VKeyGenesis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-785"></span><span id="delegatorCounts"><span class="annot"><span class="annottext">delegatorCounts :: [DCert] -&gt; [(VKeyGenesis, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorCounts"><span class="hs-identifier hs-var hs-var">delegatorCounts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
Ord a =&gt;
((VKeyGenesis, VKey) -&gt; a) -&gt; [DCert] -&gt; [(a, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounter"><span class="hs-identifier hs-var">delegateCounter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span>
</span><span id="line-786"></span><span>
</span><span id="line-787"></span><span class="hs-comment">-- | Ratio of certificate groups that are empty</span><span>
</span><span id="line-788"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#emptyDelegationPayloadRatio"><span class="hs-identifier hs-type">emptyDelegationPayloadRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-789"></span><span id="emptyDelegationPayloadRatio"><span class="annot"><span class="annottext">emptyDelegationPayloadRatio :: [[DCert]] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#emptyDelegationPayloadRatio"><span class="hs-identifier hs-var hs-var">emptyDelegationPayloadRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-790"></span><span>  </span><span class="annot"><span class="annottext">forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">null</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-791"></span><span>
</span><span id="line-792"></span><span class="hs-comment">-- | Ratio of certificates that delegate to _this_ epoch, where</span><span>
</span><span id="line-793"></span><span class="hs-comment">--   each certificate is represented by (current epoch,cert epoch)</span><span>
</span><span id="line-794"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#thisEpochDelegationsRatio"><span class="hs-identifier hs-type">thisEpochDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-795"></span><span id="thisEpochDelegationsRatio"><span class="annot"><span class="annottext">thisEpochDelegationsRatio :: [(Epoch, Epoch)] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#thisEpochDelegationsRatio"><span class="hs-identifier hs-var hs-var">thisEpochDelegationsRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-796"></span><span>  </span><span class="annot"><span class="annottext">forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">(Epoch, Epoch) -&gt; Bool
</span><a href="#local-6989586621679760309"><span class="hs-identifier hs-var">thisEpoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-798"></span><span>    </span><span id="local-6989586621679760309"><span class="annot"><span class="annottext">thisEpoch :: (Epoch, Epoch) -&gt; Bool
</span><a href="#local-6989586621679760309"><span class="hs-identifier hs-var hs-var">thisEpoch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">(==)</span></a></span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span class="hs-comment">-- | Ratio of certificates that delegate to the _next_ epoch, where</span><span>
</span><span id="line-801"></span><span class="hs-comment">--   each certificate is represented by (current epoch,cert epoch)</span><span>
</span><span id="line-802"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#nextEpochDelegationsRatio"><span class="hs-identifier hs-type">nextEpochDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Byron.Spec.Ledger.Core.html#Epoch"><span class="hs-identifier hs-type">Epoch</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-803"></span><span id="nextEpochDelegationsRatio"><span class="annot"><span class="annottext">nextEpochDelegationsRatio :: [(Epoch, Epoch)] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#nextEpochDelegationsRatio"><span class="hs-identifier hs-var hs-var">nextEpochDelegationsRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-804"></span><span>  </span><span class="annot"><span class="annottext">forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a}. (Eq a, Num a) =&gt; (a, a) -&gt; Bool
</span><a href="#local-6989586621679760306"><span class="hs-identifier hs-var">nextEpoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-806"></span><span>    </span><span id="local-6989586621679760306"><span class="annot"><span class="annottext">nextEpoch :: (a, a) -&gt; Bool
</span><a href="#local-6989586621679760306"><span class="hs-identifier hs-var hs-var">nextEpoch</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760300"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760300"><span class="hs-identifier hs-var">e0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760299"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760299"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760300"><span class="hs-identifier hs-var">e0</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760299"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-807"></span><span>
</span><span id="line-808"></span><span class="hs-comment">-- | Ratio of certificates that &quot;delegate to self&quot;, that is,</span><span>
</span><span id="line-809"></span><span class="hs-comment">-- where the delegator and delegate are the same</span><span>
</span><span id="line-810"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#selfDelegationsRatio"><span class="hs-identifier hs-type">selfDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-811"></span><span id="selfDelegationsRatio"><span class="annot"><span class="annottext">selfDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#selfDelegationsRatio"><span class="hs-identifier hs-var hs-var">selfDelegationsRatio</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-812"></span><span>  </span><span class="annot"><span class="annottext">forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall {a} {a}. (HasOwner a, HasOwner a) =&gt; (a, a) -&gt; Bool
</span><a href="#local-6989586621679760298"><span class="hs-identifier hs-var">selfDeleg</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-813"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-814"></span><span>    </span><span id="local-6989586621679760298"><span class="annot"><span class="annottext">selfDeleg :: (a, a) -&gt; Bool
</span><a href="#local-6989586621679760298"><span class="hs-identifier hs-var hs-var">selfDeleg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679760291"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760291"><span class="hs-identifier hs-var">vks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679760290"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760290"><span class="hs-identifier hs-var">vk</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasOwner a =&gt; a -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#owner"><span class="hs-identifier hs-var">owner</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760291"><span class="hs-identifier hs-var">vks</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. HasOwner a =&gt; a -&gt; Owner
</span><a href="Byron.Spec.Ledger.Core.html#owner"><span class="hs-identifier hs-var">owner</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679760290"><span class="hs-identifier hs-var">vk</span></a></span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span class="hs-comment">-- | Ratio of delegates that have multiple delegators</span><span>
</span><span id="line-817"></span><span class="hs-comment">-- that are delegating to them</span><span>
</span><span id="line-818"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#multipleDelegationsRatio"><span class="hs-identifier hs-type">multipleDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-819"></span><span id="multipleDelegationsRatio"><span class="annot"><span class="annottext">multipleDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#multipleDelegationsRatio"><span class="hs-identifier hs-var hs-var">multipleDelegationsRatio</span></a></span></span><span> </span><span id="local-6989586621679760289"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760289"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-820"></span><span>  </span><span class="annot"><span class="annottext">forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var">delegateCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760289"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span class="hs-comment">-- | The maximum number of delegators to any particular delegate</span><span>
</span><span id="line-823"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxDelegationsTo"><span class="hs-identifier hs-type">maxDelegationsTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-824"></span><span id="maxDelegationsTo"><span class="annot"><span class="annottext">maxDelegationsTo :: [DCert] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxDelegationsTo"><span class="hs-identifier hs-var hs-var">maxDelegationsTo</span></a></span></span><span> </span><span id="local-6989586621679760288"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760288"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-825"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var">delegateCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760288"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-826"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-827"></span><span>    </span><span id="local-6989586621679760287"><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679760287"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679760287"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span class="hs-comment">-- | Ratio of delegators that have changed their delegations</span><span>
</span><span id="line-830"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#changedDelegationsRatio"><span class="hs-identifier hs-type">changedDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-831"></span><span id="changedDelegationsRatio"><span class="annot"><span class="annottext">changedDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#changedDelegationsRatio"><span class="hs-identifier hs-var hs-var">changedDelegationsRatio</span></a></span></span><span> </span><span id="local-6989586621679760285"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760285"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-832"></span><span>  </span><span class="annot"><span class="annottext">forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKeyGenesis, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorCounts"><span class="hs-identifier hs-var">delegatorCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760285"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="hs-comment">-- | The maximum number of change-of-delegate for any particular delegator</span><span>
</span><span id="line-835"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxChangedDelegations"><span class="hs-identifier hs-type">maxChangedDelegations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-836"></span><span id="maxChangedDelegations"><span class="annot"><span class="annottext">maxChangedDelegations :: [DCert] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxChangedDelegations"><span class="hs-identifier hs-var hs-var">maxChangedDelegations</span></a></span></span><span> </span><span id="local-6989586621679760284"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760284"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-837"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DCert] -&gt; [(VKey, Int)]
</span><a href="Byron.Spec.Ledger.Delegation.html#delegateCounts"><span class="hs-identifier hs-var">delegateCounts</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760284"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-838"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-839"></span><span>    </span><span id="local-6989586621679760283"><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679760283"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(VKey, Int)]
</span><a href="#local-6989586621679760283"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span class="hs-comment">-- | Ratio of repeated delegations to all delegations</span><span>
</span><span id="line-842"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#repeatedDelegationsRatio"><span class="hs-identifier hs-type">repeatedDelegationsRatio</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Double</span></a></span><span>
</span><span id="line-843"></span><span id="repeatedDelegationsRatio"><span class="annot"><span class="annottext">repeatedDelegationsRatio :: [DCert] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#repeatedDelegationsRatio"><span class="hs-identifier hs-var hs-var">repeatedDelegationsRatio</span></a></span></span><span> </span><span id="local-6989586621679760282"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760282"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-844"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760282"><span class="hs-identifier hs-var">dcerts</span></a></span><span>
</span><span id="line-845"></span><span>    </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [(a, Int)]
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/Unique-0.4.7.9-5d63e8218cc9cd6e824817231ee950da27ddf227910f7c881b5986d3afb6c1f0/share/doc/html/src"><span class="hs-identifier hs-var">count</span></a></span><span>
</span><span id="line-846"></span><span>    </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. ([a] -&gt; [b]) -&gt; [a] -&gt; Double
</span><a href="Byron.Spec.Ledger.Delegation.html#lenRatio"><span class="hs-identifier hs-var">lenRatio</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span class="hs-comment">-- | The maximum number of repeated delegations in the given certificates</span><span>
</span><span id="line-849"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxRepeatedDelegations"><span class="hs-identifier hs-type">maxRepeatedDelegations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-850"></span><span id="maxRepeatedDelegations"><span class="annot"><span class="annottext">maxRepeatedDelegations :: [DCert] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxRepeatedDelegations"><span class="hs-identifier hs-var hs-var">maxRepeatedDelegations</span></a></span></span><span> </span><span id="local-6989586621679760281"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760281"><span class="hs-identifier hs-var">dcerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a, Int) -&gt; Bool
</span><a href="Byron.Spec.Ledger.Delegation.html#multiple"><span class="hs-identifier hs-var">multiple</span></a></span><span> </span><span class="annot"><span class="annottext">[((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679760280"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-852"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-853"></span><span>    </span><span id="local-6989586621679760279"><span class="annot"><span class="annottext">[((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679760279"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679760279"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-855"></span><span>    </span><span id="local-6989586621679760280"><span class="annot"><span class="annottext">ds :: [((VKeyGenesis, VKey), Int)]
</span><a href="#local-6989586621679760280"><span class="hs-identifier hs-var hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; [(a, Int)]
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/Unique-0.4.7.9-5d63e8218cc9cd6e824817231ee950da27ddf227910f7c881b5986d3afb6c1f0/share/doc/html/src"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">DCert -&gt; (VKeyGenesis, VKey)
</span><a href="Byron.Spec.Ledger.Delegation.html#delegatorDelegate"><span class="hs-identifier hs-var">delegatorDelegate</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679760281"><span class="hs-identifier hs-var">dcerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#maxCertsPerBlock"><span class="hs-identifier hs-type">maxCertsPerBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Byron.Spec.Ledger.Delegation.html#DCert"><span class="hs-identifier hs-type">DCert</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-858"></span><span id="maxCertsPerBlock"><span class="annot"><span class="annottext">maxCertsPerBlock :: [[DCert]] -&gt; Int
</span><a href="Byron.Spec.Ledger.Delegation.html#maxCertsPerBlock"><span class="hs-identifier hs-var hs-var">maxCertsPerBlock</span></a></span></span><span> </span><span id="local-6989586621679760278"><span class="annot"><span class="annottext">[[DCert]]
</span><a href="#local-6989586621679760278"><span class="hs-identifier hs-var">groupedCerts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-859"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[[DCert]]
</span><a href="#local-6989586621679760278"><span class="hs-identifier hs-var">groupedCerts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-860"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-861"></span><span>    </span><span class="annot"><span class="annottext">[[DCert]]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">List.maximum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[[DCert]]
</span><a href="#local-6989586621679760278"><span class="hs-identifier hs-var">groupedCerts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span></pre></body></html>